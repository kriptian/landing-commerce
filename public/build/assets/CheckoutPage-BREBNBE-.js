import{c as n,u as M,r as V,a as c,o as d,b as q,f as e,e as $,i as x,d as u,h as A,t as m,g as L,j as v,l as y,m as g,n as b,F as h,k as E,p as R}from"./app-SsEMnYrU.js";import{_ as W}from"./AlertModal-Csg112t6.js";import"./Modal-CSpKFLf1.js";const H=["href"],G={class:"bg-white shadow-sm sticky top-0 z-40"},J={class:"container mx-auto px-6 py-4 flex items-center gap-3"},K=["src","alt"],Q={class:"text-lg font-medium text-gray-600"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12"},Y=e("h1",{class:"text-xl sm:text-2xl font-medium text-gray-600 mb-6"},"Datos de Envío",-1),Z=e("label",{for:"customer_name",class:"block font-medium text-sm text-gray-700 mb-2"},"Nombre Completo",-1),ee=e("label",{for:"customer_phone",class:"block font-medium text-sm text-gray-700 mb-2"},"Teléfono (WhatsApp)",-1),te=e("label",{for:"customer_email",class:"block font-medium text-sm text-gray-700 mb-2"},"Correo Electrónico",-1),oe=e("label",{for:"customer_address",class:"block font-medium text-sm text-gray-700 mb-2"},"Dirección Completa (con ciudad y detalles)",-1),re=["disabled"],se={class:"bg-white/95 backdrop-blur-sm p-8 lg:p-10 rounded-2xl shadow-2xl border border-gray-100 sticky top-24 transform transition-all hover:shadow-3xl"},le=e("h2",{class:"text-xl sm:text-2xl font-medium text-gray-600 mb-6"},"Resumen de tu Pedido",-1),ae={class:"space-y-4"},ne={class:"flex items-start gap-3 flex-1 min-w-0"},ue=["src"],ie={class:"min-w-0"},ce={class:"font-semibold text-gray-900 break-words"},de={key:0,class:"text-sm text-gray-500 break-words mt-1"},me={class:"text-sm text-gray-600 mt-1"},ge={class:"font-semibold text-gray-900 whitespace-nowrap shrink-0 sm:text-right mt-2 sm:mt-0"},be={class:"border-t border-gray-200 mt-6 pt-6"},pe={class:"flex justify-between items-center"},_e=e("span",{class:"text-lg font-medium text-gray-600"},"Total",-1),fe={class:"text-2xl font-bold text-gray-900"},he={__name:"CheckoutPage",props:{cartItems:Array,store:Object},setup(i){const l=i,r=n(()=>l.store?.catalog_use_default??!0),w=n(()=>r.value?null:l.store?.catalog_body_bg_color||"#FFFFFF"),F=n(()=>r.value?null:l.store?.catalog_body_text_color||"#1F2937"),k=n(()=>r.value?null:l.store?.catalog_input_bg_color||"#FFFFFF"),C=n(()=>r.value?null:l.store?.catalog_input_text_color||"#1F2937"),N=n(()=>r.value?null:l.store?.catalog_button_bg_color||"#2563EB"),P=n(()=>r.value?null:l.store?.catalog_button_text_color||"#FFFFFF"),S=n(()=>r.value?{}:!w.value||!F.value?{}:{backgroundColor:w.value,color:F.value}),p=n(()=>r.value?{}:!k.value||!C.value?{}:{backgroundColor:k.value,color:C.value}),D=n(()=>r.value?{}:!N.value||!P.value?{}:{backgroundColor:N.value,color:P.value}),T=s=>{const o=s?.variant||null,t=s?.product||null;if(o&&t){const f=o.price!=null&&o.price!==""?Number(o.price):null;if(f!==null)return f}return t&&t.price!=null?Number(t.price):0},U=s=>{try{return l.store?.promo_active&&Number(l.store?.promo_discount_percent||0)>0?Number(l.store.promo_discount_percent):s?.product?.promo_active&&Number(s?.product?.promo_discount_percent||0)>0?Number(s.product.promo_discount_percent):0}catch{return 0}},j=s=>{const o=T(s),t=U(s);return t>0?Math.round(o*(100-t)/100):o},z=n(()=>l.cartItems.reduce((s,o)=>s+j(o)*o.quantity,0)),a=M({customer_name:"",customer_phone:"",customer_email:"",customer_address:""}),_=V(!1),O=V(""),I=()=>{a.post(route("checkout.store",{store:l.store.slug}),{onSuccess:()=>{},onError:s=>{O.value="Hubo un error al procesar tu pedido. Por favor verificá tus datos.",_.value=!0}})};return(s,o)=>(d(),c(h,null,[q(u(A),{title:"Finalizar Compra"},{default:$(()=>[i.store?.logo_url?(d(),c("link",{key:0,rel:"icon",type:"image/png",href:i.store.logo_url},null,8,H)):x("",!0)]),_:1}),e("header",G,[e("nav",J,[i.store?.logo_url?(d(),c("img",{key:0,src:i.store.logo_url,alt:`Logo de ${i.store.name}`,class:"h-10 w-10 rounded-full object-cover ring-2 ring-gray-100"},null,8,K)):x("",!0),e("h1",Q,m(i.store.name),1)])]),e("main",{class:"container mx-auto px-6 py-12 min-h-screen",style:g(S.value)},[e("div",X,[e("div",null,[Y,e("form",{onSubmit:L(I,["prevent"]),class:"space-y-6 bg-white p-8 lg:p-10 shadow-2xl rounded-2xl border border-gray-100 backdrop-blur-sm transform transition-all hover:shadow-3xl"},[e("div",null,[Z,v(e("input",{id:"customer_name","onUpdate:modelValue":o[0]||(o[0]=t=>u(a).customer_name=t),type:"text",class:b(["block w-full rounded-xl shadow-sm border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all py-3 px-4",r.value?"bg-gray-50 hover:bg-white":""]),style:g(p.value),required:""},null,6),[[y,u(a).customer_name]])]),e("div",null,[ee,v(e("input",{id:"customer_phone","onUpdate:modelValue":o[1]||(o[1]=t=>u(a).customer_phone=t),type:"tel",class:b(["block w-full rounded-xl shadow-sm border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all py-3 px-4",r.value?"bg-gray-50 hover:bg-white":""]),style:g(p.value),required:""},null,6),[[y,u(a).customer_phone]])]),e("div",null,[te,v(e("input",{id:"customer_email","onUpdate:modelValue":o[2]||(o[2]=t=>u(a).customer_email=t),type:"email",class:b(["block w-full rounded-xl shadow-sm border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all py-3 px-4",r.value?"bg-gray-50 hover:bg-white":""]),style:g(p.value),required:""},null,6),[[y,u(a).customer_email]])]),e("div",null,[oe,v(e("textarea",{id:"customer_address","onUpdate:modelValue":o[3]||(o[3]=t=>u(a).customer_address=t),class:b(["block w-full rounded-xl shadow-sm border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all py-3 px-4 resize-none",r.value?"bg-gray-50 hover:bg-white":""]),style:g(p.value),rows:"3",required:""},null,6),[[y,u(a).customer_address]])]),e("button",{type:"submit",disabled:u(a).processing,class:b(["w-full font-bold py-4 px-6 rounded-xl text-center disabled:opacity-50 transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl",r.value?"bg-green-600 text-white hover:bg-green-700":""]),style:g(!r.value&&D.value?D.value:{})},m(u(a).processing?"Procesando...":"Realizar Pedido por WhatsApp"),15,re)],32)]),e("div",se,[le,e("div",ae,[(d(!0),c(h,null,E(i.cartItems,t=>(d(),c("div",{key:t.id,class:"flex flex-col sm:flex-row sm:items-start sm:justify-between sm:gap-4 p-3 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",ne,[e("img",{src:t.product.main_image_url,class:"w-16 h-16 object-cover rounded-lg shadow-sm ring-1 ring-gray-200"},null,8,ue),e("div",ie,[e("p",ce,m(t.product.name),1),t.variant?(d(),c("div",de,[(d(!0),c(h,null,E(t.variant.options,(f,B)=>(d(),c("span",{key:B,class:"mr-2 inline-block"},[e("strong",null,m(B)+":",1),R(" "+m(f),1)]))),128))])):x("",!0),e("p",me,"Cantidad: "+m(t.quantity),1)])]),e("p",ge,m(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(j(t)*t.quantity)),1)]))),128))]),e("div",be,[e("div",pe,[_e,e("span",fe,m(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(z.value)),1)])])])])],4),q(W,{show:_.value,type:"error",title:"No pudimos procesar tu pedido",message:O.value,"primary-text":"Entendido",onPrimary:o[4]||(o[4]=t=>_.value=!1),onClose:o[5]||(o[5]=t=>_.value=!1)},null,8,["show","message"])],64))}};export{he as default};
