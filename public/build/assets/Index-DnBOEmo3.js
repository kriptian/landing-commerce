const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BJdrYCH1.js","assets/app-DvD8DxYD.js","assets/app-rw71YK5a.css"])))=>i.map(i=>d[i]);
import{H as ke,c as X,r as d,u as nt,B as at,z as ne,D as lt,w as rt,a as r,o as l,b as _,d as Ce,h as it,e as m,i as g,f as e,s as ct,m as x,j as F,A as Me,q as Y,p as I,F as $,n as V,t as i,g as dt,x as Te,y as ut,C as ht,_ as vt}from"./app-DvD8DxYD.js";import{_ as pt}from"./AuthenticatedLayout-XBRx6_y9.js";import{_ as _t}from"./AlertModal-99vnVpkh.js";import{_ as H}from"./Modal-CNkf46-f.js";import{_ as ae}from"./SecondaryButton-Z5F0ayGi.js";import{_ as le}from"./PrimaryButton-5uv6Lyqn.js";import ft from"./ExpenseModal-CC3fzYi4.js";import mt from"./VariantSelectorModal-DygKXJmf.js";import"./InputError-qhe6HnB2.js";const gt={key:0,class:"font-semibold text-xl text-gray-800 leading-tight"},xt={key:0,class:"hidden lg:flex fixed inset-0 bg-white flex-row",style:{"margin-top":"0","z-index":"10"}},bt={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},yt={class:"flex items-center gap-3 mb-3"},wt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),kt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ct={class:"flex-1 relative"},Mt=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),Tt=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),jt=[Tt],St={class:"flex items-center gap-2 overflow-x-auto"},$t=["onClick"],Et={class:"flex-1 overflow-y-auto p-4"},Pt={key:0,class:"text-center py-12 text-gray-500"},Nt=e("p",null,"No se encontraron productos",-1),qt=[Nt],Bt={key:1,class:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3"},Dt=["onClick"],Ft={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},Rt=["src","alt"],Ot={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Lt=[Vt],At={class:"p-2 flex-1 flex flex-col"},zt={class:"mb-1"},Xt={class:"text-xs line-through text-red-600"},It={class:"text-sm font-bold text-green-600"},Ht={key:1,class:"text-sm font-bold text-gray-900"},Kt=["title"],Ut=e("div",{class:"h-8 w-1 bg-gray-400 rounded-full group-hover:bg-white"},null,-1),Gt=[Ut],Wt={class:"flex-1 h-full flex flex-col bg-white overflow-hidden",style:{"min-width":"300px"}},Qt={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},Jt={class:"flex items-center gap-3"},Yt=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Zt={class:"text-blue-700 font-semibold"},es=e("span",{class:"text-blue-400"},"|",-1),ts=["src","alt"],ss={key:1,class:"text-blue-700 font-medium text-sm"},os={class:"flex-1 overflow-y-auto px-3 py-2"},ns={key:0,class:"text-center py-12 text-gray-500"},as=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),ls=e("p",null,"El carrito est√° vac√≠o",-1),rs=[as,ls],is={key:1,class:"overflow-x-auto"},cs={class:"w-full text-sm"},ds=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-semibold text-gray-700"},"Producto"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"},"Stock"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-20"},"Cant"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-40"},"Valor"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-32"},"Desc"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-36"},"SubTotal"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"})])],-1),us={class:"divide-y divide-gray-200 bg-white"},hs=["title"],vs={class:"min-w-0",style:{"max-width":"140px"}},ps={class:"font-medium text-gray-900"},_s={key:0,class:"text-xs text-gray-500 ml-1"},fs=["title"],ms=["title"],gs=["value","onChange"],xs=["title"],bs=["value","onInput"],ys=["title"],ws=["onClick"],ks={key:1,class:"relative"},Cs=["value","onChange","onClick"],Ms=e("span",{class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm font-medium pointer-events-none"},"%",-1),Ts=["title"],js={class:"font-semibold text-gray-900 text-sm"},Ss={class:"px-3 py-3 text-center align-middle w-16"},$s=["onClick"],Es=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Ps=[Es],Ns={key:0,class:"border-t border-gray-200 px-4 py-3 bg-gray-50 space-y-3 flex-shrink-0"},qs={class:"flex justify-between text-sm"},Bs=e("span",{class:"text-gray-700"},"Total Bruto:",-1),Ds={class:"font-medium"},Fs={class:"flex justify-between text-sm items-center"},Rs=e("span",{class:"text-gray-700"},"Descuento:",-1),Os=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),Vs={class:"pt-2 border-t border-gray-300"},Ls={class:"flex justify-between items-center mb-3"},As=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),zs={class:"text-base font-bold text-green-600"},Xs={class:"flex gap-3"},Is={key:1,class:"lg:hidden fixed inset-0 bg-white flex flex-col",style:{"margin-top":"0","z-index":"10"}},Hs={class:"bg-blue-500 px-4 py-3 flex-shrink-0"},Ks={class:"flex items-center justify-between"},Us={class:"flex items-center gap-2"},Gs=e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Ws={class:"text-white font-semibold"},Qs=e("span",{class:"text-white"},"|",-1),Js=["src","alt"],Ys={key:1,class:"text-white font-medium text-sm"},Zs={class:"bg-gray-100 px-4 py-3 flex-shrink-0 border-b border-gray-200"},eo={class:"flex items-center gap-2"},to=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),so=[to],oo=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),no=[oo],ao={class:"flex-1 relative"},lo=e("svg",{class:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),ro=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),io=[ro],co={key:0,class:"mt-3 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto"},uo=["onClick"],ho={class:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center flex-shrink-0"},vo=["src","alt"],po={key:1,class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_o=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),fo=[_o],mo={class:"flex-1 min-w-0"},go={class:"font-medium text-sm text-gray-900 truncate"},xo={class:"text-xs line-through text-red-600"},bo={class:"text-xs text-green-600 font-semibold"},yo={key:1,class:"text-xs text-gray-500"},wo=e("svg",{class:"w-5 h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ko=e("div",{class:"bg-gray-200 px-4 py-2 flex-shrink-0"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})])]),e("h3",{class:"text-gray-700 font-semibold text-sm"},"INFORMACION DE LA VENTA")])],-1),Co={class:"flex-1 overflow-y-auto bg-white"},Mo={key:0,class:"text-center py-12 text-gray-500"},To=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),jo=e("p",null,"No hay productos en el carrito",-1),So=e("p",{class:"text-xs text-gray-400 mt-2"},"Busca o escanea un producto para comenzar",-1),$o=[To,jo,So],Eo={key:1,class:"divide-y divide-gray-200"},Po={class:"flex items-start justify-between gap-3"},No={class:"flex-1 min-w-0"},qo={class:"flex items-center gap-2 mb-1"},Bo={key:0,class:"text-xs text-red-600 font-semibold"},Do={class:"font-medium text-sm text-gray-900 mb-1"},Fo={class:"text-xs text-gray-500"},Ro={class:"flex items-center gap-3"},Oo={class:"flex flex-col items-center gap-1"},Vo=e("span",{class:"text-xs text-gray-500"},"Cant",-1),Lo={class:"flex items-center gap-1"},Ao=["onClick"],zo={class:"w-10 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full font-semibold text-sm"},Xo=["onClick"],Io={class:"flex flex-col items-end gap-1 min-w-[80px]"},Ho=e("span",{class:"text-xs text-gray-500"},"Total",-1),Ko={class:"font-semibold text-sm text-gray-900"},Uo=["onClick"],Go=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),Wo=[Go],Qo=["onClick"],Jo=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Yo=[Jo],Zo={key:0,class:"border-t border-gray-300 bg-white px-4 py-4 flex-shrink-0"},en={class:"space-y-2 mb-4"},tn={class:"flex justify-between text-sm"},sn=e("span",{class:"text-gray-700"},"Subtotal:",-1),on={class:"font-medium text-green-600"},nn={class:"flex justify-between text-sm"},an=e("span",{class:"text-gray-700"},"Descuento:",-1),ln=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),rn={class:"flex justify-between items-center pt-2 border-t border-gray-300"},cn=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),dn={class:"text-base font-bold text-green-600"},un={class:"flex gap-3"},hn={class:"p-6"},vn=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmar Venta",-1),pn={class:"mb-4"},_n=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"M√©todo de Pago",-1),fn=e("option",{value:"efectivo"},"Efectivo",-1),mn=e("option",{value:"tarjeta"},"Tarjeta",-1),gn=e("option",{value:"transferencia"},"Transferencia",-1),xn=e("option",{value:"mixto"},"Mixto",-1),bn=[fn,mn,gn,xn],yn={class:"mb-4"},wn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notas (Opcional)",-1),kn={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded"},Cn=e("h4",{class:"text-sm font-semibold text-green-800 mb-2"},"Descuentos por Producto:",-1),Mn={class:"space-y-1"},Tn={class:"text-green-700"},jn={class:"text-green-700 font-medium"},Sn={class:"mb-4 p-3 bg-gray-50 rounded"},$n={class:"flex justify-between mb-2"},En=e("span",null,"Subtotal:",-1),Pn={key:0,class:"flex justify-between mb-2 text-red-600"},Nn={class:"flex justify-between font-bold text-lg pt-2 border-t"},qn=e("span",null,"Total:",-1),Bn={class:"flex gap-3"},Dn={class:"p-6"},Fn=e("h2",{class:"text-lg font-semibold mb-4 text-green-600"},"¬°Venta registrada exitosamente!",-1),Rn={key:0,class:"mb-4"},On={class:"text-sm text-gray-600 mb-2"},Vn={class:"font-semibold"},Ln={class:"text-sm text-gray-600 mb-2"},An={class:"font-semibold"},zn={class:"flex gap-3"},Xn={class:"p-6"},In=e("h2",{class:"text-lg font-semibold mb-4"},"Escanear C√≥digo de Barras",-1),Hn=e("p",{class:"text-sm text-gray-600 mb-4"}," Apunta la c√°mara hacia el c√≥digo de barras. El producto se agregar√° autom√°ticamente al carrito. ",-1),Kn=e("div",{id:"barcode-scanner-sales",class:"w-full rounded-lg overflow-hidden",style:{"min-height":"300px"}},null,-1),Un={class:"p-6"},Gn={class:"flex items-center justify-between mb-4"},Wn={class:"text-lg font-semibold"},Qn=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Jn=[Qn],Yn={class:"space-y-4"},Zn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cantidad",-1),ea=["value"],ta=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valor",-1),sa=["value"],oa=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),na=e("option",{value:"percentage"},"Porcentaje",-1),aa=e("option",{value:"amount"},"Monto",-1),la=[na,aa],ra={class:"block text-sm font-medium text-gray-700 mb-2"},ia=["step","max","placeholder"],ca={key:0,class:"p-4 bg-gray-50 rounded-lg space-y-2"},da={class:"flex justify-between text-sm"},ua=e("span",{class:"text-gray-700"},"Subtotal:",-1),ha={class:"font-semibold"},va={class:"flex justify-between text-sm"},pa=e("span",{class:"text-gray-700"},"Descuento:",-1),_a={class:"font-semibold"},fa={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},ma=e("span",null,"Total:",-1),ga={class:"flex gap-3 mt-6"},xa={class:"p-6 max-h-[90vh] flex flex-col"},ba={class:"flex items-center justify-between mb-4 flex-shrink-0"},ya=e("h2",{class:"text-lg font-semibold"},"Cat√°logo de Productos",-1),wa=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ka=[wa],Ca={class:"mb-4 relative flex-shrink-0"},Ma=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),Ta={class:"mb-4 flex items-center gap-2 overflow-x-auto pb-2 flex-shrink-0"},ja=["onClick"],Sa={class:"flex-1 overflow-y-auto"},$a={key:0,class:"text-center py-12 text-gray-500"},Ea=e("p",null,"No se encontraron productos",-1),Pa=[Ea],Na={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},qa=["onClick"],Ba={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},Da=["src","alt"],Fa={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ra=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Oa=[Ra],Va={class:"p-2 flex-1 flex flex-col"},La={class:"mb-1"},Aa={class:"text-xs line-through text-red-600"},za={class:"text-sm font-bold text-green-600"},Xa={key:1,class:"text-sm font-bold text-gray-900"},Ia={class:"font-medium text-xs text-gray-900 line-clamp-2"},Ha={class:"p-6"},Ka={class:"flex items-center justify-between mb-4"},Ua=e("h2",{class:"text-lg font-semibold"},"Descuento general de la factura",-1),Ga=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Wa=[Ga],Qa={class:"space-y-4"},Ja=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),Ya=e("option",{value:"percentage"},"Porcentaje",-1),Za=e("option",{value:"amount"},"Monto",-1),el=[Ya,Za],tl={class:"block text-sm font-medium text-gray-700 mb-2"},sl=["step","max","placeholder"],ol={class:"p-4 bg-gray-50 rounded-lg space-y-2"},nl={class:"flex justify-between text-sm"},al=e("span",{class:"text-gray-700"},"Subtotal:",-1),ll={class:"font-semibold"},rl={class:"flex justify-between text-sm"},il=e("span",{class:"text-gray-700"},"Descuento:",-1),cl={class:"font-semibold"},dl={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},ul=e("span",null,"Total:",-1),hl={class:"flex gap-3 mt-6"},vl={class:"p-6"},pl={class:"flex items-center justify-between mb-4"},_l=e("h2",{class:"text-lg font-semibold text-red-600"},"‚ö†Ô∏è Stock Insuficiente",-1),fl=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ml=[fl],gl={class:"mb-4"},xl=["innerHTML"],bl={class:"flex justify-end"},El={__name:"Index",props:{sales:Object,stats:Object,filters:Object,products:Array,categories:Array,store:Object},setup(b){const R=b,_e=ke(),Xe=X(()=>(_e.props.auth?.roles||[]).includes("physical-sales")),je=()=>{Xe.value?ne.post(route("logout"),{},{onSuccess:()=>{window.location.href=route("login")},onError:()=>{window.location.href=route("login")}}):ne.visit(route("dashboard"))},fe=d("sales");nt({start_date:R.filters?.start_date||"",end_date:R.filters?.end_date||"",search:R.filters?.search||""});const Se=d("");d(!1);const K=d(null),re=d(!1),me=d(!1),$e=d(null),Ie=o=>{$e.value=o,me.value=!0},He=(o,s)=>{pe(o,s)},U=o=>{o.variant_options&&o.variant_options.length>0?Ie(o):pe(o)},u=o=>!o&&o!==0?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),Ke=o=>{o&&ne.visit(route("admin.physical-sales.show",o.id)+"?print=true")};X(()=>{if(!R.sales||!R.sales.data)return[];const o=new Date;o.setHours(0,0,0,0);const s=new Date(o);s.setHours(23,59,59,999);let t=R.sales.data.filter(n=>{const a=new Date(n.created_at);return a>=o&&a<=s});if(Se.value.trim()){const n=Se.value.toLowerCase();t=t.filter(a=>a.sale_number.toLowerCase().includes(n))}return t});const c=d([]),f=d(""),B=d([]),Ee=d(!1),Z=d(!1),Pe=d(""),G=d(!1),ie=d("efectivo"),ce=d(""),N=d(0),E=d("amount"),P=d(null);d(null),d(!1),d(!1);const W=d(!1),Q=d(!1),ee=d(!1),h=d(null),T=d("percentage"),j=d(0),L=d(!1),de=d(""),A=d(null),Ue=X(()=>{if(T.value==="percentage")return 100;if(h.value===null)return 0;const o=c.value[h.value];return o&&(o.original_price||o.unit_price)||0}),ue=d(!1),he=d(!1),Ge=()=>{he.value=!0},ge=()=>{try{const o=new(window.AudioContext||window.webkitAudioContext),s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),s.start(o.currentTime),s.stop(o.currentTime+.2)}catch{}},O=X(()=>c.value.reduce((o,s)=>o+s.quantity*s.unit_price,0)),z=X(()=>E.value==="percentage"?O.value*N.value/100:N.value),te=X(()=>O.value-z.value),ve=X(()=>{if(!R.products)return[];let o=R.products;if(P.value&&(o=o.filter(s=>s.category_id===P.value)),f.value.trim()){const s=f.value.toLowerCase();o=o.filter(t=>t.name.toLowerCase().includes(s)||t.id.toString().includes(s)||t.barcode&&t.barcode.toLowerCase().includes(s))}return o}),J=async()=>{if(!f.value.trim()){B.value=[];return}Ee.value=!0;try{const s=(await window.axios.get(route("admin.physical-sales.search-products"),{params:{q:f.value}})).data?.products||[];B.value=s,s.length===1&&window.innerWidth<1024&&(U(s[0]),f.value="",B.value=[])}catch{B.value=[]}finally{Ee.value=!1}},Ne=async o=>{const s=o.replace(/\s+/g,"").trim();if(s)try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){const n=t.data.product,a=t.data.matched_variant_option;let p=null;if(a&&n.variants&&n.variants.length>0){const w=n.variants.filter(S=>S.options&&Object.values(S.options).some(v=>v===a.name));w.length===1&&(p=w[0])}p?(pe(n,p),Pe.value=""):(U(n),Pe.value="")}else alert("Producto no encontrado con ese c√≥digo de barras")}catch{alert("Error al buscar producto")}},q=(o,s=null)=>{const t=s?.price??o.price;let n=parseFloat(t),a=0;return o.promo_active&&o.promo_discount_percent>0&&(a=parseFloat(o.promo_discount_percent),n=Math.round(n*(100-a)/100)),{originalPrice:parseFloat(t),finalPrice:n,discountPercent:a}},pe=(o,s=null)=>{const t=c.value.find(n=>n.product_id===o.id&&n.variant_id===(s?.id||null));if(t)t.quantity+=1;else{const n=q(o,s);c.value.push({product_id:o.id,product_name:o.name,variant_id:s?.id||null,variant_options:s?.options||null,quantity:1,unit_price:n.finalPrice,original_price:n.originalPrice,discount_percent:n.discountPercent,product:o,variant:s})}f.value="",B.value=[]},D=o=>{if(o.product){const s=o.product.track_inventory;if(!s||s==="0"||s===0||s===!1)return"Ilimitado"}return o.variant&&o.variant.stock!==null&&o.variant.stock!==void 0?o.variant.stock:o.product&&o.product.quantity!==null&&o.product.quantity!==void 0?o.product.quantity:"N/A"},xe=o=>{const s=D(o);return s==="Ilimitado"||s==="N/A"?!0:s>=o.quantity},We=o=>{if(!xe(o))return"bg-red-50";const s=D(o);return s===0||typeof s=="number"&&s<o.quantity?"bg-yellow-50":""},qe=o=>{const s=D(o);return s===0||typeof s=="number"&&s<o.quantity?"text-red-600 font-semibold text-xs":typeof s=="number"&&s<5?"text-yellow-600 font-medium text-xs":"text-gray-600 text-xs"},Be=o=>{c.value.splice(o,1)},De=(o,s)=>{const t=c.value[o],n=t.quantity+s;if(n>0){const a=D(t);if(typeof a=="number"&&n>a){de.value=`No hay suficiente stock para el producto "${t.product_name}".<br><br>Stock disponible: ${a}<br>Cantidad solicitada: ${n}`,L.value=!0;return}t.quantity=n}},Qe=(o,s)=>{const t=parseInt(s.target.value);if(t>0){const n=c.value[o],a=D(n);if(typeof a=="number"&&t>a){de.value=`No hay suficiente stock para el producto "${n.product_name}".<br><br>Stock disponible: ${a}<br>Cantidad solicitada: ${t}`,L.value=!0,s.target.value=n.quantity;return}c.value[o].quantity=t}},be=o=>o==null||o===""?"":new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}).format(o),Je=o=>{if(typeof o=="number")return o;if(!o)return 0;const s=o.toString().replace(/\./g,"").replace(/[^0-9]/g,"");return parseFloat(s)||0},Ye=(o,s)=>{let t=s.target.value;const n=Je(t),a=c.value[o];a.discount_percent>0?(a.unit_price=n,a.original_price=n/(1-a.discount_percent/100)):(a.unit_price=n,a.original_price=n),t!==""&&(s.target.value=be(n))},Ze=(o,s)=>{let t=parseFloat(s.target.value)||0;t=Math.round(t*100)/100;const n=Math.min(100,Math.max(0,t)),a=c.value[o];a.original_price||(a.original_price=a.unit_price),a.discount_type="percentage",a.discount_value=n,a.discount_percent=n,a.unit_price=a.original_price*(1-n/100),t!==n&&(s.target.value=n)},ye=o=>{h.value=o;const s=c.value[o];s.discount_type?(T.value=s.discount_type,j.value=s.discount_value||0):s.discount_percent>0?(T.value="percentage",j.value=s.discount_percent):(T.value="percentage",j.value=0),W.value=!0},et=()=>{if(h.value===null)return;const o=c.value[h.value];o.original_price||(o.original_price=o.unit_price);const s=o.original_price;if(T.value==="percentage"){const t=Math.min(100,Math.max(0,j.value)),n=Math.round(t*100)/100;o.discount_type="percentage",o.discount_value=n,o.discount_percent=n,o.unit_price=s*(1-n/100)}else{const t=Math.min(s,Math.max(0,j.value));o.discount_type="amount",o.discount_value=t,o.discount_percent=t/s*100,o.unit_price=s-t}W.value=!1,h.value=null,j.value=0},Fe=()=>{Q.value=!0},tt=()=>{Q.value=!1},Re=async()=>{try{Z.value=!0,await ht();const{Html5Qrcode:o}=await vt(async()=>{const{Html5Qrcode:n}=await import("./index-BJdrYCH1.js");return{Html5Qrcode:n}},__vite__mapDeps([0,1,2])),s=document.getElementById("barcode-scanner-sales");if(!s)return;A.value=new o(s.id);const t={fps:10,qrbox:{width:250,height:250}};try{await A.value.start({facingMode:"environment"},t,async n=>{ge(),await Ne(n),se()},n=>{})}catch{try{await A.value.start({facingMode:"user"},t,async a=>{ge(),await Ne(a),se()},a=>{})}catch{alert("No se pudo acceder a la c√°mara. Por favor, permite el acceso a la c√°mara en la configuraci√≥n del navegador."),Z.value=!1}}}catch{alert("Error al inicializar el esc√°ner. Por favor, intenta nuevamente."),Z.value=!1}},se=async()=>{if(A.value){try{await A.value.stop(),await A.value.clear()}catch{}A.value=null}Z.value=!1},oe=()=>{const o=document.head.querySelector('meta[name="csrf-token"]');if(o&&o.content)return window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=o.content,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=o.content),o.content;const t=(n=>{const p=`; ${document.cookie}`.split(`; ${n}=`);return p.length===2?p.pop().split(";").shift():null})("XSRF-TOKEN");if(t&&window.axios){const n=decodeURIComponent(t);return window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,n}return null};at(()=>{setTimeout(()=>{oe(),window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{oe()},300)},100)}),ne.on("finish",()=>{setTimeout(()=>{const s=ke().props.csrf_token;if(s){const t=document.head.querySelector('meta[name="csrf-token"]');t&&t.setAttribute("content",s),window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=s,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=s)}oe(),window.updateCsrfToken&&window.updateCsrfToken()},200)});const st=async()=>{if(c.value.length===0){alert("El carrito est√° vac√≠o");return}const o=[];for(let t=0;t<c.value.length;t++){const n=c.value[t];if(!xe(n)){const a=D(n);o.push({name:n.product_name,requested:n.quantity,available:a})}}if(o.length>0){let t=`No se puede procesar la venta. Los siguientes productos no tienen stock suficiente:

`;o.forEach(n=>{t+=`‚Ä¢ ${n.name}: Solicitado ${n.requested}, Disponible ${n.available}
`}),de.value=t.replace(/\n/g,"<br>"),L.value=!0;return}const s={items:c.value.map(t=>({product_id:t.product_id,variant_id:t.variant_id,quantity:t.quantity,unit_price:t.unit_price,original_price:t.original_price,discount_percent:t.discount_percent})),subtotal:O.value,tax:0,discount:z.value,total:te.value,payment_method:ie.value,notes:ce.value};try{if(!window.axios){alert("Error: No se pudo inicializar la conexi√≥n. Por favor, recarga la p√°gina.");return}let n=ke().props.csrf_token;if(n){const v=document.head.querySelector('meta[name="csrf-token"]');v&&v.setAttribute("content",n)}else n=oe();if(n||(await new Promise(v=>setTimeout(v,200)),n=oe()),!n){alert("Error: No se pudo obtener el token de seguridad. Por favor, recarga la p√°gina.");return}window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n;const a=()=>{const v=document.head.querySelector('meta[name="csrf-token"]');if(v&&v.content)return v.content;const y=(C=>{const ze=`; ${document.cookie}`.split(`; ${C}=`);return ze.length===2?ze.pop().split(";").shift():null})("XSRF-TOKEN");return y?decodeURIComponent(y):null},p=async(v=0)=>{try{let k=a();if(!k&&v===0)try{const C=await window.axios.get(route("dashboard"),{headers:{"X-Requested-With":"XMLHttpRequest"}});await new Promise(M=>setTimeout(M,100)),k=a()}catch{}if(!k)throw new Error("No se pudo obtener el token CSRF. Por favor, recarga la p√°gina.");window.axios.defaults.headers.common["X-CSRF-TOKEN"]=k,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=k;const y=await window.axios.post(route("admin.physical-sales.store"),s,{headers:{"X-CSRF-TOKEN":k,"X-XSRF-TOKEN":k,"X-Requested-With":"XMLHttpRequest"}});if(y&&y.headers){const C=y.headers["x-csrf-token"]||y.headers["X-CSRF-TOKEN"];if(C){const M=document.head.querySelector('meta[name="csrf-token"]');M&&M.setAttribute("content",C),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=C}}return y}catch(k){if(k.response){if(k.response.status===419&&v===0){const y=k.response.headers||{},C=y["x-csrf-token"]||y["X-CSRF-TOKEN"]||null;if(C){const M=document.head.querySelector('meta[name="csrf-token"]');M&&M.setAttribute("content",C),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=C}else{const M=a();M&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=M)}return await new Promise(M=>setTimeout(M,200)),await p(1)}}else if(v===0){const y=a();return y&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=y),await new Promise(C=>setTimeout(C,200)),await p(1)}throw k}},w=await p(),S=w.headers?.["x-csrf-token"]||w.headers?.["X-CSRF-TOKEN"];if(S){const v=document.head.querySelector('meta[name="csrf-token"]');v&&v.setAttribute("content",S),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=S}w.data&&w.data.success?(K.value=w.data.sale,G.value=!1,c.value=[],f.value="",N.value=0,E.value="amount",ce.value="",ie.value="efectivo",P.value=null,window.updateCsrfToken&&window.updateCsrfToken(),re.value=!0,ne.reload()):alert("Error: "+(w.data?.message||"No se pudo procesar la venta"))}catch(t){console.error("Error completo al procesar la venta:",{error:t,message:t.message,response:t.response,status:t.response?.status,data:t.response?.data,headers:t.response?.headers});let n="Error al procesar la venta";if(t.response){const a=t.response.status,p=t.response.data;a===419?(n="Tu sesi√≥n ha expirado. Por favor, recarga la p√°gina e intenta nuevamente.",window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{window.location.reload()},2e3)):a===422?p?.message?n=p.message:p?.errors?n=`Error de validaci√≥n:
${Object.entries(p.errors).map(([S,v])=>Array.isArray(v)?`${S}: ${v.join(", ")}`:`${S}: ${v}`).join(`
`)}`:n="Error de validaci√≥n. Verifica los datos e intenta nuevamente.":p?.message?n=p.message:n=`Error del servidor (${a}). Por favor, intenta nuevamente.`}else t.request?n="No se pudo conectar con el servidor. Verifica tu conexi√≥n a internet.":t.message&&(n=t.message);alert(n)}};lt(()=>{se()});let Oe;rt(f,async o=>{clearTimeout(Oe);const s=o.replace(/\s+/g,"").trim();if(s.length>=8&&/^\d+$/.test(s))try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){const n=t.data.product,a=t.data.matched_variant_option;let p=null;if(a&&n.variants&&n.variants.length>0){const w=n.variants.filter(S=>S.options&&Object.values(S.options).some(v=>v===a.name));w.length===1&&(p=w[0])}p?pe(n,p):U(n),f.value="",ge();return}}catch{}Oe=setTimeout(()=>{f.value.trim().length>=2?J():B.value=[]},300)});const Ve=d(50),we=d(!1),ot=()=>{we.value=!0,document.addEventListener("mousemove",Le),document.addEventListener("mouseup",Ae),document.body.style.userSelect="none",document.body.style.cursor="col-resize"},Le=o=>{if(!we.value)return;const s=window.innerWidth,t=o.clientX/s*100;t>20&&t<80&&(Ve.value=t)},Ae=()=>{we.value=!1,document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",Ae),document.body.style.userSelect="",document.body.style.cursor=""};return(o,s)=>(l(),r($,null,[_(Ce(it),{title:"Ventas F√≠sicas"}),_(pt,null,{header:m(()=>[fe.value!=="sales"?(l(),r("h2",gt,"Ventas F√≠sicas")):g("",!0)]),default:m(()=>[fe.value==="sales"?(l(),r("div",xt,[e("div",{style:ct({width:Ve.value+"%"}),class:"h-full flex flex-col border-r border-gray-300"},[e("div",bt,[e("div",yt,[e("button",{onClick:je,class:"px-3 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100 text-sm font-medium flex items-center gap-2 border border-gray-200"},[wt,x(" Salir ")]),e("button",{onClick:s[0]||(s[0]=t=>ue.value=!0),class:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm font-medium flex items-center gap-2 border border-red-200",title:"Registrar Gasto / Salida"},[kt,x(" Gasto ")]),e("div",Ct,[F(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>f.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Me(J,["enter"])},null,544),[[Y,f.value]]),Mt,e("button",{onClick:Re,class:"absolute right-2 top-1.5 p-1 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},jt)])]),e("div",St,[e("button",{onClick:s[2]||(s[2]=t=>{P.value=null,f.value=""}),class:I(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",P.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(l(!0),r($,null,V(b.categories,t=>(l(),r("button",{key:t.id,onClick:n=>{P.value=t.id,f.value=""},class:I(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",P.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},i(t.name),11,$t))),128))])]),e("div",Et,[ve.value.length===0?(l(),r("div",Pt,qt)):(l(),r("div",Bt,[(l(!0),r($,null,V(ve.value,t=>(l(),r("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>U(t)},[e("div",Ft,[t.main_image_url?(l(),r("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,Rt)):(l(),r("svg",Ot,Lt))]),e("div",At,[e("div",zt,[t.promo_active&&t.promo_discount_percent>0?(l(),r($,{key:0},[e("p",Xt,i(u(q(t).originalPrice)),1),e("p",It,i(u(q(t).finalPrice)),1)],64)):(l(),r("p",Ht,i(u(q(t).finalPrice)),1))]),e("h3",{class:"font-medium text-xs text-gray-900 line-clamp-2",title:t.name},i(t.name),9,Kt)])],8,Dt))),128))]))])],4),e("div",{class:"w-1 hover:w-2 bg-gray-200 hover:bg-blue-400 cursor-col-resize flex items-center justify-center transition-all z-20 group",onMousedown:ot,title:"Arrastra para ajustar el tama√±o"},Gt,32),e("div",Wt,[e("div",Qt,[e("div",Jt,[Yt,e("span",Zt,i(Ce(_e).props.auth?.user?.name||"Usuario"),1),es,b.store&&b.store.logo_url?(l(),r("img",{key:0,src:b.store.logo_url,alt:`Logo de ${b.store.name}`,class:"h-6 w-6 rounded-full object-cover"},null,8,ts)):g("",!0),b.store?(l(),r("span",ss,i(b.store.name),1)):g("",!0)])]),e("div",os,[c.value.length===0?(l(),r("div",ns,rs)):(l(),r("div",is,[e("table",cs,[ds,e("tbody",us,[(l(!0),r($,null,V(c.value,(t,n)=>(l(),r("tr",{key:n,class:I(["hover:bg-gray-50",We(t)])},[e("td",{class:"px-3 py-3 text-left align-middle",title:t.product_name},[e("div",vs,[e("div",ps,[x(i(t.product_name)+" ",1),t.variant_options?(l(),r("span",_s," ("+i(Object.values(t.variant_options).join(" / "))+") ",1)):g("",!0)])])],8,hs),e("td",{class:"px-3 py-3 text-center align-middle w-16",title:`Stock disponible: ${D(t)}`},[e("span",{class:I(qe(t))},i(D(t)),3)],8,fs),e("td",{class:"px-3 py-3 text-center align-middle w-20",title:`Cantidad: ${t.quantity}`},[e("input",{type:"number",value:t.quantity,onChange:a=>Qe(n,a),class:"w-full text-center border border-gray-300 rounded text-sm py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"},null,40,gs)],8,ms),e("td",{class:"px-3 py-3 text-right align-middle w-40",title:`Precio unitario: ${u(t.unit_price)}`},[e("input",{type:"text",value:be(t.original_price||t.unit_price),onInput:a=>Ye(n,a),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"},null,40,bs)],8,xs),e("td",{class:"px-3 py-3 text-right align-middle w-32",title:t.discount_type==="amount"?`Descuento: $${t.discount_value}`:`Descuento: ${t.discount_percent}%`},[t.discount_type==="amount"?(l(),r("button",{key:0,onClick:a=>ye(n),class:"w-full text-right border border-blue-200 bg-blue-50 text-blue-700 font-semibold rounded text-sm py-2 px-2 hover:bg-blue-100 transition-colors"}," $ "+i(be(t.discount_value)),9,ws)):(l(),r("div",ks,[e("input",{type:"number",value:t.discount_percent,onChange:a=>Ze(n,a),onClick:dt(a=>ye(n),["self"]),class:"w-full text-right border border-gray-300 rounded text-sm py-2 pl-2 pr-6 cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"},null,40,Cs),Ms]))],8,ys),e("td",{class:"px-3 py-3 text-right align-middle w-36",title:`Subtotal: ${u(t.quantity*t.unit_price)}`},[e("span",js,i(u(t.quantity*t.unit_price)),1)],8,Ts),e("td",Ss,[e("button",{onClick:a=>Be(n),class:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded hover:bg-red-600 transition-colors mx-auto",title:"Eliminar producto"},Ps,8,$s)])],2))),128))])])]))]),c.value.length>0?(l(),r("div",Ns,[e("div",qs,[Bs,e("span",Ds,i(u(O.value)),1)]),e("div",Fs,[Rs,e("span",{onClick:Fe,class:"font-medium cursor-pointer hover:text-blue-600 flex items-center gap-1"},[x(i(N.value>0?"-"+u(z.value):u(0))+" ",1),Os])]),e("div",Vs,[e("div",Ls,[As,e("span",zs,i(u(te.value)),1)]),e("div",Xs,[e("button",{onClick:s[3]||(s[3]=t=>G.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base"}," Procesar Venta "),e("button",{onClick:s[4]||(s[4]=t=>{c.value=[],N.value=0,E.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base border border-red-300"}," Cancelar ")])])])):g("",!0)])])):g("",!0),fe.value==="sales"?(l(),r("div",Is,[e("div",Hs,[e("div",Ks,[e("div",Us,[Gs,e("span",Ws,i(Ce(_e).props.auth?.user?.name||"Usuario"),1),Qs,b.store&&b.store.logo_url?(l(),r("img",{key:0,src:b.store.logo_url,alt:`Logo de ${b.store.name}`,class:"h-5 w-5 rounded-full object-cover"},null,8,Js)):g("",!0),b.store?(l(),r("span",Ys,i(b.store.name),1)):g("",!0)]),e("button",{onClick:je,class:"px-3 py-1.5 bg-teal-500 text-white rounded text-sm font-medium"}," ¬´ Regresar ")])]),e("div",Zs,[e("div",eo,[e("button",{onClick:s[5]||(s[5]=t=>ee.value=!0),class:"px-3 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center flex-shrink-0",title:"Ver cat√°logo de productos"},so),e("button",{onClick:s[6]||(s[6]=t=>ue.value=!0),class:"px-3 py-2.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 flex items-center justify-center flex-shrink-0 border border-red-200",title:"Registrar Gasto"},no),e("div",ao,[F(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>f.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Me(J,["enter"]),onInput:J},null,544),[[Y,f.value]]),lo,e("button",{onClick:Re,class:"absolute right-2 top-2 p-1.5 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},io)])]),B.value.length>0&&f.value.trim()?(l(),r("div",co,[(l(!0),r($,null,V(B.value,t=>(l(),r("div",{key:t.id,onClick:n=>{U(t),f.value="",B.value=[]},class:"px-4 py-3 border-b border-gray-100 hover:bg-blue-50 cursor-pointer flex items-center gap-3"},[e("div",ho,[t.main_image_url?(l(),r("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover rounded"},null,8,vo)):(l(),r("svg",po,fo))]),e("div",mo,[e("p",go,i(t.name),1),e("div",null,[t.promo_active&&t.promo_discount_percent>0?(l(),r($,{key:0},[e("p",xo,i(u(q(t).originalPrice)),1),e("p",bo,i(u(q(t).finalPrice)),1)],64)):(l(),r("p",yo,i(u(q(t).finalPrice)),1))])]),wo],8,uo))),128))])):g("",!0)]),ko,e("div",Co,[c.value.length===0?(l(),r("div",Mo,$o)):(l(),r("div",Eo,[(l(!0),r($,null,V(c.value,(t,n)=>(l(),r("div",{key:n,class:"px-4 py-3 bg-white"},[e("div",Po,[e("div",No,[e("div",qo,[e("span",{class:I(qe(t))}," Stock: "+i(D(t)),3),xe(t)?g("",!0):(l(),r("span",Bo," ‚ö† Sin stock "))]),e("p",Do,i(t.product_name),1),e("p",Fo,i(u(t.unit_price)),1)]),e("div",Ro,[e("div",Oo,[Vo,e("div",Lo,[e("button",{onClick:a=>De(n,-1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," - ",8,Ao),e("span",zo,i(t.quantity),1),e("button",{onClick:a=>De(n,1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," + ",8,Xo)])]),e("div",Io,[Ho,e("span",Ko,i(u(t.quantity*t.unit_price)),1)]),e("button",{onClick:a=>ye(n),class:"w-8 h-8 flex items-center justify-center bg-gray-200 text-gray-600 rounded hover:bg-gray-300",title:"Aplicar descuento"},Wo,8,Uo),e("button",{onClick:a=>Be(n),class:"w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded hover:bg-red-600"},Yo,8,Qo)])])]))),128))]))]),c.value.length>0?(l(),r("div",Zo,[e("div",en,[e("div",tn,[sn,e("span",on,i(u(O.value)),1)]),e("div",nn,[an,e("span",{onClick:Fe,class:"font-medium text-green-600 cursor-pointer hover:text-blue-600 flex items-center gap-1"},[x(i(N.value>0?"-"+u(z.value):u(0))+" ",1),ln])]),e("div",rn,[cn,e("span",dn,i(u(te.value)),1)])]),e("div",un,[e("button",{onClick:s[8]||(s[8]=t=>G.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base transition-colors"}," PROCESAR VENTA "),e("button",{onClick:s[9]||(s[9]=t=>{c.value=[],N.value=0,E.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base transition-colors border border-red-300"}," CANCELAR ")])])):g("",!0)])):g("",!0),_(H,{show:G.value,onClose:s[13]||(s[13]=t=>G.value=!1)},{default:m(()=>[e("div",hn,[vn,e("div",pn,[_n,F(e("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>ie.value=t),class:"w-full rounded-md border-gray-300"},bn,512),[[Te,ie.value]])]),e("div",yn,[wn,F(e("textarea",{"onUpdate:modelValue":s[11]||(s[11]=t=>ce.value=t),class:"w-full rounded-md border-gray-300",rows:"3",placeholder:"Notas adicionales sobre la venta..."},null,512),[[Y,ce.value]])]),c.value.some(t=>t.discount_percent>0)?(l(),r("div",kn,[Cn,e("div",Mn,[(l(!0),r($,null,V(c.value.filter(t=>t.discount_percent>0),(t,n)=>(l(),r("div",{key:n,class:"flex justify-between text-sm"},[e("span",Tn,i(t.product_name)+":",1),e("span",jn,"-"+i(t.discount_percent)+"% ("+i(u((t.original_price-t.unit_price)*t.quantity))+")",1)]))),128))])])):g("",!0),e("div",Sn,[e("div",$n,[En,e("span",null,i(u(O.value)),1)]),z.value>0?(l(),r("div",Pn,[e("span",null,"Descuento ("+i(E.value==="percentage"?N.value+"%":"Monto")+"):",1),e("span",null,"-"+i(u(z.value)),1)])):g("",!0),e("div",Nn,[qn,e("span",null,i(u(te.value)),1)])]),e("div",Bn,[_(ae,{onClick:s[12]||(s[12]=t=>G.value=!1)},{default:m(()=>[x("Cancelar")]),_:1}),_(le,{onClick:st},{default:m(()=>[x("Confirmar Venta")]),_:1})])])]),_:1},8,["show"]),_(H,{show:re.value,onClose:s[16]||(s[16]=t=>re.value=!1)},{default:m(()=>[e("div",Dn,[Fn,K.value?(l(),r("div",Rn,[e("p",On,[x(" N√∫mero de venta: "),e("span",Vn,"#"+i(K.value.sale_number),1)]),e("p",Ln,[x(" Total: "),e("span",An,i(u(K.value.total)),1)])])):g("",!0),e("div",zn,[_(ae,{onClick:s[14]||(s[14]=t=>re.value=!1)},{default:m(()=>[x("Cerrar")]),_:1}),K.value?(l(),ut(le,{key:0,onClick:s[15]||(s[15]=t=>Ke(K.value))},{default:m(()=>[x(" üñ®Ô∏è Imprimir Factura ")]),_:1})):g("",!0)])])]),_:1},8,["show"]),_(H,{show:Z.value,onClose:se},{default:m(()=>[e("div",Xn,[In,Hn,Kn,_(ae,{onClick:se,class:"mt-4"},{default:m(()=>[x("Cerrar")]),_:1})])]),_:1},8,["show"]),_(H,{show:W.value,onClose:s[21]||(s[21]=t=>W.value=!1)},{default:m(()=>[e("div",Un,[e("div",Gn,[e("h2",Wn,i(h.value!==null?c.value[h.value]?.product_name:"Descuento de Producto"),1),e("button",{onClick:s[17]||(s[17]=t=>W.value=!1),class:"text-gray-400 hover:text-gray-600"},Jn)]),e("div",Yn,[e("div",null,[Zn,e("input",{type:"number",value:h.value!==null?c.value[h.value]?.quantity:1,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,ea)]),e("div",null,[ta,e("input",{type:"number",value:h.value!==null?c.value[h.value]?.original_price||c.value[h.value]?.unit_price:0,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,sa)]),e("div",null,[oa,F(e("select",{"onUpdate:modelValue":s[18]||(s[18]=t=>T.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},la,512),[[Te,T.value]])]),e("div",null,[e("label",ra," Descuento "+i(T.value==="percentage"?"%":""),1),F(e("input",{"onUpdate:modelValue":s[19]||(s[19]=t=>j.value=t),type:"number",step:(T.value==="percentage","0.01"),min:0,max:Ue.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:T.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,ia),[[Y,j.value,void 0,{number:!0}]])]),h.value!==null?(l(),r("div",ca,[e("div",da,[ua,e("span",ha,i(u((c.value[h.value]?.original_price||c.value[h.value]?.unit_price)*c.value[h.value]?.quantity)),1)]),e("div",va,[pa,e("span",_a,i(u(T.value==="percentage"?(c.value[h.value]?.original_price||c.value[h.value]?.unit_price)*c.value[h.value]?.quantity*j.value/100:j.value*c.value[h.value]?.quantity)),1)]),e("div",fa,[ma,e("span",null,i(u((c.value[h.value]?.original_price||c.value[h.value]?.unit_price)*c.value[h.value]?.quantity-(T.value==="percentage"?(c.value[h.value]?.original_price||c.value[h.value]?.unit_price)*c.value[h.value]?.quantity*j.value/100:j.value*c.value[h.value]?.quantity))),1)])])):g("",!0)]),e("div",ga,[_(ae,{onClick:s[20]||(s[20]=t=>W.value=!1)},{default:m(()=>[x("Cerrar")]),_:1}),_(le,{onClick:et},{default:m(()=>[x("Aplicar")]),_:1})])])]),_:1},8,["show"]),_(ft,{show:ue.value,onClose:s[22]||(s[22]=t=>ue.value=!1),onSuccess:Ge},null,8,["show"]),_(mt,{show:me.value,product:$e.value,onClose:s[23]||(s[23]=t=>me.value=!1),onAddToCart:He},null,8,["show","product"]),_(H,{show:ee.value,onClose:s[27]||(s[27]=t=>ee.value=!1),"max-width":"4xl"},{default:m(()=>[e("div",xa,[e("div",ba,[ya,e("button",{onClick:s[24]||(s[24]=t=>ee.value=!1),class:"text-gray-400 hover:text-gray-600"},ka)]),e("div",Ca,[F(e("input",{"onUpdate:modelValue":s[25]||(s[25]=t=>f.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyup:Me(J,["enter"]),onInput:J},null,544),[[Y,f.value]]),Ma]),e("div",Ta,[e("button",{onClick:s[26]||(s[26]=t=>P.value=null),class:I(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",P.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(l(!0),r($,null,V(b.categories,t=>(l(),r("button",{key:t.id,onClick:n=>P.value=t.id,class:I(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",P.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},i(t.name),11,ja))),128))]),e("div",Sa,[ve.value.length===0?(l(),r("div",$a,Pa)):(l(),r("div",Na,[(l(!0),r($,null,V(ve.value,t=>(l(),r("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>{U(t),ee.value=!1}},[e("div",Ba,[t.main_image_url?(l(),r("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,Da)):(l(),r("svg",Fa,Oa))]),e("div",Va,[e("div",La,[t.promo_active&&t.promo_discount_percent>0?(l(),r($,{key:0},[e("p",Aa,i(u(q(t).originalPrice)),1),e("p",za,i(u(q(t).finalPrice)),1)],64)):(l(),r("p",Xa,i(u(q(t).finalPrice)),1))]),e("h3",Ia,i(t.name),1)])],8,qa))),128))]))])])]),_:1},8,["show"]),_(H,{show:Q.value,onClose:s[32]||(s[32]=t=>Q.value=!1)},{default:m(()=>[e("div",Ha,[e("div",Ka,[Ua,e("button",{onClick:s[28]||(s[28]=t=>Q.value=!1),class:"text-gray-400 hover:text-gray-600"},Wa)]),e("div",Qa,[e("div",null,[Ja,F(e("select",{"onUpdate:modelValue":s[29]||(s[29]=t=>E.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},el,512),[[Te,E.value]])]),e("div",null,[e("label",tl," Descuento "+i(E.value==="percentage"?"%":""),1),F(e("input",{"onUpdate:modelValue":s[30]||(s[30]=t=>N.value=t),type:"number",step:(E.value==="percentage","0.01"),min:0,max:E.value==="percentage"?100:O.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:E.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,sl),[[Y,N.value,void 0,{number:!0}]])]),e("div",ol,[e("div",nl,[al,e("span",ll,i(u(O.value)),1)]),e("div",rl,[il,e("span",cl,i(u(z.value)),1)]),e("div",dl,[ul,e("span",null,i(u(te.value)),1)])])]),e("div",hl,[_(ae,{onClick:s[31]||(s[31]=t=>Q.value=!1)},{default:m(()=>[x("Cerrar")]),_:1}),_(le,{onClick:tt},{default:m(()=>[x("Aplicar")]),_:1})])])]),_:1},8,["show"]),_(H,{show:L.value,onClose:s[35]||(s[35]=t=>L.value=!1)},{default:m(()=>[e("div",vl,[e("div",pl,[_l,e("button",{onClick:s[33]||(s[33]=t=>L.value=!1),class:"text-gray-400 hover:text-gray-600"},ml)]),e("div",gl,[e("div",{class:"text-sm text-gray-700 whitespace-pre-line",innerHTML:de.value},null,8,xl)]),e("div",bl,[_(le,{onClick:s[34]||(s[34]=t=>L.value=!1)},{default:m(()=>[x("Entendido")]),_:1})])])]),_:1},8,["show"]),_(_t,{show:he.value,type:"success",title:"¬°Gasto Guardado!",message:"El gasto se ha registrado correctamente en el sistema.","primary-text":"Entendido",onClose:s[36]||(s[36]=t=>he.value=!1),onPrimary:s[37]||(s[37]=t=>he.value=!1)},null,8,["show"])]),_:1})],64))}};export{El as default};
