import{r as d,c as j,w as F,a as n,o as r,b as c,u as B,h as I,d as p,e,T as M,f,g as O,v as P,i as q,t as o,F as y,j as V,n as _,l as G,k as D,m as R}from"./app-CdEBBWGl.js";import{_ as U}from"./AuthenticatedLayout-PmA-gZnP.js";import{_ as H}from"./Pagination-DOnkRMqJ.js";const K=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestión de Inventario",-1),J={class:"py-12"},Q={class:"max-w-screen-2xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 text-gray-900"},Y={class:"mb-4 flex items-center justify-between"},Z={class:"flex items-center gap-3"},ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})],-1),te=[ee],se={key:0,class:"relative"},ae={class:"flex items-center gap-2"},ne=["href"],re=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),e("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),oe={class:"relative"},le=e("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1),ie={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-lg z-10"},ce=["onClick"],ue={class:"overflow-x-visible"},de={class:"min-w-full divide-y divide-gray-200"},pe=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto / Variante"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"STOCK ACTUAL"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"$ COMPRA"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"$ VENTA"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"% Gan."),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"$ Gan."),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase w-12"},[e("span",{class:"sr-only"},"Acciones")])])],-1),me={class:"bg-white divide-y divide-gray-200"},xe={key:0},he={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium text-gray-900"},fe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},ye={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},_e={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},ge={key:0},ve={key:1},we={key:0},be={key:1},ke={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Ne={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap w-12"},Ce=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),Se={key:0},Te=e("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," No hay productos para mostrar. ",-1),Ae=[Te],ze={__name:"Index",props:{products:Object,filters:Object},setup(m){const g=m,x=d(!!g.filters?.search),u=d(g.filters?.search||""),l=d(g.filters?.status||""),C=d(null),h=d(!1),v=[{value:"",label:"Todos"},{value:"out_of_stock",label:"Agotados"},{value:"low_stock",label:"¡Pocas unidades!"}],z=j(()=>(v.find(s=>s.value===l.value)||v[0]).label),E=async()=>{x.value=!x.value,x.value?(await R(),C.value?.focus()):(u.value="",w())},w=()=>{D.get(route("admin.inventory.index"),{search:u.value||void 0,status:l.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})};let S;F(u,()=>{clearTimeout(S),S=setTimeout(()=>w(),350)});const L=s=>{l.value=s,h.value=!1,w()},$=s=>{if(!l.value)return!0;const a=Number(s.quantity)||0,t=Number(s.alert)||0;return l.value==="out_of_stock"?a<=0:l.value==="low_stock"?t>0&&a>0&&a<=t:!0},T=s=>{const a=Number(s.stock)||0,t=Number(s.alert)||0;return a<=0?{text:"Agotado",class:"bg-red-100 text-red-800"}:t>0&&a<=t?{text:"¡Pocas unidades!",class:"bg-yellow-100 text-yellow-800"}:{text:"En Stock",class:"bg-green-100 text-green-800"}},b=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(Number(s||0)),k=(s,a)=>{const t=Number(s||0),i=Number(a||0);return!t||!i||t<=0?null:Number(((i-t)/t*100).toFixed(2))},N=(s,a)=>{const t=Number(s||0),i=Number(a||0);if(!t||!i||t<=0)return null;const A=i-t;return A>=0?A:null};return(s,a)=>(r(),n(y,null,[c(B(I),{title:"Gestión de Inventario"}),c(U,null,{header:p(()=>[K]),default:p(()=>[e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("button",{type:"button",onClick:E,class:"p-2 rounded hover:bg-gray-100 transition"},te),c(M,{name:"fade-slide"},{default:p(()=>[x.value?(r(),n("div",se,[O(e("input",{ref_key:"searchInputRef",ref:C,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),type:"text",placeholder:"Buscar producto...",class:"w-64 md:w-80 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[P,u.value]])])):f("",!0)]),_:1})]),e("div",ae,[e("a",{href:s.route("admin.inventory.export"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[re,q(" Exportar a Excel ")],8,ne),e("div",oe,[e("button",{type:"button",onClick:a[1]||(a[1]=t=>h.value=!h.value),class:"inline-flex items-center gap-2 px-3 py-2 border rounded-md shadow-sm hover:bg-gray-50"},[e("span",null,o(z.value),1),le]),c(M,{name:"fade-slide"},{default:p(()=>[h.value?(r(),n("ul",ie,[(r(),n(y,null,V(v,t=>e("li",{key:t.value},[e("button",{type:"button",onClick:i=>L(t.value),class:_(["w-full text-left px-3 py-2 hover:bg-gray-100",{"font-semibold text-indigo-600":t.value===l.value}])},o(t.label),11,ce)])),64))])):f("",!0)]),_:1})])])]),e("div",ue,[e("table",de,[pe,e("tbody",me,[(r(!0),n(y,null,V(m.products.data,t=>(r(),n(y,{key:t.id},[$(t)?(r(),n("tr",xe,[e("td",he,o(t.name),1),e("td",fe,o(t.quantity),1),e("td",ye,o(b(t.purchase_price)),1),e("td",_e,o(b(t.price)),1),e("td",{class:_(["px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm",{"text-gray-500":k(t.purchase_price,t.price)===null}])},[k(t.purchase_price,t.price)!==null?(r(),n("span",ge,o(k(t.purchase_price,t.price))+"%",1)):(r(),n("span",ve,"—"))],2),e("td",{class:_(["px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm",{"text-gray-500":N(t.purchase_price,t.price)===null}])},[N(t.purchase_price,t.price)!==null?(r(),n("span",we,o(b(N(t.purchase_price,t.price))),1)):(r(),n("span",be,"—"))],2),e("td",ke,[e("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",T({stock:t.quantity,alert:t.alert}).class])},o(T({stock:t.quantity,alert:t.alert}).text),3)]),e("td",Ne,[c(B(G),{href:s.route("admin.products.edit",t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:p(()=>[Ce]),_:2},1032,["href"])])])):f("",!0)],64))),128)),m.products.data.length===0?(r(),n("tr",Se,Ae)):f("",!0)])])]),c(H,{class:"mt-6",links:m.products.links},null,8,["links"])])])])])]),_:1})],64))}};export{ze as default};
