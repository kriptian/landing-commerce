import{_ as Ve,r as h,c as _,w as D,n as k,y as P,o as qe,a as Xe,b as r,d as o,e as z,i as c,g as t,f as b,u as oe,h as Ee,k as F,t as m,q as S,m as U,j as He,v as We,T as G,L as J,F as $,l as B,Q as de,M as Ke,x as he,R as Re,S as Ue}from"./app-B-JFj2iS.js";import{_ as Ge}from"./Pagination-q267HTfQ.js";const n=g=>(Re("data-v-dd29fa92"),g=g(),Ue(),g),Je=n(()=>t("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1)),Qe=n(()=>t("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1)),Ze=n(()=>t("link",{href:"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600&display=swap",rel:"stylesheet"},null,-1)),Ye={class:"marquee"},et={class:"marquee__inner text-white font-extrabold uppercase tracking-wider text-xs sm:text-sm"},tt={class:"flex items-center gap-2 whitespace-nowrap"},st=n(()=>t("span",{class:"blink"},"ðŸ”¥",-1)),ot={key:0},at=n(()=>t("span",{"aria-hidden":"true"},"â€¢",-1)),rt=n(()=>t("span",{"aria-hidden":"true"},"â†—",-1)),lt={class:"flex items-center gap-2 whitespace-nowrap"},nt=n(()=>t("span",{class:"blink"},"ðŸ”¥",-1)),it={key:0},ct=n(()=>t("span",{"aria-hidden":"true"},"â€¢",-1)),ut=n(()=>t("span",{"aria-hidden":"true"},"â†—",-1)),dt={class:"flex items-center gap-2 whitespace-nowrap"},ht=n(()=>t("span",{class:"blink"},"ðŸ”¥",-1)),vt={key:0},mt=n(()=>t("span",{"aria-hidden":"true"},"â€¢",-1)),ft=n(()=>t("span",{"aria-hidden":"true"},"â†—",-1)),pt={class:"container mx-auto px-4 sm:px-6 py-4 flex items-center justify-between gap-2 relative"},gt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6 text-gray-700"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5"})],-1)),_t=[gt],xt=["src","alt"],yt={class:"flex items-center justify-end flex-shrink-0 z-10"},bt={key:0,class:"flex items-center"},wt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6 text-gray-700"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1)),kt=[wt],Ct={key:1,class:"flex items-center gap-2 min-w-[200px] sm:min-w-[280px]"},Mt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)),Pt=[Mt],St=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-5 h-5 sm:w-6 sm:h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1)),$t=[St],jt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-5 h-5 sm:w-6 sm:h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1)),zt=[jt],Bt={class:"relative h-[300px] sm:h-[400px] md:h-[500px]"},Nt={class:"relative h-full overflow-hidden"},At={key:0,class:"relative h-full bg-white/90 backdrop-blur-sm overflow-hidden"},Lt={class:"absolute inset-0 flex items-center justify-center p-4 sm:p-6 md:p-8"},Tt=["src","alt"],Ot={class:"absolute inset-0 flex flex-col justify-between p-4 sm:p-6 md:p-8 pointer-events-none"},It={class:"text-gray-900 bg-white/70 backdrop-blur-sm rounded-lg px-4 py-3 max-w-full pointer-events-auto"},Dt={class:"text-xl sm:text-2xl md:text-3xl font-bold mb-2 truncate"},Ft={class:"flex items-center gap-2 sm:gap-3 flex-wrap"},Vt={class:"text-lg sm:text-xl md:text-2xl font-extrabold whitespace-nowrap"},qt={key:0,class:"inline-flex items-center rounded bg-red-600 text-white font-bold px-2 sm:px-3 py-1 text-xs sm:text-sm whitespace-nowrap"},Xt={class:"flex justify-center pointer-events-auto mb-8 sm:mb-12 md:mb-16"},Et={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10"},Ht=["onClick","aria-label"],Wt={key:0,class:"fixed inset-0 z-[70] flex"},Kt={class:"relative w-[85%] max-w-sm bg-white h-full shadow-2xl rounded-r-2xl overflow-hidden"},Rt={class:"sticky top-0 z-20 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between"},Ut={class:"flex items-center gap-3"},Gt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 h-5 text-gray-700"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1)),Jt=[Gt],Qt={class:"font-semibold text-gray-900 text-base"},Zt=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-6 h-6 text-gray-700"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)),Yt=[Zt],es=n(()=>t("span",{class:"font-semibold text-red-700 uppercase text-sm"},"Promociones",-1)),ts={key:0,class:"text-xs bg-red-600 text-white rounded-full px-2.5 py-1 font-medium"},ss=n(()=>t("div",{class:"border-b border-gray-200"},null,-1)),os={class:"h-full overflow-y-auto flex flex-col"},as=n(()=>t("span",{class:"font-semibold text-blue-700 text-sm uppercase"},"HOME",-1)),rs=n(()=>t("span",{class:"text-xs text-blue-600"},"â€º",-1)),ls=[as,rs],ns=n(()=>t("div",{class:"border-b border-gray-200"},null,-1)),is={class:"flex-1 overflow-y-auto"},cs=["onClick"],us={class:"font-medium text-gray-800 text-sm uppercase"},ds={class:"flex items-center gap-2"},hs={class:"text-xs text-gray-500"},vs={key:0,class:"text-gray-400 text-lg leading-none"},ms={class:"h-full overflow-y-auto flex flex-col"},fs=n(()=>t("span",{class:"font-semibold text-blue-700 text-sm uppercase"},"HOME",-1)),ps=n(()=>t("span",{class:"text-xs text-blue-600"},"â€º",-1)),gs=[fs,ps],_s=n(()=>t("div",{class:"border-b border-gray-200"},null,-1)),xs={key:0,class:"flex-1 overflow-y-auto"},ys=["onClick"],bs={class:"font-medium text-gray-800 text-sm"},ws={class:"flex items-center gap-3"},ks={key:0,class:"text-gray-800 text-lg font-light leading-none min-w-[20px] text-center"},Cs={key:0,class:"bg-gray-50/50"},Ms={key:0,class:"px-4 py-3 pl-8 text-xs text-gray-500"},Ps=["onClick"],Ss={class:"font-normal text-gray-700 text-sm"},$s={key:1,class:"flex-1 flex items-center justify-center px-4 py-6 text-sm text-gray-500"},js={key:2,class:"flex-1 flex items-center justify-center px-4 py-6 text-sm text-gray-500"},zs={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6"},Bs=Ke('<div class="w-full h-40 sm:h-48 md:h-56 bg-gray-200" data-v-dd29fa92></div><div class="p-4 space-y-3" data-v-dd29fa92><div class="h-4 bg-gray-200 rounded w-3/4" data-v-dd29fa92></div><div class="h-6 bg-gray-200 rounded w-1/3" data-v-dd29fa92></div><div class="h-10 bg-gray-200 rounded w-full" data-v-dd29fa92></div></div>',2),Ns=[Bs],As={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6"},Ls={class:"relative"},Ts=["src"],Os={key:1,class:"absolute top-3 left-3 bg-red-600 text-white text-xs font-semibold px-2 py-1 rounded"},Is={key:2,class:"absolute top-3 left-3 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded"},Ds={class:"p-4 flex flex-col gap-3"},Fs={class:"text-base sm:text-lg font-semibold text-gray-900 line-clamp-2"},Vs={class:"flex items-center gap-2"},qs={class:"text-lg sm:text-xl text-gray-900 font-extrabold"},Xs={key:0,class:"inline-flex items-center rounded bg-red-600 text-white font-bold px-1.5 py-0.5 text-[11px] sm:text-xs"},Es={key:0,class:"text-xs sm:text-sm text-gray-400 line-through"},Hs={key:3},Ws={class:"text-center py-16"},Ks=n(()=>t("p",{class:"text-xl font-semibold text-gray-700"},"No se encontraron productos",-1)),Rs=n(()=>t("p",{class:"text-gray-500 mt-2"},"Intenta con otra bÃºsqueda o categorÃ­a.",-1)),Us={class:"bg-white mt-16 border-t"},Gs={class:"container mx-auto px-6 py-4 text-center text-gray-500"},Js={key:1,class:"fixed bottom-6 left-6 z-50"},Qs={class:"relative"},Zs={key:0,class:"absolute right-0 bottom-0 flex flex-col items-end gap-3 -translate-y-14 z-10"},Ys=["href"],eo={key:0,class:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor"},to=n(()=>t("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"},null,-1)),so=[to],oo={key:1,class:"w-5 h-5 text-pink-500",viewBox:"0 0 24 24",fill:"currentColor"},ao=n(()=>t("path",{"fill-rule":"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zm-1.161 1.545a1.12 1.12 0 10-1.584 1.584 1.12 1.12 0 001.584-1.584zm-3.097 3.569a3.468 3.468 0 106.937 0 3.468 3.468 0 00-6.937 0z","clip-rule":"evenodd"},null,-1)),ro=n(()=>t("path",{d:"M12 6.166a5.834 5.834 0 100 11.668 5.834 5.834 0 000-11.668zm0 1.545a4.289 4.289 0 110 8.578 4.289 4.289 0 010-8.578z"},null,-1)),lo=[ao,ro],no={key:2,class:"w-5 h-5 text-black",viewBox:"0 0 24 24",fill:"currentColor"},io=n(()=>t("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.01-1.58-.31-3.15-.82-4.7-.52-1.56-1.23-3.04-2.1-4.42a.1.1 0 00-.2-.04c-.02.13-.03.26-.05.39v7.24a.26.26 0 00.27.27c.82.04 1.63.16 2.42.37.04.83.16 1.66.36 2.47.19.82.49 1.6.86 2.33.36.73.81 1.41 1.32 2.02-.17.1-.34.19-.51.28a4.26 4.26 0 01-1.93.52c-1.37.04-2.73-.06-4.1-.23a9.8 9.8 0 01-3.49-1.26c-.96-.54-1.8-1.23-2.52-2.03-.72-.8-1.3-1.7-1.77-2.69-.47-.99-.8-2.06-1.02-3.13a.15.15 0 01.04-.15.24.24 0 01.2-.09c.64-.02 1.28-.04 1.92-.05 .1 0 .19-.01 .28-.01 .07 .01 .13 .02 .2 .04 .19 .04 .38 .09 .57 .14a5.2 5.2 0 005.02-5.22v-.02a.23 .23 0 00-.23-.23 .2 .2 0 00-.2-.02c-.83-.06-1.66-.13-2.49-.22-.05-.01-.1-.01-.15-.02-1.12-.13-2.25-.26-3.37-.44a.2 .2 0 01-.16-.24 .22 .22 0 01.23-.18c.41-.06 .82-.12 1.23-.18C9.9 .01 11.21 0 12.525 .02z"},null,-1)),co=[io],uo={key:3,class:"w-5 h-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor"},ho=n(()=>t("path",{d:"M20.52 3.48A11.94 11.94 0 0012.01 0C5.4 0 .03 5.37.03 12c0 2.11.55 4.09 1.6 5.86L0 24l6.3-1.63a11.9 11.9 0 005.7 1.45h.01c6.61 0 11.98-5.37 11.98-12 0-3.2-1.25-6.2-3.47-8.34zM12 21.5c-1.8 0-3.56-.48-5.1-1.38l-.37-.22-3.74.97.99-3.65-.24-.38A9.5 9.5 0 1121.5 12c0 5.24-4.26 9.5-9.5 9.5zm5.28-6.92c-.29-.15-1.7-.84-1.96-.94-.26-.1-.45-.15-.64 .15-.19 .29-.74 .94-.9 1.13-.17 .19-.33 .22-.62 .07-.29-.15-1.24-.46-2.35-1.47-.86-.76-1.44-1.7-1.61-1.99-.17-.29-.02-.45 .13-.6 .13-.13 .29-.33 .43-.5 .15-.17 .19-.29 .29-.48 .1-.19 .05-.36-.03-.51-.08-.15-.64-1.55-.88-2.12-.23-.55-.47-.48-.64-.49l-.55-.01c-.19 0 -.5.07-.76 .36-.26 .29-1 1-1 2.45s1.02 2.84 1.16 3.03c.15 .19 2 3.06 4.84 4.29 .68 .29 1.21 .46 1.62 .59 .68 .22 1.3 .19 1.79 .12 .55-.08 1.7-.7 1.94-1.38 .24-.68 .24-1.26 .17-1.38-.07-.12-.26-.19-.55-.34z"},null,-1)),vo=[ho],mo={key:4,class:"w-5 h-5 text-gray-700",viewBox:"0 0 24 24",fill:"currentColor"},fo=n(()=>t("path",{d:"M12 5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm0 5.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM13.5 19a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z"},null,-1)),po=[fo],go={key:0,class:"w-6 h-6 transition-opacity duration-200",viewBox:"0 0 24 24",fill:"currentColor"},_o=n(()=>t("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2c-3.18-.35-6.2-1.63-8.82-3.68a19.86 19.86 0 0 1-6.24-6.24C2.7 9.38 1.42 6.36 1.07 3.18A2 2 0 0 1 3.06 1h3a2 2 0 0 1 2 1.72c.09.74.25 1.46.46 2.16a2 2 0 0 1-.45 2.06L7.5 8.5a16 16 0 0 0 8 8l1.56-1.57a2 2 0 0 1 2.06-.45c.7.21 1.42.37 2.16.46A2 2 0 0 1 22 16.92z"},null,-1)),xo=[_o],yo={key:1,class:"w-6 h-6 transition-opacity duration-200",viewBox:"0 0 24 24",fill:"currentColor"},bo=n(()=>t("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)),wo=[bo],ko={class:"fixed bottom-6 right-6 z-50"},Co=n(()=>t("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1)),Mo={key:0,class:"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center"},Po={__name:"ProductList",props:{products:Object,store:Object,categories:Array,filters:Object,hasProductsWithPromo:Boolean,maxProductPromoPercent:Number},setup(g){const f=h(new Map),C=h(0),p=h([]),Q=h(!1),ve=_(()=>p.value.length?p.value[p.value.length-1].id:null),ke=_(()=>p.value.length?p.value[p.value.length-1].name:"CategorÃ­as");_(()=>ve.value?f.value.get(ve.value)||[]:l.categories);const Ce=_(()=>p.value.length),Z=_(()=>p.value.length+1),me=_(()=>`${100/Z.value}%`),Me=_(()=>Z.value===0?"0%":`${-Ce.value*100/Z.value}%`),fe=e=>!f.value||typeof f.value.get!="function"?[]:f.value.get(e)||[],Pe=_(()=>(C.value,p.value.map(e=>{const a=fe(e.id),s=Q.value&&p.value[p.value.length-1]?.id===e.id;return{levelId:e.id,levelName:e.name,children:a,isLoading:s}}))),Se=async e=>{if(e.has_children_with_products)if(p.value.push({id:e.id,name:e.name}),(!f.value||typeof f.value.has!="function")&&(f.value||(f.value=new Map)),f.value.has(e.id))C.value++;else{Q.value=!0;try{const s=await(await fetch(route("catalog.categories.children",{store:l.store.slug,category:e.id}))).json(),i=Array.isArray(s.data)?s.data:[];f.value.set(e.id,i),C.value++,await k()}catch(a){console.error("Error loading children:",a),f.value.set(e.id,[]),C.value++}finally{Q.value=!1}}},$e=()=>{p.value.length&&p.value.pop()},Y=h(new Set),je=async e=>{if(!f.value||typeof f.value.has!="function")return[];if(f.value.has(e)||Y.value.has(e))return f.value.get(e)||[];Y.value.add(e);try{const s=await(await fetch(route("catalog.categories.children",{store:l.store.slug,category:e}))).json(),i=Array.isArray(s.data)?s.data:[];return f.value.set(e,i),C.value++,i}catch(a){return console.error("Error loading children:",a),f.value.set(e,[]),C.value++,[]}finally{Y.value.delete(e)}},l=g,N=h(l.filters.search),A=h(!1),y=h(!1),E=h({});h(new Set);const ze=async e=>{if(!e.has_children_with_products)return;const a=!E.value[e.id];E.value[e.id]=a,a&&!f.value.has(e.id)&&await je(e.id)},ae=e=>{P.get(route("catalogo.index",{store:l.store.slug}),{category:e,search:N.value||void 0},{preserveState:!0,replace:!0,preserveScroll:!0}),y.value=!1},pe=()=>{P.get(route("catalogo.index",{store:l.store.slug}),{},{preserveState:!0,replace:!0,preserveScroll:!0}),y.value=!1},ge=h(null),re=()=>{A.value=!A.value,A.value?k(()=>{ge.value.focus()}):N.value=""},Be=()=>{N.value||re()},V=e=>l.store?.promo_active&&l.store?.promo_discount_percent||e.promo_active&&e.promo_discount_percent,ee=e=>l.store?.promo_active&&l.store?.promo_discount_percent?Number(l.store.promo_discount_percent):e.promo_active&&e.promo_discount_percent?Number(e.promo_discount_percent):0,w=h(0),te=_(()=>{try{const e=l.store,a=l.filters?.category,s=w.value,i=e?.promo_active,v=e?.promo_discount_percent;if(!e)return!1;const x=e.promo_active,X=x===1||x===!0||x==="1"||x&&x!==0&&x!=="0",ue=Number(e.promo_discount_percent||0);return X&&ue>0}catch{return!1}}),Ne=_(()=>{try{return(l.products?.data||[]).some(a=>!!a?.promo_active&&Number(a?.promo_discount_percent||0)>0)}catch{return!1}}),j=_(()=>{let e=0;te.value&&l.store?.promo_discount_percent&&(e=Number(l.store.promo_discount_percent)||0),l.hasProductsWithPromo===!0&&l.maxProductPromoPercent&&(e=Math.max(e,Number(l.maxProductPromoPercent)||0));try{const a=l.products?.data||[];for(const s of a){const i=Number(s?.promo_discount_percent||0);s?.promo_active&&i>0&&(e=Math.max(e,i))}}catch{}return e}),H=_(()=>{try{const e=l.store,a=w.value,s=l.filters?.category;if(!e)return!1;const i=e.promo_active,v=i===1||i===!0||i==="1"||i&&i!==0&&i!=="0",x=Number(e.promo_discount_percent||0);return v&&x>0}catch{return!1}}),W=_(()=>{l.filters?.category||l.filters?.search||l.filters?.promo,l.store,w.value,l.hasProductsWithPromo;const e=te.value,a=H.value;return e||a||l.hasProductsWithPromo===!0?!0:Ne.value});D(()=>l.store,(e,a)=>{k(()=>{w.value++})},{immediate:!0,deep:!0}),D(()=>l.filters?.category,()=>{k(()=>{w.value++})},{immediate:!0}),D(()=>l.hasProductsWithPromo,()=>{k(()=>{w.value++})},{immediate:!0});const _e=()=>{P.get(route("catalogo.index",{store:l.store.slug}),{promo:1},{preserveState:!0,replace:!0,preserveScroll:!0}),y.value=!1};D(N,e=>{setTimeout(()=>{P.get(route("catalogo.index",{store:l.store.slug}),{search:e},{preserveState:!0,replace:!0,preserveScroll:!0})},500)});const le=h(!1);P.on("start",()=>{le.value=!0}),P.on("finish",()=>{le.value=!1,k(()=>{w.value++})}),P.on("success",()=>{k(()=>{w.value++})});const L=h(0),q=h(!1),ne=()=>{p.value=[],E.value={},Q.value=!1,q.value=!1,L.value++,C.value++},Ae=()=>{y.value?(y.value=!1,setTimeout(()=>{ne(),y.value=!0,k(()=>{setTimeout(()=>{q.value=!0},100)})},50)):(ne(),y.value=!0,k(()=>{setTimeout(()=>{q.value=!0},100)}))};D(y,e=>{e?(p.value.length>0&&ne(),q.value||k(()=>{setTimeout(()=>{q.value=!0},100)})):q.value=!1}),D(p,()=>{y.value&&L.value++},{deep:!0});const Le=e=>{try{return e&&e.track_inventory===!1?!1:Number(e?.quantity||0)<=0}catch{return!1}},Te=e=>{try{if(e&&e.track_inventory===!1)return!1;const a=Number(e?.quantity||0),s=Number(e?.alert||0);return a<=0||s<=0?!1:a<=s}catch{return!1}},K=h(!1),Oe=_(()=>{try{const e=(l.store?.phone??"").toString().replace(/[^0-9]/g,"");return!!(l.store?.facebook_url||l.store?.instagram_url||l.store?.tiktok_url||e)}catch{return!1}}),xe=_(()=>{const e=[],a=l.store||{},s=(a.facebook_url??"").toString().trim(),i=(a.instagram_url??"").toString().trim(),v=(a.tiktok_url??a.tiktok??a.tik_tok_url??"").toString().trim(),x=(a.phone??"").toString().replace(/[^0-9]/g,"");return s&&e.push({key:"fb",href:s,iconClass:"text-blue-500"}),i&&e.push({key:"ig",href:i,iconClass:"text-pink-500"}),v&&e.push({key:"tt",href:v,iconClass:"text-black"}),x&&e.push({key:"wa",href:`https://wa.me/${x}`,iconClass:"text-green-500"}),e});_(()=>{const e=xe.value,a=66;return e.map((s,i)=>({...s,style:`transform: translate(0, -${a*(i+1)}px)`}))});const u=_(()=>{const e=l.products?.data||[],a=e.filter(s=>V(s)).slice(0,5);if(a.length<5){const s=e.filter(i=>!a.some(v=>v.id===i.id)).slice(0,5-a.length);return[...a,...s]}return a.slice(0,5)}),d=h(0),T=h(null),Ie=h(null),M=h(!1),se=h(0),R=h(0),O=h(0),ie=()=>{u.value.length>0&&!M.value&&(d.value=(d.value+1)%u.value.length,I())},ye=()=>{u.value.length>0&&!M.value&&(d.value=d.value===0?u.value.length-1:d.value-1,I())},De=e=>{d.value=e,I()},I=()=>{T.value&&clearInterval(T.value),u.value.length>1&&!M.value&&(T.value=setInterval(ie,3e3))},be=e=>{if(e.target.closest("button")&&window.innerWidth>=768)return;M.value=!0;const a=e.touches?e.touches[0].clientX:e.clientX;se.value=a,R.value=a,O.value=0,T.value&&clearInterval(T.value)},we=e=>{if(!M.value)return;e.preventDefault();const a=e.touches?e.touches[0].clientX:e.clientX;R.value=a,O.value=R.value-se.value},ce=e=>{if(!M.value)return;if(Math.abs(O.value)<5){M.value=!1,se.value=0,R.value=0,O.value=0,I();return}const a=50,s=O.value;Math.abs(s)>a&&(s>0?ye():ie()),M.value=!1,se.value=0,R.value=0,O.value=0,setTimeout(()=>{I()},300)},Fe=e=>{P.post(route("cart.store"),{product_id:e.id,product_variant_id:null,quantity:1},{preserveScroll:!0,onSuccess:()=>{P.visit(route("checkout.index",{store:l.store.slug}),{preserveScroll:!1})}})};return qe(()=>{I()}),Xe(()=>{T.value&&clearInterval(T.value)}),D(u,(e,a)=>{e.length>0&&(d.value=0),I()}),(e,a)=>(o(),r($,null,[z(oe(Ee),{title:`CatÃ¡logo de ${g.store.name}`},{default:b(()=>[Je,Qe,Ze]),_:1},8,["title"]),W.value||H.value?(o(),r("div",{key:`promo-banner-${te.value||H.value?"store":"products"}-${l.filters?.category||"all"}-${l.filters?.search||""}-${w.value}`,class:"fixed top-0 left-0 right-0 z-[60] bg-red-600/60 backdrop-blur-sm"},[t("button",{onClick:_e,class:"w-full py-2 sm:py-3 shadow-lg hover:bg-red-600/70 transition-all"},[t("div",Ye,[t("div",et,[t("span",tt,[st,F(" Ofertas"),j.value>0?(o(),r("span",ot," hasta "+m(j.value)+"%",1)):c("",!0),at,F(" Toca para ver "),rt]),t("span",lt,[nt,F(" Ofertas"),j.value>0?(o(),r("span",it," hasta "+m(j.value)+"%",1)):c("",!0),ct,F(" Toca para ver "),ut]),t("span",dt,[ht,F(" Ofertas"),j.value>0?(o(),r("span",vt," hasta "+m(j.value)+"%",1)):c("",!0),mt,F(" Toca para ver "),ft])])])])])):c("",!0),t("header",{class:U(["bg-white shadow-sm sticky z-50",W.value?"top-[44px] sm:top-[52px]":"top-0"])},[t("nav",pt,[t("button",{onClick:Ae,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors z-10 flex-shrink-0","aria-label":"Abrir menÃº"},_t),t("div",{class:U(["absolute left-1/2 flex items-center justify-center z-10 transition-all duration-300 ease-out",A.value?"opacity-0 scale-75 pointer-events-none":"opacity-100 scale-100 pointer-events-auto"]),style:S(A.value?"transform: translate(-50%, 0) translateX(-100px)":"transform: translate(-50%, 0)")},[g.store.logo_url?(o(),r("img",{key:0,src:g.store.logo_url,alt:`Logo de ${g.store.name}`,class:"h-12 w-12 sm:h-14 sm:w-14 md:h-16 md:w-16 rounded-full object-cover ring-2 ring-gray-100 shadow-sm"},null,8,xt)):c("",!0)],6),t("div",yt,[z(G,{name:"search-expand"},{default:b(()=>[A.value?(o(),r("div",Ct,[He(t("input",{ref_key:"searchInput",ref:ge,"onUpdate:modelValue":a[0]||(a[0]=s=>N.value=s),type:"text",placeholder:"Buscar...",onBlur:Be,class:"border border-gray-300 rounded-lg px-4 py-2 text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"},null,544),[[We,N.value]]),t("button",{onClick:re,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Cerrar bÃºsqueda"},Pt)])):(o(),r("div",bt,[t("button",{onClick:re,class:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Buscar"},kt)]))]),_:1})])])],2),t("main",{class:U(["container mx-auto px-6 py-12",W.value?"pt-16 sm:pt-20":"pt-12"])},[u.value.length>0&&!A.value&&!N.value?(o(),r("div",{key:0,ref_key:"galleryContainer",ref:Ie,class:"mb-8 relative overflow-hidden rounded-2xl shadow-xl md:cursor-default cursor-grab active:cursor-grabbing",onTouchstart:be,onTouchmove:we,onTouchend:ce,onMousedown:be,onMousemove:we,onMouseup:ce,onMouseleave:ce},[u.value.length>1?(o(),r("button",{key:0,onClick:ye,class:"flex absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 backdrop-blur-sm hover:bg-white text-gray-800 p-2 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-110 active:scale-95","aria-label":"Anterior"},$t)):c("",!0),u.value.length>1?(o(),r("button",{key:1,onClick:ie,class:"flex absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 backdrop-blur-sm hover:bg-white text-gray-800 p-2 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-110 active:scale-95","aria-label":"Siguiente"},zt)):c("",!0),t("div",Bt,[t("div",Nt,[z(G,{name:"slide-fade",mode:"out-in"},{default:b(()=>[u.value[d.value]?(o(),r("div",{key:`${u.value[d.value].id}-${d.value}`,class:"absolute inset-0 gallery-slide",style:S(M.value?{transform:`translateX(${O.value}px)`,transition:"none"}:{})},[u.value[d.value]?(o(),r("div",At,[t("div",Lt,[u.value[d.value].main_image_url?(o(),r("img",{key:0,src:u.value[d.value].main_image_url,alt:u.value[d.value].name,class:"w-full h-full object-cover object-center"},null,8,Tt)):c("",!0)]),t("div",Ot,[t("div",It,[t("h3",Dt,m(u.value[d.value].name),1),t("div",Ft,[t("p",Vt,m(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(V(u.value[d.value])?Math.round(u.value[d.value].price*(100-ee(u.value[d.value]))/100):u.value[d.value].price)),1),V(u.value[d.value])?(o(),r("span",qt," -"+m(ee(u.value[d.value]))+"% ",1)):c("",!0)])]),t("div",Xt,[t("button",{onClick:a[1]||(a[1]=s=>Fe(u.value[d.value])),class:"buy-now-gallery bg-white/80 backdrop-blur-sm text-gray-900 font-bold py-3 px-6 sm:px-8 rounded-full shadow-2xl hover:bg-white/90 transition-all transform hover:scale-105 active:scale-95 text-base sm:text-lg md:text-xl border-2 border-gray-200"}," COMPRAR ")])])])):c("",!0)],4)):c("",!0)]),_:1})]),u.value.length>1?(o(),r("div",Et,[(o(!0),r($,null,B(u.value,(s,i)=>(o(),r("button",{key:s.id,onClick:v=>De(i),class:U([d.value===i?"bg-white w-8":"bg-white/50 w-2","h-2 rounded-full transition-all duration-300"]),"aria-label":`Ir a slide ${i+1}`},null,10,Ht))),128))])):c("",!0)])],544)):c("",!0),z(G,{name:"drawer"},{default:b(()=>[y.value?(o(),r("div",Wt,[t("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:a[2]||(a[2]=s=>y.value=!1)}),t("div",Kt,[t("div",Rt,[t("div",Ut,[p.value.length?(o(),r("button",{key:0,onClick:$e,class:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Volver"},Jt)):c("",!0),t("h3",Qt,m(ke.value),1)]),t("button",{onClick:a[3]||(a[3]=s=>y.value=!1),class:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Cerrar"},Yt)]),W.value||H.value?(o(),r("div",{key:`promo-drawer-${te.value||H.value?"store":"products"}-${L.value}-${w.value}`,class:"border-b border-gray-200 bg-white flex-shrink-0"},[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 transition-colors",onClick:_e},[es,j.value>0?(o(),r("span",ts,"Hasta "+m(j.value)+"%",1)):c("",!0)]),ss])):c("",!0),t("div",{class:"relative overflow-hidden",style:S({height:W.value?"calc(100% - 116px)":"calc(100% - 73px)"})},[t("div",{class:"menu-slides-container",style:S({transform:`translateX(${Me.value})`,width:`${Z.value*100}%`})},[t("div",{class:"menu-slide",style:S({width:me.value})},[t("div",os,[t("div",{class:"border-b border-gray-200 flex-shrink-0"},[t("button",{onClick:pe,class:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-blue-50 active:bg-blue-100 transition-colors"},ls),ns]),t("div",is,[(o(),J(de,{name:"menu-item",tag:"div",key:L.value},{default:b(()=>[(o(!0),r($,null,B(l.categories,(s,i)=>(o(),r("div",{key:`${s.id}-${L.value}`,class:"menu-item-wrapper",style:S({"--i":i})},[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",onClick:v=>s.has_children_with_products?Se(s):ae(s.id)},[t("span",us,m(s.name),1),t("div",ds,[t("span",hs,m(s.products_count),1),s.has_children_with_products?(o(),r("span",vs,"â€º")):c("",!0)])],8,cs)],4))),128))]),_:1}))])])],4),(o(!0),r($,null,B(Pe.value,(s,i)=>(o(),r("div",{key:`level-${s.levelId}-${i}-${C.value}`,class:"menu-slide",style:S({width:me.value})},[t("div",ms,[t("div",{class:"border-b border-gray-200 flex-shrink-0"},[t("button",{onClick:pe,class:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-blue-50 active:bg-blue-100 transition-colors"},gs),_s]),s.children.length>0?(o(),r("div",xs,[(o(),J(de,{name:"menu-item",tag:"div",key:`${s.levelId}-${L.value}-${C.value}`},{default:b(()=>[(o(!0),r($,null,B(s.children,(v,x)=>(o(),r("div",{key:`${v.id}-${L.value}`,class:"menu-item-wrapper",style:S({"--i":x})},[t("button",{class:"w-full flex items-center justify-between px-4 py-3.5 hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",onClick:X=>v.has_children_with_products?ze(v):ae(v.id)},[t("span",bs,m(v.name),1),t("div",ws,[v.has_children_with_products?(o(),r("span",ks,m(E.value[v.id]?"âˆ’":"+"),1)):c("",!0)])],8,ys),z(G,{name:"submenu"},{default:b(()=>[E.value[v.id]&&v.has_children_with_products?(o(),r("div",Cs,[Y.value.has(v.id)?(o(),r("div",Ms,"Cargando...")):(o(),J(de,{key:1,name:"submenu-item",tag:"div"},{default:b(()=>[(o(!0),r($,null,B(fe(v.id),(X,ue)=>(o(),r("button",{key:X.id,class:"submenu-item-wrapper w-full flex items-center justify-between px-4 py-2.5 pl-8 hover:bg-gray-100 active:bg-gray-150 transition-colors border-b border-gray-200/50",onClick:So=>ae(X.id),style:S({"--i":ue})},[t("span",Ss,m(X.name),1)],12,Ps))),128))]),_:2},1024))])):c("",!0)]),_:2},1024)],4))),128))]),_:2},1024))])):s.isLoading?(o(),r("div",$s,"Cargando...")):(o(),r("div",js,"No hay categorÃ­as disponibles"))])],4))),128))],4)],4)])])):c("",!0)]),_:1}),le.value?(o(),r("div",zs,[(o(),r($,null,B(6,s=>t("div",{key:s,class:"animate-pulse border rounded-xl shadow-sm overflow-hidden bg-white"},Ns)),64))])):g.products.data.length>0?(o(),r("div",As,[(o(!0),r($,null,B(g.products.data,s=>(o(),J(oe(he),{key:s.id,href:e.route("catalogo.show",{store:g.store.slug,product:s.id}),class:"group block border rounded-xl shadow-sm overflow-hidden bg-white hover:shadow-md transition"},{default:b(()=>[t("div",Ls,[s.main_image_url?(o(),r("img",{key:0,src:s.main_image_url,alt:"Imagen del producto",class:"w-full h-40 sm:h-48 md:h-56 object-cover transform group-hover:scale-105 transition duration-300"},null,8,Ts)):c("",!0),Le(s)?(o(),r("span",Os,"Agotado")):Te(s)?(o(),r("span",Is,"Â¡Pocas unidades!")):c("",!0)]),t("div",Ds,[t("h3",Fs,m(s.name),1),t("div",Vs,[t("p",qs,m(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(V(s)?Math.round(s.price*(100-ee(s))/100):s.price)),1),V(s)?(o(),r("span",Xs," -"+m(ee(s))+"% ",1)):c("",!0)]),V(s)?(o(),r("p",Es,m(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s.price)),1)):c("",!0)])]),_:2},1032,["href"]))),128))])):(o(),r("div",Hs,[t("div",Ws,[Ks,Rs,z(oe(he),{href:e.route("catalogo.index",{store:g.store.slug}),class:"mt-4 inline-block text-blue-600 hover:underline font-semibold"},{default:b(()=>[F(" Limpiar filtros ")]),_:1},8,["href"])])])),g.products.data.length>0?(o(),J(Ge,{key:4,class:"mt-8",links:g.products.links},null,8,["links"])):c("",!0)],2),t("footer",Us,[t("div",Gs,[t("p",null,"Â© 2025 "+m(g.store.name),1)])]),Oe.value?(o(),r("div",Js,[t("div",Qs,[z(G,{name:"fade"},{default:b(()=>[K.value?(o(),r("div",Zs,[(o(!0),r($,null,B(xe.value,s=>(o(),r("a",{key:s.key,href:s.href,target:"_blank",class:"w-11 h-11 rounded-full bg-white/70 backdrop-blur ring-1 ring-blue-500/50 flex items-center justify-center shadow-2xl active:scale-95"},[s.key==="fb"?(o(),r("svg",eo,so)):s.key==="ig"?(o(),r("svg",oo,lo)):s.key==="tt"?(o(),r("svg",no,co)):s.key==="wa"?(o(),r("svg",uo,vo)):(o(),r("svg",mo,po))],8,Ys))),128))])):c("",!0)]),_:1}),t("button",{onClick:a[4]||(a[4]=s=>K.value=!K.value),class:U(["w-12 h-12 rounded-full bg-blue-600/70 backdrop-blur ring-1 ring-blue-500/50 text-white flex items-center justify-center shadow-2xl active:scale-95 transition-transform duration-300",{"scale-95":K.value}])},[K.value?(o(),r("svg",yo,wo)):(o(),r("svg",go,xo))],2)])])):c("",!0),t("div",ko,[z(oe(he),{href:e.route("cart.index",{store:g.store.slug}),class:"relative w-12 h-12 rounded-full bg-blue-600/70 backdrop-blur ring-1 ring-blue-500/50 text-white flex items-center justify-center shadow-2xl active:scale-95"},{default:b(()=>[Co,e.$page.props.cart.count>0?(o(),r("span",Mo,m(e.$page.props.cart.count),1)):c("",!0)]),_:1},8,["href"])])],64))}},zo=Ve(Po,[["__scopeId","data-v-dd29fa92"]]);export{zo as default};
