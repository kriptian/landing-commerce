import{r as c,w as V,o as j,n as U,a as A,c as $,b as k,d as L,e as n,u as l,h as G,f as r,g as e,x as u,m as d,k as i,j as v,v as S,s as q,p as N,q as D,i as K,F as I,l as P,t as p,y as Y}from"./app-BAig9ET_.js";import{_ as H}from"./AuthenticatedLayout-cdS-tItC.js";import{_ as J}from"./Pagination-9dnpIZiC.js";const Q=e("div",{class:"flex justify-between items-center"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Órdenes")],-1),Z={class:"py-12"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se={class:"p-6 text-gray-900"},ae={class:"mb-4"},oe={class:"flex flex-wrap gap-2"},ne={class:"mb-4"},re={class:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center"},ie={class:"md:col-span-2"},le={class:"relative"},de=e("svg",{class:"absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M10 2a8 8 0 105.293 14.707l3.5 3.5a1 1 0 001.414-1.414l-3.5-3.5A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"})],-1),ce={class:"flex items-center gap-2 md:col-span-2"},ue=e("span",{class:"text-gray-500 text-sm"},"a",-1),pe={class:"flex items-center gap-2"},me=e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),he={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},xe={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},ge={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},fe={class:"sticky top-0 z-10 bg-gray-50"},ve=e("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),ye=[ve],we=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Cliente",-1),be=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Teléfono",-1),_e=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Fecha",-1),ke=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Items",-1),Le=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Total",-1),Ee=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Estado",-1),Se=e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Ver")],-1),ze={class:"bg-white divide-y divide-gray-200"},Ce=["title"],Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ve={class:"px-6 py-4 whitespace-nowrap"},qe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ne={key:0},De=e("td",{colspan:"8",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No se encontraron órdenes con este filtro. ",-1),Ie=[De],O="ord_firstcol_w_px",Oe=60,Xe=320,Ae={__name:"Index",props:{orders:Object,filters:Object},setup(a){const y=a,h=c(y.filters?.q||""),x=c(y.filters?.start||""),g=c(y.filters?.end||"");let z;const E=()=>{clearTimeout(z),z=setTimeout(()=>{Y.get(route("admin.orders.index"),{status:y.filters?.status||void 0,q:h.value||void 0,start:x.value||void 0,end:g.value||void 0},{preserveState:!0,replace:!0,preserveScroll:!0})},350)};V(h,E),V([x,g],E);const X=s=>{const o={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString("es-CO",o)},w=c(null),C=c(!1),M=c(!1),f=()=>{const s=w.value;if(!s)return;const o=s.scrollWidth-s.clientWidth,t=s.scrollLeft||0;C.value=t>0,M.value=t<o-1};j(()=>{U(()=>f()),w.value?.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",f)}),A(()=>{w.value?.removeEventListener("scroll",f),window.removeEventListener("resize",f)});const m=c(Number(localStorage.getItem(O))||160),T=$(()=>({width:m.value+"px",minWidth:m.value+"px",maxWidth:m.value+"px"}));let R=0,B=0;const b=s=>{const o=s.touches?s.touches[0].clientX:s.clientX,t=Math.max(Oe,Math.min(Xe,B+(o-R)));m.value=t},_=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",_),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",_);try{localStorage.setItem(O,String(m.value))}catch{}},F=s=>{R=s.touches?s.touches[0].clientX:s.clientX,B=m.value,document.addEventListener("mousemove",b,{passive:!1}),document.addEventListener("mouseup",_),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",_)};return(s,o)=>(L(),k(I,null,[n(l(G),{title:"Gestionar Órdenes"}),n(H,null,{header:r(()=>[Q]),default:r(()=>[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[n(l(u),{href:s.route("admin.orders.index"),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-blue-600 text-white":!a.filters.status,"bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status}])},{default:r(()=>[i(" Todos ")]),_:1},8,["href","class"]),n(l(u),{href:s.route("admin.orders.index",{status:"recibido"}),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-yellow-500 text-white":a.filters.status==="recibido","bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status!=="recibido"}])},{default:r(()=>[i(" Recibidos ")]),_:1},8,["href","class"]),n(l(u),{href:s.route("admin.orders.index",{status:"en_preparacion"}),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-blue-500 text-white":a.filters.status==="en_preparacion","bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status!=="en_preparacion"}])},{default:r(()=>[i(" En Preparación ")]),_:1},8,["href","class"]),n(l(u),{href:s.route("admin.orders.index",{status:"despachado"}),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-purple-500 text-white":a.filters.status==="despachado","bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status!=="despachado"}])},{default:r(()=>[i(" Despachados ")]),_:1},8,["href","class"]),n(l(u),{href:s.route("admin.orders.index",{status:"entregado"}),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-green-500 text-white":a.filters.status==="entregado","bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status!=="entregado"}])},{default:r(()=>[i(" Entregados ")]),_:1},8,["href","class"]),n(l(u),{href:s.route("admin.orders.index",{status:"cancelado"}),class:d(["px-3 py-2 text-sm font-medium rounded-md",{"bg-red-500 text-white":a.filters.status==="cancelado","bg-gray-200 text-gray-700 hover:bg-gray-300":a.filters.status!=="cancelado"}])},{default:r(()=>[i(" Cancelados ")]),_:1},8,["href","class"])])]),e("div",ne,[e("div",re,[e("div",ie,[e("div",le,[v(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>h.value=t),type:"text",placeholder:"Buscar por nombre o teléfono",class:"w-full pl-10 pr-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[S,h.value]]),de])]),e("div",ce,[v(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>x.value=t),type:"date",class:"w-full border rounded-md text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[S,x.value]]),ue,v(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>g.value=t),type:"date",class:"w-full border rounded-md text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[S,g.value]])]),e("div",pe,[e("button",{onClick:o[3]||(o[3]=q(()=>{h.value="",x.value="",g.value="",E()},["prevent"])),class:"inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium py-2 px-3 rounded-md w-full md:w-auto justify-center"},[me,i(" Limpiar ")])])])]),e("div",{ref_key:"scrollBoxRef",ref:w,class:"relative overflow-x-auto"},[v(e("div",he,null,512),[[N,C.value]]),v(e("div",xe,null,512),[[N,M.value]]),e("table",ge,[e("thead",fe,[e("tr",null,[e("th",{scope:"col",class:"sticky left-0 z-20 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap relative",style:D(T.value)},[i(" Orden # "),e("div",{onMousedown:F,onTouchstart:q(F,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},ye,32)],4),we,be,_e,ke,Le,Ee,Se])]),e("tbody",ze,[(L(!0),k(I,null,P(a.orders.data,(t,W)=>(L(),k("tr",{key:t.id,class:"odd:bg-white even:bg-gray-100"},[e("td",{class:d(["sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r truncate",W%2===1?"bg-gray-100":"bg-white"]),style:D(T.value),title:t.sequence_number||t.id},p(t.sequence_number||t.sequence_number===0?t.sequence_number:t.id),15,Ce),e("td",Me,p(t.customer_name),1),e("td",Te,p(t.customer_phone),1),e("td",Re,p(X(t.created_at)),1),e("td",Be,p(t.items_count),1),e("td",Fe,"$ "+p(Number(t.total_price).toLocaleString("es-CO")),1),e("td",Ve,[e("span",{class:d(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":t.status==="recibido","bg-blue-100 text-blue-800":t.status==="en_preparacion","bg-purple-100 text-purple-800":t.status==="despachado","bg-green-100 text-green-800":t.status==="entregado","bg-red-100 text-red-800":t.status==="cancelado"}])},p(t.status),3)]),e("td",qe,[n(l(u),{href:s.route("admin.orders.show",t.id),class:"text-indigo-600 hover:text-indigo-900"},{default:r(()=>[i("Ver")]),_:2},1032,["href"])])]))),128)),a.orders.data.length===0?(L(),k("tr",Ne,Ie)):K("",!0)])])],512),n(J,{class:"mt-6",links:a.orders.links},null,8,["links"])])])])])]),_:1})],64))}};export{Ae as default};
