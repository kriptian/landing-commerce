import{z as M,r as N,b as l,d as a,e as p,u as r,h as j,f as v,g as e,s as c,j as g,i as _,v as b,t as h,F as x,l as y,k as w}from"./app-B68QO_bg.js";import{_ as B}from"./AuthenticatedLayout-DG4WQVWP.js";import{_ as U}from"./AlertModal-BV2r33-r.js";import"./Modal-BLADIoYt.js";const E=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Crear categoría",-1),F={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6 text-gray-900"},z={class:"mb-6 border-b pb-6"},L=e("label",{for:"name",class:"block font-medium text-lg text-gray-800"},"Nombre de la Categoría",-1),P={key:0,class:"text-sm text-red-600 mt-2"},G={class:"mt-6"},H=e("h3",{class:"font-medium text-lg text-gray-800"},"Estructura de Subcategorías",-1),I=e("p",{class:"text-sm text-gray-500"},"Definí subcategorías y un subnivel adicional (máximo 3 niveles en total).",-1),J={class:"flex items-center gap-4 p-3"},K=["onUpdate:modelValue","placeholder"],O=["onClick"],Q={class:"bg-gray-50 px-3 pb-3"},R=["onClick"],W={class:"w-5 h-5 inline-flex items-center justify-center rounded-full border border-gray-300 text-gray-700"},X={key:0,class:"mt-3 space-y-2"},Y=["onUpdate:modelValue","placeholder"],Z=["onClick"],ee=["onClick"],te=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),se={key:0,class:"text-sm text-red-600 mt-2"},oe=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),re={class:"flex items-center justify-end mt-8 border-t pt-6"},ne=["disabled"],le=e("span",{class:"text-lg"},"+",-1),ae=e("span",null,"Crear",-1),ie=[le,ae],pe={__name:"Create",setup(de){const s=M({name:"",subcategories:[]}),k=()=>{s.subcategories.push({name:"",children:[],_showChildren:!1})},C=n=>{s.subcategories.splice(n,1)},S=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t._showChildren=!t._showChildren)},$=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t.children.push({name:""}))},V=(n,t)=>{const o=s.subcategories[n];!o||!Array.isArray(o.children)||o.children.splice(t,1)},u=N(!1),A=()=>{s.post(route("admin.categories.store"),{onSuccess:()=>{u.value=!0}})};return(n,t)=>(a(),l(x,null,[p(r(j),{title:"Crear categoría"}),p(B,null,{header:v(()=>[E]),default:v(()=>[e("div",F,[e("div",D,[e("div",T,[e("div",q,[e("form",{onSubmit:c(A,["prevent"])},[e("div",z,[L,g(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>r(s).name=o),type:"text",class:"block mt-2 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[b,r(s).name]]),r(s).errors.name?(a(),l("p",P,h(r(s).errors.name),1)):_("",!0)]),e("div",G,[H,I,(a(!0),l(x,null,y(r(s).subcategories,(o,d)=>(a(),l("div",{key:d,class:"mt-4 border rounded-lg overflow-hidden"},[e("div",J,[g(e("input",{"onUpdate:modelValue":i=>o.name=i,type:"text",placeholder:`Nombre de la Subcategoría ${d+1}`,class:"block w-full rounded-md shadow-sm border-gray-300"},null,8,K),[[b,o.name]]),e("button",{onClick:c(i=>C(d),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"}," - ",8,O)]),e("div",Q,[e("button",{type:"button",class:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",onClick:c(i=>S(d),["prevent"])},[e("span",W,h(o._showChildren?"v":">"),1),e("span",null,h(o._showChildren?"Colapsar subniveles":"Expandir subniveles"),1)],8,R),o._showChildren?(a(),l("div",X,[(a(!0),l(x,null,y(o.children||[],(i,m)=>(a(),l("div",{key:m,class:"flex items-center gap-3"},[g(e("input",{"onUpdate:modelValue":f=>i.name=f,type:"text",class:"block w-full rounded-md shadow-sm border-gray-300",placeholder:`Subnivel ${m+1}`},null,8,Y),[[b,i.name]]),e("button",{onClick:c(f=>V(d,m),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"},"- ",8,Z)]))),128)),e("button",{type:"button",class:"mt-1 inline-flex items-center gap-2 border border-green-500 text-green-600 py-1 px-3 rounded hover:bg-green-50",onClick:c(i=>$(d),["prevent"])},[te,w(" Agregar subnivel ")],8,ee)])):_("",!0)])]))),128)),r(s).errors.subcategories?(a(),l("p",se,h(r(s).errors.subcategories),1)):_("",!0),e("button",{onClick:c(k,["prevent"]),type:"button",class:"mt-4 inline-flex items-center gap-2 border border-green-500 text-green-600 py-2 px-4 rounded hover:bg-green-50"},[oe,w(" Añadir Subcategoría ")])]),e("div",re,[e("button",{type:"submit",disabled:r(s).processing,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 inline-flex items-center gap-2"},ie,8,ne)])],32)])])])])]),_:1}),p(U,{show:u.value,type:"success",title:"Categorías",message:"¡Categoría creada con éxito!","primary-text":"Entendido",onPrimary:t[1]||(t[1]=o=>{u.value=!1,r(s).reset()}),onClose:t[2]||(t[2]=o=>{u.value=!1,r(s).reset()})},null,8,["show"])],64))}};export{pe as default};
