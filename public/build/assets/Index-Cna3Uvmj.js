import{K as L,r as n,a as l,o as i,b as r,u as _,h as H,d as c,e,g as k,v as T,F as P,j as N,t as p,x as A,i as u,l as V,f as $,k as d}from"./app-CdEBBWGl.js";import{_ as q}from"./AuthenticatedLayout-PmA-gZnP.js";import{_ as F}from"./Modal-gcK9qcMR.js";import{_ as G}from"./SecondaryButton-DpPNSbPE.js";import{D as O}from"./DangerButton-B6vWHv1A.js";import{_ as U}from"./AlertModal-BlmVJJtF.js";const K=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Productos",-1),J={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 text-gray-900"},X={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},Y={class:"flex flex-wrap items-center gap-3"},Z=e("option",{value:""},"Todas las categorías",-1),ee=["value"],te=e("option",{value:""},"Todos",-1),se=e("option",{value:"active"},"Activos",-1),oe=e("option",{value:"inactive"},"Inactivos",-1),ae=[te,se,oe],re=e("div",{class:"hidden md:block h-6 w-px bg-gray-200"},null,-1),ne={class:"flex items-center gap-2 border rounded-lg px-3 py-2"},le=e("span",{class:"text-sm text-gray-600"},"Promo Global:",-1),ie={class:"inline-flex items-center gap-1 text-sm"},ce=["checked"],de=["value"],pe=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 4a2 2 0 0 1 2-2h7l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4zm9-1.5V7h4.5L13 2.5z"}),e("path",{d:"M8 13h8v2H8zM8 9h5v2H8z"})],-1),ue=e("span",null,"Crear",-1),me={class:"overflow-x-auto"},xe={class:"min-w-[900px] w-full divide-y divide-gray-200 table-auto"},_e=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Categoría"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Activo"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Promoción"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1),he={class:"bg-white divide-y divide-gray-200"},ve={key:0},ge=e("td",{colspan:"6",class:"px-3 py-3 sm:px-6 sm:py-4 text-center text-gray-500"},"No hay productos creados.",-1),ye=[ge],fe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},we={key:0,class:"ml-2 inline-flex items-center rounded bg-gray-200 text-gray-700 text-xs font-semibold px-2 py-0.5"},be={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Ce={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ke={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Pe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Se={class:"inline-flex items-center gap-1 text-sm"},Me=["checked","onChange"],Ne={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Ae={class:"flex items-center gap-2"},Ve={class:"inline-flex items-center gap-1 text-sm"},$e=["checked","onChange"],Be=["value","onInput"],je={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium"},ze={class:"flex items-center gap-2"},De=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),Ee=["onClick"],Ie=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),Le=[Ie],He={class:"p-6"},Te=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que querés eliminar este producto? ",-1),qe=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. Se borrará el producto con todas sus variantes e imágenes. ",-1),Fe={class:"mt-6 flex justify-end"},Re={__name:"Index",props:{products:Array,categories:Array,store:Object,filters:Object},setup(h){const a=h,S=L(),v=n(a.filters?.search||""),g=n(a.filters?.category||""),y=n(a.filters?.status||""),f=n(!1),w=n(null),m=n(!!S?.props?.flash?.success),M=n(S?.props?.flash?.success||""),B=o=>{w.value=o,f.value=!0},b=()=>{f.value=!1,w.value=null},j=()=>{d.delete(route("admin.products.destroy",w.value),{onSuccess:()=>{b(),M.value="¡Producto eliminado con éxito!",m.value=!0}})},z=o=>{d.put(route("admin.products.update",o.id),{promo_active:!o.promo_active,promo_discount_percent:o.promo_discount_percent},{preserveScroll:!0})},D=(o,s)=>{const t=Math.max(1,Math.min(90,Number(s)||0));d.put(route("admin.products.update",o.id),{promo_discount_percent:t,promo_active:!0},{preserveScroll:!0})},E=()=>{d.put(route("admin.products.store_promo"),{promo_active:!a.store.promo_active,promo_discount_percent:a.store.promo_discount_percent},{preserveScroll:!0})},I=o=>{const s=Math.max(1,Math.min(90,Number(o)||0));d.put(route("admin.products.store_promo"),{promo_active:!0,promo_discount_percent:s},{preserveScroll:!0})},C=()=>{d.get(route("admin.products.index"),{search:v.value,category:g.value,status:y.value},{preserveState:!0,replace:!0,preserveScroll:!0})};return(o,s)=>(i(),l(P,null,[r(_(H),{title:"Gestionar Productos"}),r(q,null,{header:c(()=>[K]),default:c(()=>[e("div",J,[e("div",Q,[e("div",R,[e("div",W,[e("div",X,[e("div",Y,[k(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),onInput:C,placeholder:"Buscar productos...",class:"border rounded px-3 py-2 text-sm h-10"},null,544),[[T,v.value]]),k(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>g.value=t),onChange:C,class:"border rounded px-2 py-2 text-sm h-10 min-w-[170px] max-w-[220px]"},[Z,(i(!0),l(P,null,N(a.categories,t=>(i(),l("option",{key:t.id,value:t.id},p(t.name),9,ee))),128))],544),[[A,g.value]]),k(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>y.value=t),onChange:C,class:"border rounded px-2 py-2 text-sm h-10 min-w-[150px]"},ae,544),[[A,y.value]]),re,e("div",ne,[le,e("label",ie,[e("input",{type:"checkbox",checked:a.store.promo_active,onChange:E,class:"rounded border-gray-300"},null,40,ce),u(" Activa ")]),e("input",{type:"number",min:"1",max:"90",value:a.store.promo_discount_percent??"",onInput:s[3]||(s[3]=t=>I(t.target.value)),placeholder:"%",class:"w-16 text-sm border rounded px-1 py-0.5"},null,40,de)]),r(_(V),{href:o.route("admin.products.create"),class:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow"},{default:c(()=>[pe,ue]),_:1},8,["href"])])]),e("div",me,[e("table",xe,[_e,e("tbody",he,[h.products.length===0?(i(),l("tr",ve,ye)):$("",!0),(i(!0),l(P,null,N(h.products,t=>(i(),l("tr",{key:t.id},[e("td",fe,[e("span",null,p(t.name),1),t.is_active?$("",!0):(i(),l("span",we,"Inactivo"))]),e("td",be,"$ "+p(Number(t.price).toLocaleString("es-CO")),1),e("td",Ce,p(t.quantity),1),e("td",ke,p(t.category?t.category.name:"Sin Categoría"),1),e("td",Pe,[e("label",Se,[e("input",{type:"checkbox",checked:t.is_active,onChange:x=>_(d).put(o.route("admin.products.update",t.id),{is_active:!t.is_active},{preserveScroll:!0}),class:"rounded border-gray-300"},null,40,Me),u(" "+p(t.is_active?"Sí":"No"),1)])]),e("td",Ne,[e("div",Ae,[e("label",Ve,[e("input",{type:"checkbox",checked:t.promo_active,onChange:x=>z(t),class:"rounded border-gray-300"},null,40,$e),u(" Activa ")]),e("input",{type:"number",min:"1",max:"90",value:t.promo_discount_percent??"",onInput:x=>D(t,x.target.value),placeholder:"%",class:"w-16 text-sm border rounded px-1 py-0.5"},null,40,Be)])]),e("td",je,[e("div",ze,[r(_(V),{href:o.route("admin.products.edit",t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:c(()=>[De]),_:2},1032,["href"]),e("button",{onClick:x=>B(t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},Le,8,Ee)])])]))),128))])])])])])])])]),_:1}),r(F,{show:f.value,onClose:b},{default:c(()=>[e("div",He,[Te,qe,e("div",Fe,[r(G,{onClick:b},{default:c(()=>[u(" Cancelar ")]),_:1}),r(O,{class:"ms-3",onClick:j},{default:c(()=>[u(" Sí, Eliminar Producto ")]),_:1})])])]),_:1},8,["show"]),r(U,{show:m.value,type:"success",title:"Producto",message:M.value,"primary-text":"Entendido",onPrimary:s[4]||(s[4]=t=>m.value=!1),onClose:s[5]||(s[5]=t=>m.value=!1)},null,8,["show","message"])],64))}};export{Re as default};
