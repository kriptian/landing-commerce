import{r as d,c as de,w as Ne,B as Ve,C as O,D as qe,a as l,o as r,b,d as ze,h as Le,e as T,f as t,T as ue,i as u,j as p,q as _,m as V,t as c,F as w,n as M,p as x,E as pe,s as K,g as Te,z as he,G as Me}from"./app-BJh3DctP.js";import{_ as $e}from"./AuthenticatedLayout-BBrYQi3i.js";import{_ as Be}from"./Pagination-CeIThlUo.js";import{_ as Ie}from"./Modal-Ciyd_9L9.js";import{_ as Re}from"./AlertModal-rk9aEmUk.js";const Ue=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestión de Inventario",-1),Ae={class:"py-12"},Fe={class:"max-w-screen-2xl mx-auto sm:px-6 lg:px-8"},Oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Pe={class:"p-6 text-gray-900"},je={class:"mb-4 flex items-center justify-between"},Ge={class:"flex items-center gap-3"},He=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})],-1),Xe=[He],Qe={key:0,class:"relative"},We={class:"flex items-center gap-2"},De=["href"],Ke=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Je=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})],-1),Ye=t("span",{class:"hidden md:inline ml-1"},"Nueva Entrada",-1),Ze=[Je,Ye],et={class:"relative z-30"},tt=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1),st={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-lg z-50"},at=["onClick"],ot={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},nt={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},lt={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},rt={class:"sticky top-0 z-10 bg-gray-50"},it=t("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),ct=[it],dt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"STOCK ACTUAL",-1),ut=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ COMPRA",-1),pt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ VENTA",-1),ht=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"% Gan.",-1),mt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ Gan.",-1),_t=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Estado",-1),xt={class:"bg-white divide-y divide-gray-200"},vt={key:0,class:"odd:bg-white even:bg-gray-100 group"},yt={class:"flex items-center gap-2"},gt=["onClick"],ft=t("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.16 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1),bt=[ft],wt=["title"],kt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},Ct={key:0,class:"text-xs text-gray-500 font-normal ml-1"},St={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},Et={key:0,class:"text-xs text-gray-500"},Nt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},Vt={key:0},qt={key:1,class:"text-gray-400 italic text-xs"},zt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},Lt={key:1,class:"text-gray-400 text-xs"},Tt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},Mt={key:1,class:"text-gray-400 text-xs"},$t={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Bt={class:"flex items-center gap-2"},It=t("svg",{class:"w-3 h-3 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t("polyline",{points:"16 17 21 12 16 7"}),t("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),Rt={class:"truncate"},Ut={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600 font-medium"},At={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600"},Ft={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600"},Ot={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm"},Pt={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm"},jt={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap"},Gt=t("td",{class:"px-3 py-2 sm:px-6 sm:py-3"},null,-1),Ht={key:0},Xt=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay productos para mostrar. ",-1),Qt=[Xt],Wt={class:"p-6"},Dt={class:"text-lg font-medium text-gray-900 mb-4"},Kt={key:0},Jt={key:1},Yt={key:0},Zt={key:0,class:"mt-4 max-h-60 overflow-y-auto border rounded-md"},es=["onClick"],ts={class:"font-medium"},ss={class:"text-xs text-gray-500"},as=t("div",{class:"text-indigo-600 opacity-0 group-hover:opacity-100 font-bold text-sm"},"SELECCIONAR",-1),os={key:1,class:"mt-4 text-gray-500 text-center text-sm"},ns={key:1,class:"max-h-[60vh] overflow-y-auto pr-2"},ls={key:0},rs={class:"bg-gray-50 p-4 rounded-md border text-sm grid gap-4"},is={class:"grid grid-cols-2 gap-4"},cs=t("label",{class:"block text-gray-500 text-xs"},"Stock Actual",-1),ds={class:"font-bold text-lg"},us=t("label",{class:"block text-gray-700 font-bold mb-1"},"Agregar Stock (+)",-1),ps={class:"grid grid-cols-2 gap-4"},hs=t("label",{class:"block text-gray-500 text-xs"},"Precio Compra",-1),ms=["placeholder"],_s=t("label",{class:"block text-gray-500 text-xs"},"Precio Venta",-1),xs=["placeholder"],vs={class:"flex justify-end mt-2"},ys=["disabled"],gs={class:"font-bold text-gray-800 border-b pb-2 mb-2 bg-gray-50 -mx-3 -mt-3 px-3 pt-2 text-sm"},fs={key:0,class:"text-gray-400 font-normal text-xs"},bs={class:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end"},ws={class:"md:col-span-1"},ks=t("label",{class:"block text-gray-400 text-[10px] uppercase"},"Actual",-1),Cs={class:"font-bold"},Ss={class:"md:col-span-2"},Es=t("label",{class:"block text-gray-700 text-xs font-bold mb-1"},"Sumar (+)",-1),Ns=["onUpdate:modelValue"],Vs={class:"md:col-span-2"},qs=t("label",{class:"block text-gray-500 text-[10px] uppercase"},"$ Compra",-1),zs=["onUpdate:modelValue","title"],Ls={class:"md:col-span-2 flex gap-2"},Ts={class:"flex-1"},Ms=t("label",{class:"block text-gray-500 text-[10px] uppercase"},"$ Venta",-1),$s=["onUpdate:modelValue","title"],Bs=["onClick","disabled"],Is=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1),Rs=[Is],me="inv_firstcol_w_px",Us=90,As=320,Hs={__name:"Index",props:{products:Object,filters:Object},setup($){const P=$,B=d(!!P.filters?.search),q=d(P.filters?.search||""),v=d(P.filters?.status||""),J=d(null),I=d(!1),j=d({}),G=[{value:"",label:"Todos"},{value:"out_of_stock",label:"Agotados"},{value:"low_stock",label:"¡Pocas unidades!"}],_e=de(()=>(G.find(s=>s.value===v.value)||G[0]).label),xe=async()=>{B.value=!B.value,B.value?(await O(),J.value?.focus()):(q.value="",H())},H=()=>{he.get(route("admin.inventory.index"),{search:q.value||void 0,status:v.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})};let Y;Ne(q,()=>{clearTimeout(Y),Y=setTimeout(()=>H(),350)});const ve=s=>{v.value=s,I.value=!1,H()},ye=s=>{if(!v.value)return!0;const a=Number(s.quantity)||0,e=Number(s.alert)||0;return v.value==="out_of_stock"?a<=0:v.value==="low_stock"?e>0&&a>0&&a<=e:!0},R=s=>{const a=Number(s.stock)||0,e=Number(s.alert)||0;return a<=0?{text:"Agotado",class:"bg-red-100 text-red-800"}:e>0&&a<=e?{text:"¡Pocas unidades!",class:"bg-yellow-100 text-yellow-800"}:{text:"En Stock",class:"bg-green-100 text-green-800"}},y=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(Number(s||0)),k=(s,a)=>{const e=Number(s||0),i=Number(a||0);return!e||!i||e<=0?null:Number(((i-e)/e*100).toFixed(2))},C=(s,a)=>{const e=Number(s||0),i=Number(a||0);if(!e||!i||e<=0)return null;const n=i-e;return n>=0?n:null},ge=s=>Object.entries(s).map(([a,e])=>`${a}: ${e}`).join(", "),fe=s=>{j.value[s]=!j.value[s]},Z=s=>!!j.value[s],h=s=>s.variants&&s.variants.length>0,ee=s=>{let a=ge(s.options||{});return s.sku&&(a+=` (SKU: ${s.sku})`),a},X=s=>h(s)?s.variants.reduce((a,e)=>a+(Number(e.stock)||0),0):Number(s.quantity)||0,be=s=>{if(!h(s))return y(s.purchase_price);const a=s.variants.reduce((e,i)=>{const n=Number(i.stock)||0,f=Number(i.purchase_price)||0;return e+n*f},0);return y(a)},Q=d(!1),g=d(""),z=d([]),o=d(null),S=d(!1),we=()=>{g.value="",z.value=[],o.value=null,Q.value=!0,O(()=>document.getElementById("quick-search-input")?.focus())},te=()=>{Q.value=!1},W=()=>{g.value.length<2||Me.get(route("admin.inventory.search",{q:g.value})).then(s=>{z.value=s.data}).catch(s=>console.error(s))};let se;const ke=()=>{if(clearTimeout(se),g.value.length<2){z.value=[];return}se=setTimeout(W,300)},Ce=s=>{o.value=JSON.parse(JSON.stringify(s)),o.value.variants&&o.value.variants.length>0?o.value.variants.forEach(a=>{a.qty_add="",a.new_price=a.price,a.new_purchase_price=a.purchase_price}):(o.value.qty_add="",o.value.new_price=o.value.price,o.value.new_purchase_price=o.value.purchase_price)},Se=()=>{o.value=null,O(()=>document.getElementById("quick-search-input")?.focus()),W()},ae=(s,a,e,i,n)=>{if(S.value)return;const f=Number(e)||0;!e&&i===void 0&&n===void 0||(S.value=!0,he.post(route("admin.inventory.quick-update"),{id:s,type:a,quantity_add:f,purchase_price:i,price:n},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{if(oe("success","Éxito","Inventario actualizado correctamente."),W(),a==="product"&&o.value&&o.value.id===s)f>0&&(o.value.quantity=(Number(o.value.quantity)||0)+f),o.value.qty_add="",i&&(o.value.purchase_price=i),n&&(o.value.price=n);else if(a==="variant"&&o.value){const N=o.value.variants.find(Ee=>Ee.id===s);N&&(f>0&&(N.stock=(Number(N.stock)||0)+f),N.qty_add="",i&&(N.purchase_price=i),n&&(N.price=n))}S.value=!1},onError:()=>{S.value=!1,oe("error","Error","No se pudo actualizar el inventario.")}}))},m=d({show:!1,type:"success",title:"",message:""}),oe=(s,a,e)=>{m.value={show:!0,type:s,title:a,message:e},s==="success"&&setTimeout(()=>{m.value.show=!1},1500)},U=d(null),ne=d(!1),le=d(!1),L=()=>{const s=U.value;if(!s)return;const a=s.scrollWidth-s.clientWidth,e=s.scrollLeft||0;ne.value=e>0,le.value=e<a-1};Ve(()=>{O(()=>L()),U.value?.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",L)}),qe(()=>{U.value?.removeEventListener("scroll",L),window.removeEventListener("resize",L)});const E=d(Number(localStorage.getItem(me))||180),D=de(()=>({width:E.value+"px",minWidth:E.value+"px",maxWidth:E.value+"px"}));let re=0,ie=0;const A=s=>{const a=s.touches?s.touches[0].clientX:s.clientX,e=Math.max(Us,Math.min(As,ie+(a-re)));E.value=e},F=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",F);try{localStorage.setItem(me,String(E.value))}catch{}},ce=s=>{re=s.touches?s.touches[0].clientX:s.clientX,ie=E.value,document.addEventListener("mousemove",A,{passive:!1}),document.addEventListener("mouseup",F),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",F)};return(s,a)=>(r(),l(w,null,[b(ze(Le),{title:"Gestión de Inventario"}),b($e,null,{header:T(()=>[Ue]),default:T(()=>[t("div",Ae,[t("div",Fe,[t("div",Oe,[t("div",Pe,[t("div",je,[t("div",Ge,[t("button",{type:"button",onClick:xe,class:"p-2 rounded hover:bg-gray-100 transition"},Xe),b(ue,{name:"fade-slide"},{default:T(()=>[B.value?(r(),l("div",Qe,[p(t("input",{ref_key:"searchInputRef",ref:J,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),type:"text",placeholder:"Buscar producto...",class:"w-64 md:w-80 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,q.value]])])):u("",!0)]),_:1})]),t("div",We,[t("a",{href:s.route("admin.inventory.export"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[Ke,V(" Exportar a Excel ")],8,De),t("button",{type:"button",onClick:we,class:"inline-flex items-center px-3 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-800 transition ease-in-out duration-150",title:"Entrada Rápida"},Ze),t("div",et,[t("button",{type:"button",onClick:a[1]||(a[1]=e=>I.value=!I.value),class:"inline-flex items-center gap-2 px-3 py-2 border rounded-md shadow-sm hover:bg-gray-50"},[t("span",null,c(_e.value),1),tt]),b(ue,{name:"fade-slide"},{default:T(()=>[I.value?(r(),l("ul",st,[(r(),l(w,null,M(G,e=>t("li",{key:e.value},[t("button",{type:"button",onClick:i=>ve(e.value),class:x(["w-full text-left px-3 py-2 hover:bg-gray-100",{"font-semibold text-indigo-600":e.value===v.value}])},c(e.label),11,at)])),64))])):u("",!0)]),_:1})])])]),t("div",{ref_key:"scrollBoxRef",ref:U,class:"relative overflow-x-auto w-full z-0"},[p(t("div",ot,null,512),[[pe,ne.value]]),p(t("div",nt,null,512),[[pe,le.value]]),t("table",lt,[t("thead",rt,[t("tr",null,[t("th",{class:"sticky left-0 z-20 bg-gray-50 px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:K(D.value)},[V(" Producto "),t("div",{onMousedown:ce,onTouchstart:Te(ce,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},ct,32)],4),dt,ut,pt,ht,mt,_t])]),t("tbody",xt,[(r(!0),l(w,null,M($.products.data,(e,i)=>(r(),l(w,{key:e.id},[ye(e)?(r(),l("tr",vt,[t("td",{class:"sticky left-0 z-10 px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r bg-[inherit]",style:K(D.value)},[t("div",yt,[e.variants&&e.variants.length>0?(r(),l("button",{key:0,type:"button",onClick:n=>fe(e.id),class:x(["p-1 rounded hover:bg-gray-200 text-gray-500 transition-transform duration-200",{"rotate-90":Z(e.id)}])},bt,10,gt)):u("",!0),t("span",{class:"truncate",title:e.name},c(e.name),9,wt)])],4),t("td",kt,[V(c(X(e))+" ",1),h(e)?(r(),l("span",Ct,"(Total)")):u("",!0)]),t("td",St,[V(c(be(e))+" ",1),h(e)?(r(),l("div",Et,"Inversión Total")):u("",!0)]),t("td",Nt,[h(e)?(r(),l("span",qt,"Ver variantes")):(r(),l("span",Vt,c(y(e.price)),1))]),t("td",zt,[h(e)?(r(),l("span",Lt,"—")):(r(),l("span",{key:0,class:x({"text-gray-500":k(e.purchase_price,e.price)===null})},c(k(e.purchase_price,e.price)!==null?k(e.purchase_price,e.price)+"%":"—"),3))]),t("td",Tt,[h(e)?(r(),l("span",Mt,"—")):(r(),l("span",{key:0,class:x({"text-gray-500":C(e.purchase_price,e.price)===null})},c(C(e.purchase_price,e.price)!==null?y(C(e.purchase_price,e.price)):"—"),3))]),t("td",$t,[t("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",R({stock:X(e),alert:e.alert||0}).class])},c(R({stock:X(e),alert:e.alert||0}).text),3)])])):u("",!0),Z(e.id)&&h(e)?(r(!0),l(w,{key:1},M(e.variants,n=>(r(),l("tr",{key:n.id,class:"bg-gray-50 border-b border-gray-100"},[t("td",{class:"sticky left-0 z-10 px-3 py-2 sm:px-6 sm:py-3 text-sm text-gray-500 border-r bg-gray-50",style:K({...D.value,paddingLeft:"2rem"})},[t("div",Bt,[It,t("span",Rt,c(ee(n)),1)])],4),t("td",Ut,c(Number(n.stock)||0),1),t("td",At,c(y(n.purchase_price||e.purchase_price)),1),t("td",Ft,c(y(n.price||e.price)),1),t("td",Ot,[t("span",{class:x({"text-gray-400":k(n.purchase_price||e.purchase_price,n.price||e.price)===null})},c(k(n.purchase_price||e.purchase_price,n.price||e.price)!==null?k(n.purchase_price||e.purchase_price,n.price||e.price)+"%":"—"),3)]),t("td",Pt,[t("span",{class:x({"text-green-600 font-medium":C(n.purchase_price||e.purchase_price,n.price||e.price)!==null})},c(C(n.purchase_price||e.purchase_price,n.price||e.price)!==null?y(C(n.purchase_price||e.purchase_price,n.price||e.price)):"—"),3)]),t("td",jt,[t("span",{class:x(["px-2 inline-flex text-[10px] leading-4 font-semibold rounded-full",R({stock:n.stock,alert:n.alert||0}).class])},c(R({stock:n.stock,alert:n.alert||0}).text),3)]),Gt]))),128)):u("",!0)],64))),128)),$.products.data.length===0?(r(),l("tr",Ht,Qt)):u("",!0)])])],512),b(Be,{class:"mt-6",links:$.products.links},null,8,["links"])])])])]),b(Ie,{show:Q.value,onClose:te},{default:T(()=>[t("div",Wt,[t("h2",Dt,[o.value?(r(),l("span",Jt,[t("button",{onClick:Se,class:"text-indigo-600 hover:underline mr-2"},"←"),V(" Editando: "+c(o.value.name),1)])):(r(),l("span",Kt,"Buscar Producto para Entrada Rápida"))]),o.value?(r(),l("div",ns,[!o.value.variants||o.value.variants.length===0?(r(),l("div",ls,[t("div",rs,[t("div",is,[t("div",null,[cs,t("div",ds,c(o.value.quantity),1)]),t("div",null,[us,p(t("input",{type:"number",min:"0","onUpdate:modelValue":a[3]||(a[3]=e=>o.value.qty_add=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8"},null,512),[[_,o.value.qty_add]])])]),t("div",ps,[t("div",null,[hs,p(t("input",{type:"number",min:"0","onUpdate:modelValue":a[4]||(a[4]=e=>o.value.new_purchase_price=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8",placeholder:o.value.purchase_price},null,8,ms),[[_,o.value.new_purchase_price]])]),t("div",null,[_s,p(t("input",{type:"number",min:"0","onUpdate:modelValue":a[5]||(a[5]=e=>o.value.new_price=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8",placeholder:o.value.price},null,8,xs),[[_,o.value.new_price]])])]),t("div",vs,[t("button",{onClick:a[6]||(a[6]=e=>ae(o.value.id,"product",o.value.qty_add,o.value.new_purchase_price,o.value.new_price)),disabled:S.value,class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50"}," Guardar ",8,ys)])])])):(r(!0),l(w,{key:1},M(o.value.variants,e=>(r(),l("div",{key:e.id,class:"mb-4 bg-white border rounded-md p-3 shadow-sm"},[t("div",gs,[V(c(ee(e))+" ",1),e.sku?(r(),l("span",fs,"("+c(e.sku)+")",1)):u("",!0)]),t("div",bs,[t("div",ws,[ks,t("div",Cs,c(e.stock),1)]),t("div",Ss,[Es,p(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.qty_add=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2"},null,8,Ns),[[_,e.qty_add]])]),t("div",Vs,[qs,p(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.new_purchase_price=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2",placeholder:"Heredado",title:"Heredado: "+(o.value.purchase_price||0)},null,8,zs),[[_,e.new_purchase_price]])]),t("div",Ls,[t("div",Ts,[Ms,p(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.new_price=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2",placeholder:"Heredado",title:"Heredado: "+(o.value.price||0)},null,8,$s),[[_,e.new_price]])]),t("button",{onClick:i=>ae(e.id,"variant",e.qty_add,e.new_purchase_price,e.new_price),disabled:S.value,class:"mb-[1px] p-2 bg-green-50 text-green-700 border border-green-200 rounded hover:bg-green-100 transition",title:"Guardar Variantes"},Rs,8,Bs)])])]))),128))])):(r(),l("div",Yt,[p(t("input",{id:"quick-search-input",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>g.value=e),onInput:ke,placeholder:"Escribe el nombre o escanea código...",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[_,g.value]]),z.value.length>0?(r(),l("div",Zt,[(r(!0),l(w,null,M(z.value,e=>(r(),l("div",{key:e.id,onClick:i=>Ce(e),class:"p-2 hover:bg-gray-100 cursor-pointer border-b last:border-b-0 flex justify-between items-center group"},[t("div",null,[t("div",ts,c(e.name),1),t("div",ss," Stock Total: "+c(e.variants&&e.variants.length>0?e.variants.reduce((i,n)=>i+(Number(n.stock)||0),0):e.quantity||0),1)]),as],8,es))),128))])):g.value.length>2?(r(),l("div",os," No se encontraron productos. ")):u("",!0)])),t("div",{class:"mt-6 flex justify-end"},[t("button",{onClick:te,class:"text-gray-500 hover:text-gray-700 mr-4"},"Cerrar")])])]),_:1},8,["show"]),b(Re,{show:m.value.show,type:m.value.type,title:m.value.title,message:m.value.message,primaryText:"Aceptar",onClose:a[7]||(a[7]=e=>m.value.show=!1),onPrimary:a[8]||(a[8]=e=>m.value.show=!1)},null,8,["show","type","title","message"])]),_:1})],64))}};export{Hs as default};
