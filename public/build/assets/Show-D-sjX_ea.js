import{_ as F}from"./AuthenticatedLayout-HuymfTgR.js";import{H as C,c as D,r as P,B as V,a,o,b as f,y as N,f as t,d as v,h as I,t as s,i,F as u,n as m,e as x,l as $,m as S}from"./app-BvE6yrCU.js";import{d as L,s as O}from"./pdfUtils-DsbPqZ9_.js";import"./AlertModal-DQ0yr3UK.js";import"./Modal-DOUVcKgR.js";const T={key:0,class:"min-h-screen bg-gray-50"},z={class:"bg-white border-b border-gray-200 px-6 py-4 no-print"},B={class:"flex items-center justify-between max-w-4xl mx-auto"},E={class:"font-semibold text-xl text-gray-800"},M={class:"flex gap-2"},q=["disabled"],A={key:0},U={key:1},G=t("span",{class:"hidden sm:inline"},"Descargar",-1),R=["disabled"],H={key:0},J={key:1},K=t("span",{class:"hidden sm:inline"},"Compartir",-1),Q=t("span",null,"ðŸ–¨ï¸",-1),W=t("span",{class:"hidden sm:inline"},"Imprimir",-1),X=[Q,W],Y=t("span",null,"â¬…ï¸",-1),Z=t("span",{class:"hidden sm:inline"},"Volver",-1),tt=[Y,Z],et={class:"py-12"},st={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},ot={class:"print-store-header"},at={key:0,class:"text-center text-2xl font-bold mb-6 pb-4 border-b-2 border-black"},nt={key:0,class:"watermark-container"},it={class:"watermark-text"},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},dt={class:"p-6"},ct={class:"mb-6"},rt=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),ut={class:"grid grid-cols-2 gap-4"},ht=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),_t={class:"font-medium"},mt=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),xt={class:"font-medium"},pt=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),yt={class:"font-medium"},bt=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),gt={class:"font-medium capitalize"},ft={key:0,class:"mt-4"},vt=t("p",{class:"text-sm text-gray-500"},"Notas",-1),wt={class:"font-medium"},kt={class:"mb-6"},jt=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Ft={class:"overflow-x-auto"},Ct={class:"min-w-full divide-y divide-gray-200"},Dt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),Pt={class:"bg-white divide-y divide-gray-200"},Vt={class:"px-4 py-3"},Nt={class:"font-medium"},It={key:0,class:"text-sm text-gray-500"},$t={class:"px-4 py-3"},St={class:"px-4 py-3"},Lt={key:0},Ot={class:"text-sm text-gray-400 line-through"},Tt={class:"font-medium"},zt={key:1},Bt={class:"px-4 py-3"},Et={key:0,class:"text-sm text-green-600 font-medium"},Mt={key:1,class:"text-sm text-gray-400"},qt={class:"px-4 py-3 font-medium"},At={class:"border-t pt-4"},Ut={class:"flex justify-end"},Gt={class:"w-64 space-y-2"},Rt={class:"flex justify-between"},Ht=t("span",null,"Subtotal:",-1),Jt={key:0,class:"flex justify-between text-red-600"},Kt=t("span",null,"Descuento manual:",-1),Qt={class:"flex justify-between text-lg font-bold pt-2 border-t"},Wt=t("span",null,"Total:",-1),Xt={class:"flex items-center justify-between"},Yt={class:"font-semibold text-xl text-gray-800 leading-tight"},Zt={class:"flex gap-2"},te=["disabled"],ee={key:0},se={key:1},oe=t("span",{class:"hidden sm:inline"},"Descargar",-1),ae=["disabled"],ne={key:0},ie={key:1},le=t("span",{class:"hidden sm:inline"},"Compartir",-1),de=t("span",null,"ðŸ–¨ï¸",-1),ce=t("span",{class:"hidden sm:inline"},"Imprimir",-1),re=[de,ce],ue=t("span",null,"â¬…ï¸",-1),he=t("span",{class:"hidden sm:inline"},"Volver",-1),_e={class:"py-12"},me={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},xe={class:"print-store-header"},pe={class:"flex items-center justify-center gap-4 mb-6 pb-4 border-b-2 border-black"},ye=["src"],be={key:1,class:"text-3xl font-bold"},ge={key:0,class:"watermark-container"},fe={class:"watermark-text"},ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},we={class:"p-6"},ke={class:"mb-6"},je=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),Fe={class:"grid grid-cols-2 gap-4"},Ce=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),De={class:"font-medium"},Pe=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),Ve={class:"font-medium"},Ne=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),Ie={class:"font-medium"},$e=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),Se={class:"font-medium capitalize"},Le={key:0,class:"mt-4"},Oe=t("p",{class:"text-sm text-gray-500"},"Notas",-1),Te={class:"font-medium"},ze={class:"mb-6"},Be=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Ee={class:"overflow-x-auto"},Me={class:"min-w-full divide-y divide-gray-200"},qe=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),Ae={class:"bg-white divide-y divide-gray-200"},Ue={class:"px-4 py-3"},Ge={class:"font-medium"},Re={key:0,class:"text-sm text-gray-500"},He={class:"px-4 py-3"},Je={class:"px-4 py-3"},Ke={key:0},Qe={class:"text-sm text-gray-400 line-through"},We={class:"font-medium"},Xe={key:1},Ye={class:"px-4 py-3"},Ze={key:0,class:"text-sm text-green-600 font-medium"},ts={key:1,class:"text-sm text-gray-400"},es={class:"px-4 py-3 font-medium"},ss={class:"border-t pt-4"},os={class:"flex justify-end"},as={class:"w-64 space-y-2"},ns={class:"flex justify-between"},is=t("span",null,"Subtotal:",-1),ls={key:0,class:"flex justify-between text-red-600"},ds=t("span",null,"Descuento manual:",-1),cs={class:"flex justify-between text-lg font-bold pt-2 border-t"},rs=t("span",null,"Total:",-1),us={id:"invoice-content-show",class:"fixed top-0 left-0 w-[80mm] bg-white z-[-100] opacity-0 pointer-events-none"},hs={class:"bg-white text-black p-2 font-mono text-[11px] leading-tight",style:{width:"80mm",margin:"0 auto","font-family":"'Courier New', Courier, monospace"}},_s={class:"text-center mb-4"},ms=["src"],xs={class:"font-bold text-base uppercase mb-1"},ps={class:"text-[10px] space-y-0.5",style:{"font-size":"10px"}},ys={key:0},bs={key:1,class:"whitespace-normal"},gs={key:2,class:"whitespace-normal"},fs={key:3,class:"whitespace-normal break-words"},vs=t("div",{class:"border-b-2 border-dashed border-black my-2"},null,-1),ws={key:0},ks={class:"mb-3 text-[10px] space-y-1"},js={key:0},Fs={class:"font-bold"},Cs={key:1},Ds={key:2},Ps=t("div",{class:"border-b border-dashed border-black my-2"},null,-1),Vs={class:"mb-4"},Ns={class:"flex justify-between font-bold items-start"},Is={class:"w-[70%] leading-tight"},$s={class:"whitespace-nowrap"},Ss={class:"flex flex-col text-[10px] text-gray-600 pl-2 mt-0.5"},Ls={key:0,class:"text-xs text-gray-500 italic"},Os=t("div",{class:"border-b-2 border-dashed border-black my-2"},null,-1),Ts={class:"space-y-1 text-right"},zs={key:0,class:"flex justify-between text-[10px]"},Bs=t("span",null,"Subtotal",-1),Es={key:1,class:"flex justify-between text-[10px]"},Ms=t("span",null,"Descuento",-1),qs={class:"flex justify-between text-xl font-bold mt-2"},As=t("span",null,"TOTAL",-1),Us={class:"flex justify-between text-[10px] mt-2 pt-1 border-dotted border-t border-gray-400"},Gs=t("span",null,"MÃ©todo Pago",-1),Rs={class:"capitalize"},Hs={class:"text-center mt-6 text-[10px] space-y-1 mb-4"},Js=t("p",null,"Â¡Gracias por su compra!",-1),Ks=t("p",{class:"italic"},"Entrega este recibo para retirar tu orden",-1),Qs={key:0,class:"mt-2 pt-2 border-t border-dotted border-gray-300"},Ws=t("p",{class:"font-bold"},"Notas:",-1),so={__name:"Show",props:{sale:Object,store:Object},setup(e){const d=l=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),r=e,w=C(),k=D(()=>(w.props.auth?.roles||[]).includes("physical-sales")),c=P(!1),p=async()=>{if(r.sale){c.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await L(l,`factura-${r.sale.sale_number}.pdf`)}catch(l){console.error(l),alert("Error al generar el PDF")}finally{c.value=!1}}},y=async()=>{if(r.sale){c.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await O(l,`factura-${r.sale.sale_number}.pdf`,`Factura #${r.sale.sale_number}`)}catch(l){console.error(l)}finally{c.value=!1}}},j=()=>new URLSearchParams(window.location.search).get("print")==="true",b=()=>{window.print()};return V(()=>{j()&&setTimeout(()=>{window.print()},500)}),(l,g)=>(o(),a(u,null,[f(v(I),{title:"Detalle de Venta"}),k.value?(o(),a("div",T,[t("div",z,[t("div",B,[t("h2",E," Venta #"+s(e.sale.sale_number),1),t("div",M,[t("button",{onClick:p,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1",disabled:c.value,title:"Descargar PDF"},[c.value?(o(),a("span",A,"â³")):(o(),a("span",U,"â¬‡ï¸")),G],8,q),t("button",{onClick:y,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1",disabled:c.value,title:"Compartir Factura"},[c.value?(o(),a("span",H,"â³")):(o(),a("span",J,"ðŸ”—")),K],8,R),t("button",{onClick:b,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1",title:"Imprimir"},X),t("button",{onClick:g[0]||(g[0]=n=>l.$inertia.visit(l.route("admin.reports.index",{type:"physical"}))),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center gap-1",title:"Volver"},tt)])])]),t("div",et,[t("div",st,[t("div",ot,[e.store?.name?(o(),a("h1",at,s(e.store.name),1)):i("",!0)]),e.store?.name?(o(),a("div",nt,[t("div",it,s(e.store.name),1)])):i("",!0),t("div",lt,[t("div",dt,[t("div",ct,[rt,t("div",ut,[t("div",null,[ht,t("p",_t,"#"+s(e.sale.sale_number),1)]),t("div",null,[mt,t("p",xt,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[pt,t("p",yt,s(e.sale.user?.name||"Administrador"),1)]),t("div",null,[bt,t("p",gt,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),a("div",ft,[vt,t("p",wt,s(e.sale.notes),1)])):i("",!0)]),t("div",kt,[jt,t("div",Ft,[t("table",Ct,[Dt,t("tbody",Pt,[(o(!0),a(u,null,m(e.sale.items,n=>(o(),a("tr",{key:n.id},[t("td",Vt,[t("p",Nt,s(n.product_name),1),n.variant_options?(o(),a("p",It,s(Object.entries(n.variant_options).map(([h,_])=>`${h}: ${_}`).join(", ")),1)):i("",!0)]),t("td",$t,s(n.quantity),1),t("td",St,[n.original_price&&n.original_price>n.unit_price?(o(),a("div",Lt,[t("p",Ot,s(d(n.original_price)),1),t("p",Tt,s(d(n.unit_price)),1)])):(o(),a("p",zt,s(d(n.unit_price)),1))]),t("td",Bt,[n.discount_percent>0?(o(),a("span",Et," -"+s(n.discount_percent)+"% ",1)):(o(),a("span",Mt,"-"))]),t("td",qt,s(d(n.subtotal)),1)]))),128))])])])]),t("div",At,[t("div",Ut,[t("div",Gt,[t("div",Rt,[Ht,t("span",null,"$"+s(parseFloat(e.sale.subtotal).toFixed(2)),1)]),e.sale.discount>0?(o(),a("div",Jt,[Kt,t("span",null,"-$"+s(parseFloat(e.sale.discount).toFixed(2)),1)])):i("",!0),t("div",Qt,[Wt,t("span",null,"$"+s(parseFloat(e.sale.total).toFixed(2)),1)])])])])])])])])])):(o(),N(F,{key:1},{header:x(()=>[t("div",Xt,[t("h2",Yt," Venta #"+s(e.sale.sale_number),1),t("div",Zt,[t("button",{onClick:p,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1 no-print",disabled:c.value,title:"Descargar PDF"},[c.value?(o(),a("span",ee,"â³")):(o(),a("span",se,"â¬‡ï¸")),oe],8,te),t("button",{onClick:y,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1 no-print",disabled:c.value,title:"Compartir Factura"},[c.value?(o(),a("span",ne,"â³")):(o(),a("span",ie,"ðŸ”—")),le],8,ae),t("button",{onClick:b,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 no-print flex items-center gap-1",title:"Imprimir"},re),f(v($),{href:l.route("admin.reports.index",{type:"physical"}),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 no-print flex items-center gap-1",title:"Volver"},{default:x(()=>[ue,he]),_:1},8,["href"])])])]),default:x(()=>[t("div",_e,[t("div",me,[t("div",xe,[t("div",pe,[e.store?.logo_url?(o(),a("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-20 w-auto object-contain"},null,8,ye)):i("",!0),e.store?.name?(o(),a("h1",be,s(e.store.name),1)):i("",!0)])]),e.store?.name?(o(),a("div",ge,[t("div",fe,s(e.store.name),1)])):i("",!0),t("div",ve,[t("div",we,[t("div",ke,[je,t("div",Fe,[t("div",null,[Ce,t("p",De,"#"+s(e.sale.sale_number),1)]),t("div",null,[Pe,t("p",Ve,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[Ne,t("p",Ie,s(e.sale.user?.name||"N/A"),1)]),t("div",null,[$e,t("p",Se,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),a("div",Le,[Oe,t("p",Te,s(e.sale.notes),1)])):i("",!0)]),t("div",ze,[Be,t("div",Ee,[t("table",Me,[qe,t("tbody",Ae,[(o(!0),a(u,null,m(e.sale.items,n=>(o(),a("tr",{key:n.id},[t("td",Ue,[t("p",Ge,s(n.product_name),1),n.variant_options?(o(),a("p",Re,s(Object.entries(n.variant_options).map(([h,_])=>`${h}: ${_}`).join(", ")),1)):i("",!0)]),t("td",He,s(n.quantity),1),t("td",Je,[n.original_price&&n.original_price>n.unit_price?(o(),a("div",Ke,[t("p",Qe,s(d(n.original_price)),1),t("p",We,s(d(n.unit_price)),1)])):(o(),a("p",Xe,s(d(n.unit_price)),1))]),t("td",Ye,[n.discount_percent>0?(o(),a("span",Ze," -"+s(n.discount_percent)+"% ",1)):(o(),a("span",ts,"-"))]),t("td",es,s(d(n.subtotal)),1)]))),128))])])])]),t("div",ss,[t("div",os,[t("div",as,[t("div",ns,[is,t("span",null,s(d(e.sale.subtotal)),1)]),e.sale.discount>0?(o(),a("div",ls,[ds,t("span",null,"-"+s(d(e.sale.discount)),1)])):i("",!0),t("div",cs,[rs,t("span",null,s(d(e.sale.total)),1)])])])])])])])])]),_:1})),t("div",us,[t("div",hs,[t("div",_s,[e.store?.logo_url?(o(),a("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-12 w-auto object-contain mx-auto mb-2 grayscale",crossorigin:"anonymous"},null,8,ms)):i("",!0),t("h2",xs,s(e.store?.name),1),t("div",ps,[e.store?.nit?(o(),a("p",ys,"NIT: "+s(e.store.nit),1)):i("",!0),e.store?.phone?(o(),a("p",bs,"Tel: "+s(e.store.phone),1)):i("",!0),e.store?.address?(o(),a("p",gs,s(e.store.address),1)):i("",!0),e.store?.email?(o(),a("p",fs,s(e.store.email),1)):i("",!0)])]),vs,e.sale?(o(),a("div",ws,[t("div",ks,[e.sale.user?.name?(o(),a("p",js,"Le atendiÃ³: "+s(e.sale.user.name),1)):i("",!0),t("p",null,"Fecha: "+s(new Date(e.sale.created_at).toLocaleString("es-CO")),1),t("p",null,[S("No. Fac: "),t("span",Fs,s(e.sale.sale_number),1)]),e.sale.customer_name?(o(),a("p",Cs,"Cliente: "+s(e.sale.customer_name),1)):i("",!0),e.sale.customer_nit?(o(),a("p",Ds,"CC/NIT: "+s(e.sale.customer_nit),1)):i("",!0)]),Ps,t("div",Vs,[(o(!0),a(u,null,m(e.sale.items,n=>(o(),a("div",{key:n.id,class:"mb-2 pb-1 border-b border-dotted border-gray-400 last:border-0"},[t("div",Ns,[t("span",Is,s(n.product_name),1),t("span",$s,s(d(n.subtotal)),1)]),t("div",Ss,[n.variant_options?(o(),a("div",Ls,s(Object.values(n.variant_options).join(" / ")),1)):i("",!0),t("span",null,s(n.quantity)+" x "+s(d(n.unit_price)),1)])]))),128))]),Os,t("div",Ts,[e.sale.discount>0?(o(),a("div",zs,[Bs,t("span",null,s(d(e.sale.subtotal)),1)])):i("",!0),e.sale.discount>0?(o(),a("div",Es,[Ms,t("span",null,"-"+s(d(e.sale.discount)),1)])):i("",!0),t("div",qs,[As,t("span",null,s(d(e.sale.total)),1)]),t("div",Us,[Gs,t("span",Rs,s(e.sale.payment_method),1)])]),t("div",Hs,[Js,Ks,e.sale.notes?(o(),a("div",Qs,[Ws,t("p",null,s(e.sale.notes),1)])):i("",!0)])])):i("",!0)])])],64))}};export{so as default};
