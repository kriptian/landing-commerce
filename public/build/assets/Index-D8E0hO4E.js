const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-e2cVyYlI.js","assets/app-B3zlBsWn.js","assets/app-BYEuMQum.css"])))=>i.map(i=>d[i]);
import{G as fe,c as W,r as h,u as Xe,B as ze,z as se,D as Ke,w as He,a as l,o as a,b as f,d as me,h as Ie,e as _,i as m,f as e,m as b,j as D,A as Ee,q as oe,p as X,F as M,n as O,t as r,x as ge,y as Ue,C as Qe,_ as Ge}from"./app-B3zlBsWn.js";import{_ as We}from"./AuthenticatedLayout-BFAIDBlR.js";import{_ as z}from"./Modal-ZD1Pw1Yz.js";import{_ as ne}from"./SecondaryButton-OOhDUNiQ.js";import{_ as ae}from"./PrimaryButton-CVsiQ3V6.js";import"./AlertModal-Y7FTZv4U.js";const Je={key:0,class:"font-semibold text-xl text-gray-800 leading-tight"},Ye={key:0,class:"hidden lg:flex fixed inset-0 bg-white flex-row",style:{"margin-top":"0","z-index":"10"}},Ze={class:"w-2/3 h-full flex flex-col border-r border-gray-300"},et={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},tt={class:"flex items-center gap-3 mb-3"},st=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),ot={class:"flex-1 relative"},nt=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),at=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),lt=[at],rt={class:"flex items-center gap-2 overflow-x-auto"},it=["onClick"],ct={class:"flex-1 overflow-y-auto p-4"},dt={key:0,class:"text-center py-12 text-gray-500"},ut=e("p",null,"No se encontraron productos",-1),ht=[ut],vt={key:1,class:"grid grid-cols-4 xl:grid-cols-5 gap-3"},_t=["onClick"],pt={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},ft=["src","alt"],mt={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),xt=[gt],bt={class:"p-2 flex-1 flex flex-col"},yt={class:"mb-1"},wt={class:"text-xs line-through text-red-600"},kt={class:"text-sm font-bold text-green-600"},Ct={key:1,class:"text-sm font-bold text-gray-900"},Mt={class:"font-medium text-xs text-gray-900 line-clamp-2"},Tt={class:"w-1/3 h-full flex flex-col bg-white"},jt={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},St={class:"flex items-center gap-3"},$t=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Pt={class:"text-blue-700 font-semibold"},Et=e("span",{class:"text-blue-400"},"|",-1),Nt=["src","alt"],qt={key:1,class:"text-blue-700 font-medium text-sm"},Bt={class:"flex-1 overflow-y-auto px-3 py-2"},Ft={key:0,class:"text-center py-12 text-gray-500"},Dt=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Ot=e("p",null,"El carrito est√° vac√≠o",-1),Rt=[Dt,Ot],Lt={key:1,class:"overflow-x-auto"},Vt={class:"w-full text-sm"},At=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-semibold text-gray-700"},"Producto"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"},"Stock"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-20"},"Cant"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-28"},"Valor"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-24"},"% Desc"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-32"},"SubTotal"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"})])],-1),Xt={class:"divide-y divide-gray-200 bg-white"},zt={class:"px-3 py-3 text-left align-middle"},Kt={class:"min-w-0"},Ht={class:"font-medium text-sm text-gray-900 truncate"},It={key:0,class:"text-xs text-gray-500 truncate"},Ut={class:"px-3 py-3 text-center align-middle w-16"},Qt={class:"px-3 py-3 text-center align-middle w-20"},Gt=["value","onChange"],Wt={class:"px-3 py-3 text-right align-middle w-28"},Jt=["value","onChange"],Yt={class:"px-3 py-3 text-right align-middle w-24"},Zt=["value","onChange","onClick"],es={class:"px-3 py-3 text-right align-middle w-32"},ts={class:"font-semibold text-gray-900 text-sm"},ss={class:"px-3 py-3 text-center align-middle w-16"},os=["onClick"],ns=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),as=[ns],ls={key:0,class:"border-t border-gray-200 px-4 py-3 bg-gray-50 space-y-3 flex-shrink-0"},rs={class:"flex justify-between text-sm"},is=e("span",{class:"text-gray-700"},"Total Bruto:",-1),cs={class:"font-medium"},ds={class:"flex justify-between text-sm items-center"},us=e("span",{class:"text-gray-700"},"Descuento:",-1),hs=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),vs={class:"pt-2 border-t border-gray-300"},_s={class:"flex justify-between items-center mb-3"},ps=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),fs={class:"text-base font-bold text-green-600"},ms={class:"flex gap-3"},gs={key:1,class:"lg:hidden fixed inset-0 bg-white flex flex-col",style:{"margin-top":"0","z-index":"10"}},xs={class:"bg-blue-500 px-4 py-3 flex-shrink-0"},bs={class:"flex items-center justify-between"},ys={class:"flex items-center gap-2"},ws=e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),ks={class:"text-white font-semibold"},Cs=e("span",{class:"text-white"},"|",-1),Ms=["src","alt"],Ts={key:1,class:"text-white font-medium text-sm"},js={class:"bg-gray-100 px-4 py-3 flex-shrink-0 border-b border-gray-200"},Ss={class:"flex items-center gap-2"},$s=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Ps=[$s],Es={class:"flex-1 relative"},Ns=e("svg",{class:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),qs=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),Bs=[qs],Fs={key:0,class:"mt-3 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto"},Ds=["onClick"],Os={class:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center flex-shrink-0"},Rs=["src","alt"],Ls={key:1,class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vs=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),As=[Vs],Xs={class:"flex-1 min-w-0"},zs={class:"font-medium text-sm text-gray-900 truncate"},Ks={class:"text-xs line-through text-red-600"},Hs={class:"text-xs text-green-600 font-semibold"},Is={key:1,class:"text-xs text-gray-500"},Us=e("svg",{class:"w-5 h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Qs=e("div",{class:"bg-gray-200 px-4 py-2 flex-shrink-0"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})])]),e("h3",{class:"text-gray-700 font-semibold text-sm"},"INFORMACION DE LA VENTA")])],-1),Gs={class:"flex-1 overflow-y-auto bg-white"},Ws={key:0,class:"text-center py-12 text-gray-500"},Js=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Ys=e("p",null,"No hay productos en el carrito",-1),Zs=e("p",{class:"text-xs text-gray-400 mt-2"},"Busca o escanea un producto para comenzar",-1),eo=[Js,Ys,Zs],to={key:1,class:"divide-y divide-gray-200"},so={class:"flex items-start justify-between gap-3"},oo={class:"flex-1 min-w-0"},no={class:"flex items-center gap-2 mb-1"},ao={key:0,class:"text-xs text-red-600 font-semibold"},lo={class:"font-medium text-sm text-gray-900 mb-1"},ro={class:"text-xs text-gray-500"},io={class:"flex items-center gap-3"},co={class:"flex flex-col items-center gap-1"},uo=e("span",{class:"text-xs text-gray-500"},"Cant",-1),ho={class:"flex items-center gap-1"},vo=["onClick"],_o={class:"w-10 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full font-semibold text-sm"},po=["onClick"],fo={class:"flex flex-col items-end gap-1 min-w-[80px]"},mo=e("span",{class:"text-xs text-gray-500"},"Total",-1),go={class:"font-semibold text-sm text-gray-900"},xo=["onClick"],bo=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),yo=[bo],wo=["onClick"],ko=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Co=[ko],Mo={key:0,class:"border-t border-gray-300 bg-white px-4 py-4 flex-shrink-0"},To={class:"space-y-2 mb-4"},jo={class:"flex justify-between text-sm"},So=e("span",{class:"text-gray-700"},"Subtotal:",-1),$o={class:"font-medium text-green-600"},Po={class:"flex justify-between text-sm"},Eo=e("span",{class:"text-gray-700"},"Descuento:",-1),No=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),qo={class:"flex justify-between items-center pt-2 border-t border-gray-300"},Bo=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),Fo={class:"text-base font-bold text-green-600"},Do={class:"flex gap-3"},Oo={class:"p-6"},Ro=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmar Venta",-1),Lo={class:"mb-4"},Vo=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"M√©todo de Pago",-1),Ao=e("option",{value:"efectivo"},"Efectivo",-1),Xo=e("option",{value:"tarjeta"},"Tarjeta",-1),zo=e("option",{value:"transferencia"},"Transferencia",-1),Ko=e("option",{value:"mixto"},"Mixto",-1),Ho=[Ao,Xo,zo,Ko],Io={class:"mb-4"},Uo=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notas (Opcional)",-1),Qo={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded"},Go=e("h4",{class:"text-sm font-semibold text-green-800 mb-2"},"Descuentos por Producto:",-1),Wo={class:"space-y-1"},Jo={class:"text-green-700"},Yo={class:"text-green-700 font-medium"},Zo={class:"mb-4 p-3 bg-gray-50 rounded"},en={class:"flex justify-between mb-2"},tn=e("span",null,"Subtotal:",-1),sn={key:0,class:"flex justify-between mb-2 text-red-600"},on={class:"flex justify-between font-bold text-lg pt-2 border-t"},nn=e("span",null,"Total:",-1),an={class:"flex gap-3"},ln={class:"p-6"},rn=e("h2",{class:"text-lg font-semibold mb-4 text-green-600"},"¬°Venta registrada exitosamente!",-1),cn={key:0,class:"mb-4"},dn={class:"text-sm text-gray-600 mb-2"},un={class:"font-semibold"},hn={class:"text-sm text-gray-600 mb-2"},vn={class:"font-semibold"},_n={class:"flex gap-3"},pn={class:"p-6"},fn=e("h2",{class:"text-lg font-semibold mb-4"},"Escanear C√≥digo de Barras",-1),mn=e("p",{class:"text-sm text-gray-600 mb-4"}," Apunta la c√°mara hacia el c√≥digo de barras. El producto se agregar√° autom√°ticamente al carrito. ",-1),gn=e("div",{id:"barcode-scanner-sales",class:"w-full rounded-lg overflow-hidden",style:{"min-height":"300px"}},null,-1),xn={class:"p-6"},bn={class:"flex items-center justify-between mb-4"},yn={class:"text-lg font-semibold"},wn=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),kn=[wn],Cn={class:"space-y-4"},Mn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cantidad",-1),Tn=["value"],jn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valor",-1),Sn=["value"],$n=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),Pn=e("option",{value:"percentage"},"Porcentaje",-1),En=e("option",{value:"amount"},"Monto",-1),Nn=[Pn,En],qn={class:"block text-sm font-medium text-gray-700 mb-2"},Bn=["step","max","placeholder"],Fn={key:0,class:"p-4 bg-gray-50 rounded-lg space-y-2"},Dn={class:"flex justify-between text-sm"},On=e("span",{class:"text-gray-700"},"Subtotal:",-1),Rn={class:"font-semibold"},Ln={class:"flex justify-between text-sm"},Vn=e("span",{class:"text-gray-700"},"Descuento:",-1),An={class:"font-semibold"},Xn={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},zn=e("span",null,"Total:",-1),Kn={class:"flex gap-3 mt-6"},Hn={class:"p-6 max-h-[90vh] flex flex-col"},In={class:"flex items-center justify-between mb-4 flex-shrink-0"},Un=e("h2",{class:"text-lg font-semibold"},"Cat√°logo de Productos",-1),Qn=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Gn=[Qn],Wn={class:"mb-4 flex items-center gap-2 overflow-x-auto pb-2 flex-shrink-0"},Jn=["onClick"],Yn={class:"flex-1 overflow-y-auto"},Zn={key:0,class:"text-center py-12 text-gray-500"},ea=e("p",null,"No se encontraron productos",-1),ta=[ea],sa={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},oa=["onClick"],na={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},aa=["src","alt"],la={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ra=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),ia=[ra],ca={class:"p-2 flex-1 flex flex-col"},da={class:"mb-1"},ua={class:"text-xs line-through text-red-600"},ha={class:"text-sm font-bold text-green-600"},va={key:1,class:"text-sm font-bold text-gray-900"},_a={class:"font-medium text-xs text-gray-900 line-clamp-2"},pa={class:"p-6"},fa={class:"flex items-center justify-between mb-4"},ma=e("h2",{class:"text-lg font-semibold"},"Descuento general de la factura",-1),ga=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),xa=[ga],ba={class:"space-y-4"},ya=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),wa=e("option",{value:"percentage"},"Porcentaje",-1),ka=e("option",{value:"amount"},"Monto",-1),Ca=[wa,ka],Ma={class:"block text-sm font-medium text-gray-700 mb-2"},Ta=["step","max","placeholder"],ja={class:"p-4 bg-gray-50 rounded-lg space-y-2"},Sa={class:"flex justify-between text-sm"},$a=e("span",{class:"text-gray-700"},"Subtotal:",-1),Pa={class:"font-semibold"},Ea={class:"flex justify-between text-sm"},Na=e("span",{class:"text-gray-700"},"Descuento:",-1),qa={class:"font-semibold"},Ba={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},Fa=e("span",null,"Total:",-1),Da={class:"flex gap-3 mt-6"},Oa={class:"p-6"},Ra={class:"flex items-center justify-between mb-4"},La=e("h2",{class:"text-lg font-semibold text-red-600"},"‚ö†Ô∏è Stock Insuficiente",-1),Va=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Aa=[Va],Xa={class:"mb-4"},za=["innerHTML"],Ka={class:"flex justify-end"},Ja={__name:"Index",props:{sales:Object,stats:Object,filters:Object,products:Array,categories:Array,store:Object},setup(g){const q=g,he=fe(),Ne=W(()=>(he.props.auth?.roles||[]).includes("physical-sales")),xe=()=>{Ne.value?se.post(route("logout"),{},{onSuccess:()=>{window.location.href=route("login")},onError:()=>{window.location.href=route("login")}}):se.visit(route("dashboard"))},ve=h("sales");Xe({start_date:q.filters?.start_date||"",end_date:q.filters?.end_date||"",search:q.filters?.search||""});const be=h("");h(!1);const K=h(null),le=h(!1),d=o=>!o&&o!==0?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),qe=o=>{o&&se.visit(route("admin.physical-sales.show",o.id)+"?print=true")};W(()=>{if(!q.sales||!q.sales.data)return[];const o=new Date;o.setHours(0,0,0,0);const s=new Date(o);s.setHours(23,59,59,999);let t=q.sales.data.filter(n=>{const i=new Date(n.created_at);return i>=o&&i<=s});if(be.value.trim()){const n=be.value.toLowerCase();t=t.filter(i=>i.sale_number.toLowerCase().includes(n))}return t});const c=h([]),p=h(""),N=h([]),ye=h(!1),J=h(!1),Be=h(""),H=h(!1),re=h("efectivo"),ie=h(""),P=h(0),T=h("amount"),j=h(null);h(null),h(!1),h(!1);const I=h(!1),U=h(!1),Y=h(!1),u=h(null),S=h("percentage"),$=h(0),R=h(!1),ce=h(""),L=h(null),_e=()=>{try{const o=new(window.AudioContext||window.webkitAudioContext),s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),s.start(o.currentTime),s.stop(o.currentTime+.2)}catch{}},B=W(()=>c.value.reduce((o,s)=>o+s.quantity*s.unit_price,0)),V=W(()=>T.value==="percentage"?B.value*P.value/100:P.value),Z=W(()=>B.value-V.value),de=W(()=>{if(!q.products)return[];let o=q.products;if(j.value&&(o=o.filter(s=>s.category_id===j.value)),p.value.trim()){const s=p.value.toLowerCase();o=o.filter(t=>t.name.toLowerCase().includes(s)||t.id.toString().includes(s)||t.barcode&&t.barcode.toLowerCase().includes(s))}return o}),ue=async()=>{if(!p.value.trim()){N.value=[];return}ye.value=!0;try{const s=(await window.axios.get(route("admin.physical-sales.search-products"),{params:{q:p.value}})).data?.products||[];N.value=s,s.length===1&&window.innerWidth<1024&&(Q(s[0]),p.value="",N.value=[])}catch{N.value=[]}finally{ye.value=!1}},we=async o=>{const s=o.replace(/\s+/g,"").trim();if(s)try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});t.data?.product?(Q(t.data.product),Be.value=""):alert("Producto no encontrado con ese c√≥digo de barras")}catch{alert("Error al buscar producto")}},E=(o,s=null)=>{const t=s?.price??o.price;let n=parseFloat(t),i=0;return o.promo_active&&o.promo_discount_percent>0&&(i=parseFloat(o.promo_discount_percent),n=Math.round(n*(100-i)/100)),{originalPrice:parseFloat(t),finalPrice:n,discountPercent:i}},Q=(o,s=null)=>{const t=c.value.find(n=>n.product_id===o.id&&n.variant_id===(s?.id||null));if(t)t.quantity+=1;else{const n=E(o,s);c.value.push({product_id:o.id,product_name:o.name,variant_id:s?.id||null,variant_options:s?.options||null,quantity:1,unit_price:n.finalPrice,original_price:n.originalPrice,discount_percent:n.discountPercent,product:o,variant:s})}p.value="",N.value=[]},F=o=>o.variant&&o.variant.stock!==null&&o.variant.stock!==void 0?o.variant.stock:o.product?o.product.track_inventory===!1?"Ilimitado":o.product.quantity!==null&&o.product.quantity!==void 0?o.product.quantity:"N/A":"N/A",pe=o=>{const s=F(o);return s==="Ilimitado"||s==="N/A"?!0:s>=o.quantity},Fe=o=>{if(!pe(o))return"bg-red-50";const s=F(o);return s===0||typeof s=="number"&&s<o.quantity?"bg-yellow-50":""},ke=o=>{const s=F(o);return s===0||typeof s=="number"&&s<o.quantity?"text-red-600 font-semibold text-xs":typeof s=="number"&&s<5?"text-yellow-600 font-medium text-xs":"text-gray-600 text-xs"},Ce=o=>{c.value.splice(o,1)},Me=(o,s)=>{const t=c.value[o],n=t.quantity+s;if(n>0){const i=F(t);if(typeof i=="number"&&n>i){ce.value=`No hay suficiente stock para el producto "${t.product_name}".<br><br>Stock disponible: ${i}<br>Cantidad solicitada: ${n}`,R.value=!0;return}t.quantity=n}},De=(o,s)=>{const t=parseInt(s.target.value);if(t>0){const n=c.value[o],i=F(n);if(typeof i=="number"&&t>i){ce.value=`No hay suficiente stock para el producto "${n.product_name}".<br><br>Stock disponible: ${i}<br>Cantidad solicitada: ${t}`,R.value=!0,s.target.value=n.quantity;return}c.value[o].quantity=t}},Te=o=>{u.value=o;const s=c.value[o];s.discount_percent>0?(S.value="percentage",$.value=s.discount_percent):(S.value="percentage",$.value=0),I.value=!0},Oe=()=>{if(u.value===null)return;const o=c.value[u.value];o.original_price||(o.original_price=o.unit_price);const s=o.original_price;if(S.value==="percentage"){const t=Math.min(100,Math.max(0,$.value));o.discount_percent=t,o.unit_price=s*(1-t/100)}else{const t=Math.min(s,Math.max(0,$.value));o.discount_percent=t/s*100,o.unit_price=s-t}I.value=!1,u.value=null,$.value=0},je=()=>{U.value=!0},Re=()=>{U.value=!1},Le=(o,s)=>{const t=parseFloat(s.target.value);if(t>=0){const n=c.value[o];n.original_price=t,n.discount_percent>0?n.unit_price=t*(1-n.discount_percent/100):n.unit_price=t}},Ve=(o,s)=>{const t=parseFloat(s.target.value)||0,n=c.value[o],i=Math.min(100,Math.max(0,t));n.original_price||(n.original_price=n.unit_price),n.discount_percent=i,n.unit_price=n.original_price*(1-i/100)},Se=async()=>{try{J.value=!0,await Qe();const{Html5Qrcode:o}=await Ge(async()=>{const{Html5Qrcode:n}=await import("./index-e2cVyYlI.js");return{Html5Qrcode:n}},__vite__mapDeps([0,1,2])),s=document.getElementById("barcode-scanner-sales");if(!s)return;L.value=new o(s.id);const t={fps:10,qrbox:{width:250,height:250}};try{await L.value.start({facingMode:"environment"},t,async n=>{_e(),await we(n),ee()},n=>{})}catch{try{await L.value.start({facingMode:"user"},t,async i=>{_e(),await we(i),ee()},i=>{})}catch{alert("No se pudo acceder a la c√°mara. Por favor, permite el acceso a la c√°mara en la configuraci√≥n del navegador."),J.value=!1}}}catch{alert("Error al inicializar el esc√°ner. Por favor, intenta nuevamente."),J.value=!1}},ee=async()=>{if(L.value){try{await L.value.stop(),await L.value.clear()}catch{}L.value=null}J.value=!1},te=()=>{const o=document.head.querySelector('meta[name="csrf-token"]');if(o&&o.content)return window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=o.content,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=o.content),o.content;const t=(n=>{const x=`; ${document.cookie}`.split(`; ${n}=`);return x.length===2?x.pop().split(";").shift():null})("XSRF-TOKEN");if(t&&window.axios){const n=decodeURIComponent(t);return window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,n}return null};ze(()=>{setTimeout(()=>{te(),window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{te()},300)},100)}),se.on("finish",()=>{setTimeout(()=>{const s=fe().props.csrf_token;if(s){const t=document.head.querySelector('meta[name="csrf-token"]');t&&t.setAttribute("content",s),window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=s,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=s)}te(),window.updateCsrfToken&&window.updateCsrfToken()},200)});const Ae=async()=>{if(c.value.length===0){alert("El carrito est√° vac√≠o");return}const o=[];for(let t=0;t<c.value.length;t++){const n=c.value[t];if(!pe(n)){const i=F(n);o.push({name:n.product_name,requested:n.quantity,available:i})}}if(o.length>0){let t=`No se puede procesar la venta. Los siguientes productos no tienen stock suficiente:

`;o.forEach(n=>{t+=`‚Ä¢ ${n.name}: Solicitado ${n.requested}, Disponible ${n.available}
`}),ce.value=t.replace(/\n/g,"<br>"),R.value=!0;return}const s={items:c.value.map(t=>({product_id:t.product_id,variant_id:t.variant_id,quantity:t.quantity,unit_price:t.unit_price})),subtotal:B.value,tax:0,discount:V.value,total:Z.value,payment_method:re.value,notes:ie.value};try{if(!window.axios){alert("Error: No se pudo inicializar la conexi√≥n. Por favor, recarga la p√°gina.");return}let n=fe().props.csrf_token;if(n){const v=document.head.querySelector('meta[name="csrf-token"]');v&&v.setAttribute("content",n)}else n=te();if(n||(await new Promise(v=>setTimeout(v,200)),n=te()),!n){alert("Error: No se pudo obtener el token de seguridad. Por favor, recarga la p√°gina.");return}window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n;const i=()=>{const v=document.head.querySelector('meta[name="csrf-token"]');if(v&&v.content)return v.content;const y=(k=>{const Pe=`; ${document.cookie}`.split(`; ${k}=`);return Pe.length===2?Pe.pop().split(";").shift():null})("XSRF-TOKEN");return y?decodeURIComponent(y):null},x=async(v=0)=>{try{let w=i();if(!w&&v===0)try{const k=await window.axios.get(route("dashboard"),{headers:{"X-Requested-With":"XMLHttpRequest"}});await new Promise(C=>setTimeout(C,100)),w=i()}catch{}if(!w)throw new Error("No se pudo obtener el token CSRF. Por favor, recarga la p√°gina.");window.axios.defaults.headers.common["X-CSRF-TOKEN"]=w,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=w;const y=await window.axios.post(route("admin.physical-sales.store"),s,{headers:{"X-CSRF-TOKEN":w,"X-XSRF-TOKEN":w,"X-Requested-With":"XMLHttpRequest"}});if(y&&y.headers){const k=y.headers["x-csrf-token"]||y.headers["X-CSRF-TOKEN"];if(k){const C=document.head.querySelector('meta[name="csrf-token"]');C&&C.setAttribute("content",k),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=k}}return y}catch(w){if(w.response){if(w.response.status===419&&v===0){const y=w.response.headers||{},k=y["x-csrf-token"]||y["X-CSRF-TOKEN"]||null;if(k){const C=document.head.querySelector('meta[name="csrf-token"]');C&&C.setAttribute("content",k),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=k}else{const C=i();C&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=C)}return await new Promise(C=>setTimeout(C,200)),await x(1)}}else if(v===0){const y=i();return y&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=y),await new Promise(k=>setTimeout(k,200)),await x(1)}throw w}},A=await x(),G=A.headers?.["x-csrf-token"]||A.headers?.["X-CSRF-TOKEN"];if(G){const v=document.head.querySelector('meta[name="csrf-token"]');v&&v.setAttribute("content",G),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=G}A.data&&A.data.success?(K.value=A.data.sale,H.value=!1,c.value=[],p.value="",P.value=0,T.value="amount",ie.value="",re.value="efectivo",j.value=null,window.updateCsrfToken&&window.updateCsrfToken(),le.value=!0,se.reload()):alert("Error: "+(A.data?.message||"No se pudo procesar la venta"))}catch(t){console.error("Error completo al procesar la venta:",{error:t,message:t.message,response:t.response,status:t.response?.status,data:t.response?.data,headers:t.response?.headers});let n="Error al procesar la venta";if(t.response){const i=t.response.status,x=t.response.data;i===419?(n="Tu sesi√≥n ha expirado. Por favor, recarga la p√°gina e intenta nuevamente.",window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{window.location.reload()},2e3)):i===422?x?.message?n=x.message:x?.errors?n=`Error de validaci√≥n:
${Object.entries(x.errors).map(([G,v])=>Array.isArray(v)?`${G}: ${v.join(", ")}`:`${G}: ${v}`).join(`
`)}`:n="Error de validaci√≥n. Verifica los datos e intenta nuevamente.":x?.message?n=x.message:n=`Error del servidor (${i}). Por favor, intenta nuevamente.`}else t.request?n="No se pudo conectar con el servidor. Verifica tu conexi√≥n a internet.":t.message&&(n=t.message);alert(n)}};Ke(()=>{ee()});let $e;return He(p,async o=>{clearTimeout($e);const s=o.replace(/\s+/g,"").trim();if(s.length>=8&&/^\d+$/.test(s))try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){Q(t.data.product),p.value="",_e();return}}catch{}$e=setTimeout(()=>{p.value.trim().length>=2?ue():N.value=[]},300)}),(o,s)=>(a(),l(M,null,[f(me(Ie),{title:"Ventas F√≠sicas"}),f(We,null,{header:_(()=>[ve.value!=="sales"?(a(),l("h2",Je,"Ventas F√≠sicas")):m("",!0)]),default:_(()=>[ve.value==="sales"?(a(),l("div",Ye,[e("div",Ze,[e("div",et,[e("div",tt,[e("button",{onClick:xe,class:"px-3 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100 text-sm font-medium flex items-center gap-2 border border-gray-200"},[st,b(" Salir ")]),e("div",ot,[D(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Ee(ue,["enter"])},null,544),[[oe,p.value]]),nt,e("button",{onClick:Se,class:"absolute right-2 top-1.5 p-1 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},lt)])]),e("div",rt,[e("button",{onClick:s[1]||(s[1]=t=>{j.value=null,p.value=""}),class:X(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",j.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(M,null,O(g.categories,t=>(a(),l("button",{key:t.id,onClick:n=>{j.value=t.id,p.value=""},class:X(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",j.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,it))),128))])]),e("div",ct,[de.value.length===0?(a(),l("div",dt,ht)):(a(),l("div",vt,[(a(!0),l(M,null,O(de.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>Q(t)},[e("div",pt,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,ft)):(a(),l("svg",mt,xt))]),e("div",bt,[e("div",yt,[t.promo_active&&t.promo_discount_percent>0?(a(),l(M,{key:0},[e("p",wt,r(d(E(t).originalPrice)),1),e("p",kt,r(d(E(t).finalPrice)),1)],64)):(a(),l("p",Ct,r(d(E(t).finalPrice)),1))]),e("h3",Mt,r(t.name),1)])],8,_t))),128))]))])]),e("div",Tt,[e("div",jt,[e("div",St,[$t,e("span",Pt,r(me(he).props.auth?.user?.name||"Usuario"),1),Et,g.store&&g.store.logo_url?(a(),l("img",{key:0,src:g.store.logo_url,alt:`Logo de ${g.store.name}`,class:"h-6 w-6 rounded-full object-cover"},null,8,Nt)):m("",!0),g.store?(a(),l("span",qt,r(g.store.name),1)):m("",!0)])]),e("div",Bt,[c.value.length===0?(a(),l("div",Ft,Rt)):(a(),l("div",Lt,[e("table",Vt,[At,e("tbody",Xt,[(a(!0),l(M,null,O(c.value,(t,n)=>(a(),l("tr",{key:n,class:X(["hover:bg-gray-50",Fe(t)])},[e("td",zt,[e("div",Kt,[e("p",Ht,r(t.product_name),1),t.variant_options?(a(),l("p",It,r(Object.entries(t.variant_options).map(([i,x])=>`${i}: ${x}`).join(", ")),1)):m("",!0)])]),e("td",Ut,[e("span",{class:X(ke(t))},r(F(t)),3)]),e("td",Qt,[e("input",{type:"number",value:t.quantity,onChange:i=>De(n,i),class:"w-full text-center border border-gray-300 rounded text-sm py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"},null,40,Gt)]),e("td",Wt,[e("input",{type:"number",value:t.original_price||t.unit_price,onChange:i=>Le(n,i),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"},null,40,Jt)]),e("td",Yt,[e("input",{type:"number",value:t.discount_percent,onChange:i=>Ve(n,i),onClick:i=>Te(n),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"},null,40,Zt)]),e("td",es,[e("span",ts,r(d(t.quantity*t.unit_price)),1)]),e("td",ss,[e("button",{onClick:i=>Ce(n),class:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded hover:bg-red-600 transition-colors mx-auto"},as,8,os)])],2))),128))])])]))]),c.value.length>0?(a(),l("div",ls,[e("div",rs,[is,e("span",cs,r(d(B.value)),1)]),e("div",ds,[us,e("span",{onClick:je,class:"font-medium cursor-pointer hover:text-blue-600 flex items-center gap-1"},[b(r(P.value>0?"-"+d(V.value):d(0))+" ",1),hs])]),e("div",vs,[e("div",_s,[ps,e("span",fs,r(d(Z.value)),1)]),e("div",ms,[e("button",{onClick:s[2]||(s[2]=t=>H.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base"}," Procesar Venta "),e("button",{onClick:s[3]||(s[3]=t=>{c.value=[],P.value=0,T.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base border border-red-300"}," Cancelar ")])])])):m("",!0)])])):m("",!0),ve.value==="sales"?(a(),l("div",gs,[e("div",xs,[e("div",bs,[e("div",ys,[ws,e("span",ks,r(me(he).props.auth?.user?.name||"Usuario"),1),Cs,g.store&&g.store.logo_url?(a(),l("img",{key:0,src:g.store.logo_url,alt:`Logo de ${g.store.name}`,class:"h-5 w-5 rounded-full object-cover"},null,8,Ms)):m("",!0),g.store?(a(),l("span",Ts,r(g.store.name),1)):m("",!0)]),e("button",{onClick:xe,class:"px-3 py-1.5 bg-teal-500 text-white rounded text-sm font-medium"}," ¬´ Regresar ")])]),e("div",js,[e("div",Ss,[e("button",{onClick:s[4]||(s[4]=t=>Y.value=!0),class:"px-3 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center flex-shrink-0",title:"Ver cat√°logo de productos"},Ps),e("div",Es,[D(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>p.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Ee(ue,["enter"]),onInput:ue},null,544),[[oe,p.value]]),Ns,e("button",{onClick:Se,class:"absolute right-2 top-2 p-1.5 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},Bs)])]),N.value.length>0&&p.value.trim()?(a(),l("div",Fs,[(a(!0),l(M,null,O(N.value,t=>(a(),l("div",{key:t.id,onClick:n=>{Q(t),p.value="",N.value=[]},class:"px-4 py-3 border-b border-gray-100 hover:bg-blue-50 cursor-pointer flex items-center gap-3"},[e("div",Os,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover rounded"},null,8,Rs)):(a(),l("svg",Ls,As))]),e("div",Xs,[e("p",zs,r(t.name),1),e("div",null,[t.promo_active&&t.promo_discount_percent>0?(a(),l(M,{key:0},[e("p",Ks,r(d(E(t).originalPrice)),1),e("p",Hs,r(d(E(t).finalPrice)),1)],64)):(a(),l("p",Is,r(d(E(t).finalPrice)),1))])]),Us],8,Ds))),128))])):m("",!0)]),Qs,e("div",Gs,[c.value.length===0?(a(),l("div",Ws,eo)):(a(),l("div",to,[(a(!0),l(M,null,O(c.value,(t,n)=>(a(),l("div",{key:n,class:"px-4 py-3 bg-white"},[e("div",so,[e("div",oo,[e("div",no,[e("span",{class:X(ke(t))}," Stock: "+r(F(t)),3),pe(t)?m("",!0):(a(),l("span",ao," ‚ö† Sin stock "))]),e("p",lo,r(t.product_name),1),e("p",ro,r(d(t.unit_price)),1)]),e("div",io,[e("div",co,[uo,e("div",ho,[e("button",{onClick:i=>Me(n,-1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," - ",8,vo),e("span",_o,r(t.quantity),1),e("button",{onClick:i=>Me(n,1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," + ",8,po)])]),e("div",fo,[mo,e("span",go,r(d(t.quantity*t.unit_price)),1)]),e("button",{onClick:i=>Te(n),class:"w-8 h-8 flex items-center justify-center bg-gray-200 text-gray-600 rounded hover:bg-gray-300",title:"Aplicar descuento"},yo,8,xo),e("button",{onClick:i=>Ce(n),class:"w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded hover:bg-red-600"},Co,8,wo)])])]))),128))]))]),c.value.length>0?(a(),l("div",Mo,[e("div",To,[e("div",jo,[So,e("span",$o,r(d(B.value)),1)]),e("div",Po,[Eo,e("span",{onClick:je,class:"font-medium text-green-600 cursor-pointer hover:text-blue-600 flex items-center gap-1"},[b(r(P.value>0?"-"+d(V.value):d(0))+" ",1),No])]),e("div",qo,[Bo,e("span",Fo,r(d(Z.value)),1)])]),e("div",Do,[e("button",{onClick:s[6]||(s[6]=t=>H.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base transition-colors"}," PROCESAR VENTA "),e("button",{onClick:s[7]||(s[7]=t=>{c.value=[],P.value=0,T.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base transition-colors border border-red-300"}," CANCELAR ")])])):m("",!0)])):m("",!0),f(z,{show:H.value,onClose:s[11]||(s[11]=t=>H.value=!1)},{default:_(()=>[e("div",Oo,[Ro,e("div",Lo,[Vo,D(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>re.value=t),class:"w-full rounded-md border-gray-300"},Ho,512),[[ge,re.value]])]),e("div",Io,[Uo,D(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=t=>ie.value=t),class:"w-full rounded-md border-gray-300",rows:"3",placeholder:"Notas adicionales sobre la venta..."},null,512),[[oe,ie.value]])]),c.value.some(t=>t.discount_percent>0)?(a(),l("div",Qo,[Go,e("div",Wo,[(a(!0),l(M,null,O(c.value.filter(t=>t.discount_percent>0),(t,n)=>(a(),l("div",{key:n,class:"flex justify-between text-sm"},[e("span",Jo,r(t.product_name)+":",1),e("span",Yo,"-"+r(t.discount_percent)+"% ("+r(d((t.original_price-t.unit_price)*t.quantity))+")",1)]))),128))])])):m("",!0),e("div",Zo,[e("div",en,[tn,e("span",null,r(d(B.value)),1)]),V.value>0?(a(),l("div",sn,[e("span",null,"Descuento ("+r(T.value==="percentage"?P.value+"%":"Monto")+"):",1),e("span",null,"-"+r(d(V.value)),1)])):m("",!0),e("div",on,[nn,e("span",null,r(d(Z.value)),1)])]),e("div",an,[f(ne,{onClick:s[10]||(s[10]=t=>H.value=!1)},{default:_(()=>[b("Cancelar")]),_:1}),f(ae,{onClick:Ae},{default:_(()=>[b("Confirmar Venta")]),_:1})])])]),_:1},8,["show"]),f(z,{show:le.value,onClose:s[14]||(s[14]=t=>le.value=!1)},{default:_(()=>[e("div",ln,[rn,K.value?(a(),l("div",cn,[e("p",dn,[b(" N√∫mero de venta: "),e("span",un,"#"+r(K.value.sale_number),1)]),e("p",hn,[b(" Total: "),e("span",vn,r(d(K.value.total)),1)])])):m("",!0),e("div",_n,[f(ne,{onClick:s[12]||(s[12]=t=>le.value=!1)},{default:_(()=>[b("Cerrar")]),_:1}),K.value?(a(),Ue(ae,{key:0,onClick:s[13]||(s[13]=t=>qe(K.value))},{default:_(()=>[b(" üñ®Ô∏è Imprimir Factura ")]),_:1})):m("",!0)])])]),_:1},8,["show"]),f(z,{show:J.value,onClose:ee},{default:_(()=>[e("div",pn,[fn,mn,gn,f(ne,{onClick:ee,class:"mt-4"},{default:_(()=>[b("Cerrar")]),_:1})])]),_:1},8,["show"]),f(z,{show:I.value,onClose:s[19]||(s[19]=t=>I.value=!1)},{default:_(()=>[e("div",xn,[e("div",bn,[e("h2",yn,r(u.value!==null?c.value[u.value]?.product_name:"Descuento de Producto"),1),e("button",{onClick:s[15]||(s[15]=t=>I.value=!1),class:"text-gray-400 hover:text-gray-600"},kn)]),e("div",Cn,[e("div",null,[Mn,e("input",{type:"number",value:u.value!==null?c.value[u.value]?.quantity:1,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,Tn)]),e("div",null,[jn,e("input",{type:"number",value:u.value!==null?c.value[u.value]?.original_price||c.value[u.value]?.unit_price:0,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,Sn)]),e("div",null,[$n,D(e("select",{"onUpdate:modelValue":s[16]||(s[16]=t=>S.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},Nn,512),[[ge,S.value]])]),e("div",null,[e("label",qn," Descuento "+r(S.value==="percentage"?"%":""),1),D(e("input",{"onUpdate:modelValue":s[17]||(s[17]=t=>$.value=t),type:"number",step:(S.value==="percentage","0.01"),min:0,max:S.value==="percentage"?100:u.value!==null?c.value[u.value]?.original_price||c.value[u.value]?.unit_price:0,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:S.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,Bn),[[oe,$.value,void 0,{number:!0}]])]),u.value!==null?(a(),l("div",Fn,[e("div",Dn,[On,e("span",Rn,r(d((c.value[u.value]?.original_price||c.value[u.value]?.unit_price)*c.value[u.value]?.quantity)),1)]),e("div",Ln,[Vn,e("span",An,r(d(S.value==="percentage"?(c.value[u.value]?.original_price||c.value[u.value]?.unit_price)*c.value[u.value]?.quantity*$.value/100:$.value*c.value[u.value]?.quantity)),1)]),e("div",Xn,[zn,e("span",null,r(d((c.value[u.value]?.original_price||c.value[u.value]?.unit_price)*c.value[u.value]?.quantity-(S.value==="percentage"?(c.value[u.value]?.original_price||c.value[u.value]?.unit_price)*c.value[u.value]?.quantity*$.value/100:$.value*c.value[u.value]?.quantity))),1)])])):m("",!0)]),e("div",Kn,[f(ne,{onClick:s[18]||(s[18]=t=>I.value=!1)},{default:_(()=>[b("Cerrar")]),_:1}),f(ae,{onClick:Oe},{default:_(()=>[b("Aplicar")]),_:1})])])]),_:1},8,["show"]),f(z,{show:Y.value,onClose:s[22]||(s[22]=t=>Y.value=!1),"max-width":"4xl"},{default:_(()=>[e("div",Hn,[e("div",In,[Un,e("button",{onClick:s[20]||(s[20]=t=>Y.value=!1),class:"text-gray-400 hover:text-gray-600"},Gn)]),e("div",Wn,[e("button",{onClick:s[21]||(s[21]=t=>j.value=null),class:X(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",j.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(M,null,O(g.categories,t=>(a(),l("button",{key:t.id,onClick:n=>j.value=t.id,class:X(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",j.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,Jn))),128))]),e("div",Yn,[de.value.length===0?(a(),l("div",Zn,ta)):(a(),l("div",sa,[(a(!0),l(M,null,O(de.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>{Q(t),Y.value=!1}},[e("div",na,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,aa)):(a(),l("svg",la,ia))]),e("div",ca,[e("div",da,[t.promo_active&&t.promo_discount_percent>0?(a(),l(M,{key:0},[e("p",ua,r(d(E(t).originalPrice)),1),e("p",ha,r(d(E(t).finalPrice)),1)],64)):(a(),l("p",va,r(d(E(t).finalPrice)),1))]),e("h3",_a,r(t.name),1)])],8,oa))),128))]))])])]),_:1},8,["show"]),f(z,{show:U.value,onClose:s[27]||(s[27]=t=>U.value=!1)},{default:_(()=>[e("div",pa,[e("div",fa,[ma,e("button",{onClick:s[23]||(s[23]=t=>U.value=!1),class:"text-gray-400 hover:text-gray-600"},xa)]),e("div",ba,[e("div",null,[ya,D(e("select",{"onUpdate:modelValue":s[24]||(s[24]=t=>T.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},Ca,512),[[ge,T.value]])]),e("div",null,[e("label",Ma," Descuento "+r(T.value==="percentage"?"%":""),1),D(e("input",{"onUpdate:modelValue":s[25]||(s[25]=t=>P.value=t),type:"number",step:(T.value==="percentage","0.01"),min:0,max:T.value==="percentage"?100:B.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:T.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,Ta),[[oe,P.value,void 0,{number:!0}]])]),e("div",ja,[e("div",Sa,[$a,e("span",Pa,r(d(B.value)),1)]),e("div",Ea,[Na,e("span",qa,r(d(V.value)),1)]),e("div",Ba,[Fa,e("span",null,r(d(Z.value)),1)])])]),e("div",Da,[f(ne,{onClick:s[26]||(s[26]=t=>U.value=!1)},{default:_(()=>[b("Cerrar")]),_:1}),f(ae,{onClick:Re},{default:_(()=>[b("Aplicar")]),_:1})])])]),_:1},8,["show"]),f(z,{show:R.value,onClose:s[30]||(s[30]=t=>R.value=!1)},{default:_(()=>[e("div",Oa,[e("div",Ra,[La,e("button",{onClick:s[28]||(s[28]=t=>R.value=!1),class:"text-gray-400 hover:text-gray-600"},Aa)]),e("div",Xa,[e("div",{class:"text-sm text-gray-700 whitespace-pre-line",innerHTML:ce.value},null,8,za)]),e("div",Ka,[f(ae,{onClick:s[29]||(s[29]=t=>R.value=!1)},{default:_(()=>[b("Entendido")]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{Ja as default};
