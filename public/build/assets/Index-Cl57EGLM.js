const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BiXffS8T.js","assets/app-jj45mSch.js","assets/app-CSemTh_F.css"])))=>i.map(i=>d[i]);
import{G as De,c as F,r as h,u as Le,D as Ve,w as Ee,a as l,o as a,b as p,d as ie,h as Ne,e as v,i as f,f as e,m as x,j as S,A as we,q as G,p as V,F as g,n as B,t as r,x as ce,y as ze,z as oe,C as Ae,_ as He}from"./app-jj45mSch.js";import{_ as Ie}from"./AuthenticatedLayout-BqNxN2Jo.js";import{_ as E}from"./Modal-VmM5Rn9F.js";import{_ as K}from"./SecondaryButton-DYCNsNDA.js";import{_ as W}from"./PrimaryButton-DtiWmhGv.js";import"./AlertModal-BlcY9iFS.js";const Fe={key:0,class:"font-semibold text-xl text-gray-800 leading-tight"},Oe={key:0,class:"hidden lg:flex fixed inset-0 bg-white flex-row",style:{"margin-top":"0","z-index":"10"}},Re={class:"w-2/3 h-full flex flex-col border-r border-gray-300"},Ue={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},Qe={class:"flex items-center gap-3 mb-3"},Ge=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Ke={class:"flex-1 relative"},We=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),Xe=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),Je=[Xe],Ye={class:"flex items-center gap-2 overflow-x-auto"},Ze=["onClick"],et={class:"flex-1 overflow-y-auto p-4"},tt={key:0,class:"text-center py-12 text-gray-500"},st=e("p",null,"No se encontraron productos",-1),ot=[st],nt={key:1,class:"grid grid-cols-4 xl:grid-cols-5 gap-3"},at=["onClick"],lt={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},rt=["src","alt"],it={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ct=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),dt=[ct],ut={class:"p-2 flex-1 flex flex-col"},ht={class:"mb-1"},vt={class:"text-xs line-through text-red-600"},_t={class:"text-sm font-bold text-green-600"},pt={key:1,class:"text-sm font-bold text-gray-900"},ft={class:"font-medium text-xs text-gray-900 line-clamp-2"},mt={class:"w-1/3 h-full flex flex-col bg-white"},xt={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},gt={class:"flex items-center gap-3"},bt=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),yt={class:"text-blue-700 font-semibold"},wt=e("span",{class:"text-blue-400"},"|",-1),kt=["src","alt"],Ct={key:1,class:"text-blue-700 font-medium text-sm"},Mt={class:"flex-1 overflow-y-auto px-3 py-2"},jt={key:0,class:"text-center py-12 text-gray-500"},$t=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Pt=e("p",null,"El carrito est√° vac√≠o",-1),Tt=[$t,Pt],St={key:1,class:"overflow-x-auto"},Bt={class:"w-full text-sm"},qt=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-semibold text-gray-700"},"Producto"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"},"Stock"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-20"},"Cant"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-28"},"Valor"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-24"},"% Desc"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-32"},"SubTotal"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"})])],-1),Dt={class:"divide-y divide-gray-200 bg-white"},Lt={class:"px-3 py-3 text-left align-middle"},Vt={class:"min-w-0"},Et={class:"font-medium text-sm text-gray-900 truncate"},Nt={key:0,class:"text-xs text-gray-500 truncate"},zt={class:"px-3 py-3 text-center align-middle w-16"},At={class:"px-3 py-3 text-center align-middle w-20"},Ht=["value","onChange"],It={class:"px-3 py-3 text-right align-middle w-28"},Ft=["value","onChange"],Ot={class:"px-3 py-3 text-right align-middle w-24"},Rt=["value","onChange","onClick"],Ut={class:"px-3 py-3 text-right align-middle w-32"},Qt={class:"font-semibold text-gray-900 text-sm"},Gt={class:"px-3 py-3 text-center align-middle w-16"},Kt=["onClick"],Wt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Xt=[Wt],Jt={key:0,class:"border-t border-gray-200 px-4 py-3 bg-gray-50 space-y-3 flex-shrink-0"},Yt={class:"flex justify-between text-sm"},Zt=e("span",{class:"text-gray-700"},"Total Bruto:",-1),es={class:"font-medium"},ts={class:"flex justify-between text-sm items-center"},ss=e("span",{class:"text-gray-700"},"Descuento:",-1),os=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),ns={class:"pt-2 border-t border-gray-300"},as={class:"flex justify-between items-center mb-3"},ls=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),rs={class:"text-base font-bold text-green-600"},is={class:"flex gap-3"},cs={key:1,class:"lg:hidden fixed inset-0 bg-white flex flex-col",style:{"margin-top":"0","z-index":"10"}},ds={class:"bg-blue-500 px-4 py-3 flex-shrink-0"},us={class:"flex items-center justify-between"},hs={class:"flex items-center gap-2"},vs=e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),_s={class:"text-white font-semibold"},ps=e("span",{class:"text-white"},"|",-1),fs=["src","alt"],ms={key:1,class:"text-white font-medium text-sm"},xs={class:"bg-gray-100 px-4 py-3 flex-shrink-0 border-b border-gray-200"},gs={class:"flex items-center gap-2"},bs=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),ys=[bs],ws={class:"flex-1 relative"},ks=e("svg",{class:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),Cs=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),Ms=[Cs],js={key:0,class:"mt-3 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto"},$s=["onClick"],Ps={class:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center flex-shrink-0"},Ts=["src","alt"],Ss={key:1,class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Bs=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),qs=[Bs],Ds={class:"flex-1 min-w-0"},Ls={class:"font-medium text-sm text-gray-900 truncate"},Vs={class:"text-xs line-through text-red-600"},Es={class:"text-xs text-green-600 font-semibold"},Ns={key:1,class:"text-xs text-gray-500"},zs=e("svg",{class:"w-5 h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),As=e("div",{class:"bg-gray-200 px-4 py-2 flex-shrink-0"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})])]),e("h3",{class:"text-gray-700 font-semibold text-sm"},"INFORMACION DE LA VENTA")])],-1),Hs={class:"flex-1 overflow-y-auto bg-white"},Is={key:0,class:"text-center py-12 text-gray-500"},Fs=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Os=e("p",null,"No hay productos en el carrito",-1),Rs=e("p",{class:"text-xs text-gray-400 mt-2"},"Busca o escanea un producto para comenzar",-1),Us=[Fs,Os,Rs],Qs={key:1,class:"divide-y divide-gray-200"},Gs={class:"flex items-start justify-between gap-3"},Ks={class:"flex-1 min-w-0"},Ws={class:"flex items-center gap-2 mb-1"},Xs={key:0,class:"text-xs text-red-600 font-semibold"},Js={class:"font-medium text-sm text-gray-900 mb-1"},Ys={class:"text-xs text-gray-500"},Zs={class:"flex items-center gap-3"},eo={class:"flex flex-col items-center gap-1"},to=e("span",{class:"text-xs text-gray-500"},"Cant",-1),so={class:"flex items-center gap-1"},oo=["onClick"],no={class:"w-10 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full font-semibold text-sm"},ao=["onClick"],lo={class:"flex flex-col items-end gap-1 min-w-[80px]"},ro=e("span",{class:"text-xs text-gray-500"},"Total",-1),io={class:"font-semibold text-sm text-gray-900"},co=["onClick"],uo=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),ho=[uo],vo=["onClick"],_o=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),po=[_o],fo={key:0,class:"border-t border-gray-300 bg-white px-4 py-4 flex-shrink-0"},mo={class:"space-y-2 mb-4"},xo={class:"flex justify-between text-sm"},go=e("span",{class:"text-gray-700"},"Subtotal:",-1),bo={class:"font-medium text-green-600"},yo={class:"flex justify-between text-sm"},wo=e("span",{class:"text-gray-700"},"Descuento:",-1),ko=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),Co={class:"flex justify-between items-center pt-2 border-t border-gray-300"},Mo=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),jo={class:"text-base font-bold text-green-600"},$o={class:"flex gap-3"},Po={class:"p-6"},To=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmar Venta",-1),So={class:"mb-4"},Bo=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"M√©todo de Pago",-1),qo=e("option",{value:"efectivo"},"Efectivo",-1),Do=e("option",{value:"tarjeta"},"Tarjeta",-1),Lo=e("option",{value:"transferencia"},"Transferencia",-1),Vo=e("option",{value:"mixto"},"Mixto",-1),Eo=[qo,Do,Lo,Vo],No={class:"mb-4"},zo=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notas (Opcional)",-1),Ao={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded"},Ho=e("h4",{class:"text-sm font-semibold text-green-800 mb-2"},"Descuentos por Producto:",-1),Io={class:"space-y-1"},Fo={class:"text-green-700"},Oo={class:"text-green-700 font-medium"},Ro={class:"mb-4 p-3 bg-gray-50 rounded"},Uo={class:"flex justify-between mb-2"},Qo=e("span",null,"Subtotal:",-1),Go={key:0,class:"flex justify-between mb-2 text-red-600"},Ko={class:"flex justify-between font-bold text-lg pt-2 border-t"},Wo=e("span",null,"Total:",-1),Xo={class:"flex gap-3"},Jo={class:"p-6"},Yo=e("h2",{class:"text-lg font-semibold mb-4 text-green-600"},"¬°Venta registrada exitosamente!",-1),Zo={key:0,class:"mb-4"},en={class:"text-sm text-gray-600 mb-2"},tn={class:"font-semibold"},sn={class:"text-sm text-gray-600 mb-2"},on={class:"font-semibold"},nn={class:"flex gap-3"},an={class:"p-6"},ln=e("h2",{class:"text-lg font-semibold mb-4"},"Escanear C√≥digo de Barras",-1),rn=e("p",{class:"text-sm text-gray-600 mb-4"}," Apunta la c√°mara hacia el c√≥digo de barras. El producto se agregar√° autom√°ticamente al carrito. ",-1),cn=e("div",{id:"barcode-scanner-sales",class:"w-full rounded-lg overflow-hidden",style:{"min-height":"300px"}},null,-1),dn={class:"p-6"},un={class:"flex items-center justify-between mb-4"},hn={class:"text-lg font-semibold"},vn=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),_n=[vn],pn={class:"space-y-4"},fn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cantidad",-1),mn=["value"],xn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valor",-1),gn=["value"],bn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),yn=e("option",{value:"percentage"},"Porcentaje",-1),wn=e("option",{value:"amount"},"Monto",-1),kn=[yn,wn],Cn={class:"block text-sm font-medium text-gray-700 mb-2"},Mn=["step","max","placeholder"],jn={key:0,class:"p-4 bg-gray-50 rounded-lg space-y-2"},$n={class:"flex justify-between text-sm"},Pn=e("span",{class:"text-gray-700"},"Subtotal:",-1),Tn={class:"font-semibold"},Sn={class:"flex justify-between text-sm"},Bn=e("span",{class:"text-gray-700"},"Descuento:",-1),qn={class:"font-semibold"},Dn={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},Ln=e("span",null,"Total:",-1),Vn={class:"flex gap-3 mt-6"},En={class:"p-6 max-h-[90vh] flex flex-col"},Nn={class:"flex items-center justify-between mb-4 flex-shrink-0"},zn=e("h2",{class:"text-lg font-semibold"},"Cat√°logo de Productos",-1),An=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Hn=[An],In={class:"mb-4 flex items-center gap-2 overflow-x-auto pb-2 flex-shrink-0"},Fn=["onClick"],On={class:"flex-1 overflow-y-auto"},Rn={key:0,class:"text-center py-12 text-gray-500"},Un=e("p",null,"No se encontraron productos",-1),Qn=[Un],Gn={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Kn=["onClick"],Wn={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},Xn=["src","alt"],Jn={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yn=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Zn=[Yn],ea={class:"p-2 flex-1 flex flex-col"},ta={class:"mb-1"},sa={class:"text-xs line-through text-red-600"},oa={class:"text-sm font-bold text-green-600"},na={key:1,class:"text-sm font-bold text-gray-900"},aa={class:"font-medium text-xs text-gray-900 line-clamp-2"},la={class:"p-6"},ra={class:"flex items-center justify-between mb-4"},ia=e("h2",{class:"text-lg font-semibold"},"Descuento general de la factura",-1),ca=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),da=[ca],ua={class:"space-y-4"},ha=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),va=e("option",{value:"percentage"},"Porcentaje",-1),_a=e("option",{value:"amount"},"Monto",-1),pa=[va,_a],fa={class:"block text-sm font-medium text-gray-700 mb-2"},ma=["step","max","placeholder"],xa={class:"p-4 bg-gray-50 rounded-lg space-y-2"},ga={class:"flex justify-between text-sm"},ba=e("span",{class:"text-gray-700"},"Subtotal:",-1),ya={class:"font-semibold"},wa={class:"flex justify-between text-sm"},ka=e("span",{class:"text-gray-700"},"Descuento:",-1),Ca={class:"font-semibold"},Ma={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},ja=e("span",null,"Total:",-1),$a={class:"flex gap-3 mt-6"},Pa={class:"p-6"},Ta={class:"flex items-center justify-between mb-4"},Sa=e("h2",{class:"text-lg font-semibold text-red-600"},"‚ö†Ô∏è Stock Insuficiente",-1),Ba=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),qa=[Ba],Da={class:"mb-4"},La=["innerHTML"],Va={class:"flex justify-end"},Fa={__name:"Index",props:{sales:Object,stats:Object,filters:Object,products:Array,categories:Array,store:Object},setup(m){const $=m,ne=De(),ke=F(()=>(ne.props.auth?.roles||[]).includes("physical-sales")),de=()=>{ke.value?oe.post(route("logout"),{},{onSuccess:()=>{window.location.href=route("login")},onError:()=>{window.location.href=route("login")}}):oe.visit(route("dashboard"))},ae=h("sales");Le({start_date:$.filters?.start_date||"",end_date:$.filters?.end_date||"",search:$.filters?.search||""});const ue=h("");h(!1);const N=h(null),X=h(!1),d=o=>!o&&o!==0?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),Ce=o=>{o&&oe.visit(route("admin.physical-sales.show",o.id)+"?print=true")};F(()=>{if(!$.sales||!$.sales.data)return[];const o=new Date;o.setHours(0,0,0,0);const s=new Date(o);s.setHours(23,59,59,999);let t=$.sales.data.filter(n=>{const c=new Date(n.created_at);return c>=o&&c<=s});if(ue.value.trim()){const n=ue.value.toLowerCase();t=t.filter(c=>c.sale_number.toLowerCase().includes(n))}return t});const i=h([]),_=h(""),j=h([]),he=h(!1),O=h(!1),Me=h(""),z=h(!1),J=h("efectivo"),Y=h(""),C=h(0),b=h("amount"),y=h(null);h(null),h(!1),h(!1);const A=h(!1),H=h(!1),R=h(!1),u=h(null),w=h("percentage"),k=h(0),q=h(!1),Z=h(""),D=h(null),le=()=>{try{const o=new(window.AudioContext||window.webkitAudioContext),s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),s.start(o.currentTime),s.stop(o.currentTime+.2)}catch{}},P=F(()=>i.value.reduce((o,s)=>o+s.quantity*s.unit_price,0)),L=F(()=>b.value==="percentage"?P.value*C.value/100:C.value),U=F(()=>P.value-L.value),ee=F(()=>{if(!$.products)return[];let o=$.products;if(y.value&&(o=o.filter(s=>s.category_id===y.value)),_.value.trim()){const s=_.value.toLowerCase();o=o.filter(t=>t.name.toLowerCase().includes(s)||t.id.toString().includes(s)||t.barcode&&t.barcode.toLowerCase().includes(s))}return o}),te=async()=>{if(!_.value.trim()){j.value=[];return}he.value=!0;try{const s=(await window.axios.get(route("admin.physical-sales.search-products"),{params:{q:_.value}})).data?.products||[];j.value=s,s.length===1&&window.innerWidth<1024&&(I(s[0]),_.value="",j.value=[])}catch{j.value=[]}finally{he.value=!1}},ve=async o=>{const s=o.replace(/\s+/g,"").trim();if(s)try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});t.data?.product?(I(t.data.product),Me.value=""):alert("Producto no encontrado con ese c√≥digo de barras")}catch{alert("Error al buscar producto")}},M=(o,s=null)=>{const t=s?.price??o.price;let n=parseFloat(t),c=0;return o.promo_active&&o.promo_discount_percent>0&&(c=parseFloat(o.promo_discount_percent),n=Math.round(n*(100-c)/100)),{originalPrice:parseFloat(t),finalPrice:n,discountPercent:c}},I=(o,s=null)=>{const t=i.value.find(n=>n.product_id===o.id&&n.variant_id===(s?.id||null));if(t)t.quantity+=1;else{const n=M(o,s);i.value.push({product_id:o.id,product_name:o.name,variant_id:s?.id||null,variant_options:s?.options||null,quantity:1,unit_price:n.finalPrice,original_price:n.originalPrice,discount_percent:n.discountPercent,product:o,variant:s})}_.value="",j.value=[]},T=o=>o.variant&&o.variant.stock!==null&&o.variant.stock!==void 0?o.variant.stock:o.product?o.product.track_inventory===!1?"Ilimitado":o.product.quantity!==null&&o.product.quantity!==void 0?o.product.quantity:"N/A":"N/A",re=o=>{const s=T(o);return s==="Ilimitado"||s==="N/A"?!0:s>=o.quantity},je=o=>{if(!re(o))return"bg-red-50";const s=T(o);return s===0||typeof s=="number"&&s<o.quantity?"bg-yellow-50":""},_e=o=>{const s=T(o);return s===0||typeof s=="number"&&s<o.quantity?"text-red-600 font-semibold text-xs":typeof s=="number"&&s<5?"text-yellow-600 font-medium text-xs":"text-gray-600 text-xs"},pe=o=>{i.value.splice(o,1)},fe=(o,s)=>{const t=i.value[o],n=t.quantity+s;if(n>0){const c=T(t);if(typeof c=="number"&&n>c){Z.value=`No hay suficiente stock para el producto "${t.product_name}".<br><br>Stock disponible: ${c}<br>Cantidad solicitada: ${n}`,q.value=!0;return}t.quantity=n}},$e=(o,s)=>{const t=parseInt(s.target.value);if(t>0){const n=i.value[o],c=T(n);if(typeof c=="number"&&t>c){Z.value=`No hay suficiente stock para el producto "${n.product_name}".<br><br>Stock disponible: ${c}<br>Cantidad solicitada: ${t}`,q.value=!0,s.target.value=n.quantity;return}i.value[o].quantity=t}},me=o=>{u.value=o;const s=i.value[o];s.discount_percent>0?(w.value="percentage",k.value=s.discount_percent):(w.value="percentage",k.value=0),A.value=!0},Pe=()=>{if(u.value===null)return;const o=i.value[u.value];o.original_price||(o.original_price=o.unit_price);const s=o.original_price;if(w.value==="percentage"){const t=Math.min(100,Math.max(0,k.value));o.discount_percent=t,o.unit_price=s*(1-t/100)}else{const t=Math.min(s,Math.max(0,k.value));o.discount_percent=t/s*100,o.unit_price=s-t}A.value=!1,u.value=null,k.value=0},xe=()=>{H.value=!0},Te=()=>{H.value=!1},Se=(o,s)=>{const t=parseFloat(s.target.value);if(t>=0){const n=i.value[o];n.original_price=t,n.discount_percent>0?n.unit_price=t*(1-n.discount_percent/100):n.unit_price=t}},Be=(o,s)=>{const t=parseFloat(s.target.value)||0,n=i.value[o],c=Math.min(100,Math.max(0,t));n.original_price||(n.original_price=n.unit_price),n.discount_percent=c,n.unit_price=n.original_price*(1-c/100)},ge=async()=>{try{O.value=!0,await Ae();const{Html5Qrcode:o}=await He(async()=>{const{Html5Qrcode:n}=await import("./index-BiXffS8T.js");return{Html5Qrcode:n}},__vite__mapDeps([0,1,2])),s=document.getElementById("barcode-scanner-sales");if(!s)return;D.value=new o(s.id);const t={fps:10,qrbox:{width:250,height:250}};try{await D.value.start({facingMode:"environment"},t,async n=>{le(),await ve(n),Q()},n=>{})}catch{try{await D.value.start({facingMode:"user"},t,async c=>{le(),await ve(c),Q()},c=>{})}catch{alert("No se pudo acceder a la c√°mara. Por favor, permite el acceso a la c√°mara en la configuraci√≥n del navegador."),O.value=!1}}}catch{alert("Error al inicializar el esc√°ner. Por favor, intenta nuevamente."),O.value=!1}},Q=async()=>{if(D.value){try{await D.value.stop(),await D.value.clear()}catch{}D.value=null}O.value=!1},qe=async()=>{if(i.value.length===0){alert("El carrito est√° vac√≠o");return}const o=[];for(let t=0;t<i.value.length;t++){const n=i.value[t];if(!re(n)){const c=T(n);o.push({name:n.product_name,requested:n.quantity,available:c})}}if(o.length>0){let t=`No se puede procesar la venta. Los siguientes productos no tienen stock suficiente:

`;o.forEach(n=>{t+=`‚Ä¢ ${n.name}: Solicitado ${n.requested}, Disponible ${n.available}
`}),Z.value=t.replace(/\n/g,"<br>"),q.value=!0;return}const s={items:i.value.map(t=>({product_id:t.product_id,variant_id:t.variant_id,quantity:t.quantity,unit_price:t.unit_price})),subtotal:P.value,tax:0,discount:L.value,total:U.value,payment_method:J.value,notes:Y.value};try{if(!window.axios){alert("Error: No se pudo inicializar la conexi√≥n. Por favor, recarga la p√°gina.");return}if(window.updateCsrfToken)window.updateCsrfToken();else{const c=document.head.querySelector('meta[name="csrf-token"]');c&&window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=c.content)}const t=async(c=0)=>{try{return await window.axios.post(route("admin.physical-sales.store"),s)}catch(se){if(se.response?.status===419&&c===0){if(window.updateCsrfToken)window.updateCsrfToken();else{const ye=document.head.querySelector('meta[name="csrf-token"]');ye&&window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=ye.content)}return await t(1)}throw se}},n=await t();n.data&&n.data.success?(N.value=n.data.sale,z.value=!1,i.value=[],_.value="",C.value=0,b.value="amount",Y.value="",J.value="efectivo",y.value=null,window.updateCsrfToken&&window.updateCsrfToken(),X.value=!0,oe.reload()):alert("Error: "+(n.data?.message||"No se pudo procesar la venta"))}catch(t){let n="Error al procesar la venta";t.response?t.response.status===419?n="La sesi√≥n ha expirado. Por favor, recarga la p√°gina e intenta nuevamente.":t.response.status===422?n=t.response.data?.message||"Error de validaci√≥n. Verifica los datos e intenta nuevamente.":t.response.data?.message&&(n=t.response.data.message):t.request&&(n="No se pudo conectar con el servidor. Verifica tu conexi√≥n."),alert(n)}};Ve(()=>{Q()});let be;return Ee(_,async o=>{clearTimeout(be);const s=o.replace(/\s+/g,"").trim();if(s.length>=8&&/^\d+$/.test(s))try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){I(t.data.product),_.value="",le();return}}catch{}be=setTimeout(()=>{_.value.trim().length>=2?te():j.value=[]},300)}),(o,s)=>(a(),l(g,null,[p(ie(Ne),{title:"Ventas F√≠sicas"}),p(Ie,null,{header:v(()=>[ae.value!=="sales"?(a(),l("h2",Fe,"Ventas F√≠sicas")):f("",!0)]),default:v(()=>[ae.value==="sales"?(a(),l("div",Oe,[e("div",Re,[e("div",Ue,[e("div",Qe,[e("button",{onClick:de,class:"px-3 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100 text-sm font-medium flex items-center gap-2 border border-gray-200"},[Ge,x(" Salir ")]),e("div",Ke,[S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:we(te,["enter"])},null,544),[[G,_.value]]),We,e("button",{onClick:ge,class:"absolute right-2 top-1.5 p-1 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},Je)])]),e("div",Ye,[e("button",{onClick:s[1]||(s[1]=t=>{y.value=null,_.value=""}),class:V(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",y.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(g,null,B(m.categories,t=>(a(),l("button",{key:t.id,onClick:n=>{y.value=t.id,_.value=""},class:V(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",y.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,Ze))),128))])]),e("div",et,[ee.value.length===0?(a(),l("div",tt,ot)):(a(),l("div",nt,[(a(!0),l(g,null,B(ee.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>I(t)},[e("div",lt,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,rt)):(a(),l("svg",it,dt))]),e("div",ut,[e("div",ht,[t.promo_active&&t.promo_discount_percent>0?(a(),l(g,{key:0},[e("p",vt,r(d(M(t).originalPrice)),1),e("p",_t,r(d(M(t).finalPrice)),1)],64)):(a(),l("p",pt,r(d(M(t).finalPrice)),1))]),e("h3",ft,r(t.name),1)])],8,at))),128))]))])]),e("div",mt,[e("div",xt,[e("div",gt,[bt,e("span",yt,r(ie(ne).props.auth?.user?.name||"Usuario"),1),wt,m.store&&m.store.logo_url?(a(),l("img",{key:0,src:m.store.logo_url,alt:`Logo de ${m.store.name}`,class:"h-6 w-6 rounded-full object-cover"},null,8,kt)):f("",!0),m.store?(a(),l("span",Ct,r(m.store.name),1)):f("",!0)])]),e("div",Mt,[i.value.length===0?(a(),l("div",jt,Tt)):(a(),l("div",St,[e("table",Bt,[qt,e("tbody",Dt,[(a(!0),l(g,null,B(i.value,(t,n)=>(a(),l("tr",{key:n,class:V(["hover:bg-gray-50",je(t)])},[e("td",Lt,[e("div",Vt,[e("p",Et,r(t.product_name),1),t.variant_options?(a(),l("p",Nt,r(Object.entries(t.variant_options).map(([c,se])=>`${c}: ${se}`).join(", ")),1)):f("",!0)])]),e("td",zt,[e("span",{class:V(_e(t))},r(T(t)),3)]),e("td",At,[e("input",{type:"number",value:t.quantity,onChange:c=>$e(n,c),class:"w-full text-center border border-gray-300 rounded text-sm py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"},null,40,Ht)]),e("td",It,[e("input",{type:"number",value:t.original_price||t.unit_price,onChange:c=>Se(n,c),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"},null,40,Ft)]),e("td",Ot,[e("input",{type:"number",value:t.discount_percent,onChange:c=>Be(n,c),onClick:c=>me(n),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"},null,40,Rt)]),e("td",Ut,[e("span",Qt,r(d(t.quantity*t.unit_price)),1)]),e("td",Gt,[e("button",{onClick:c=>pe(n),class:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded hover:bg-red-600 transition-colors mx-auto"},Xt,8,Kt)])],2))),128))])])]))]),i.value.length>0?(a(),l("div",Jt,[e("div",Yt,[Zt,e("span",es,r(d(P.value)),1)]),e("div",ts,[ss,e("span",{onClick:xe,class:"font-medium cursor-pointer hover:text-blue-600 flex items-center gap-1"},[x(r(C.value>0?"-"+d(L.value):d(0))+" ",1),os])]),e("div",ns,[e("div",as,[ls,e("span",rs,r(d(U.value)),1)]),e("div",is,[e("button",{onClick:s[2]||(s[2]=t=>z.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base"}," Procesar Venta "),e("button",{onClick:s[3]||(s[3]=t=>{i.value=[],C.value=0,b.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base border border-red-300"}," Cancelar ")])])])):f("",!0)])])):f("",!0),ae.value==="sales"?(a(),l("div",cs,[e("div",ds,[e("div",us,[e("div",hs,[vs,e("span",_s,r(ie(ne).props.auth?.user?.name||"Usuario"),1),ps,m.store&&m.store.logo_url?(a(),l("img",{key:0,src:m.store.logo_url,alt:`Logo de ${m.store.name}`,class:"h-5 w-5 rounded-full object-cover"},null,8,fs)):f("",!0),m.store?(a(),l("span",ms,r(m.store.name),1)):f("",!0)]),e("button",{onClick:de,class:"px-3 py-1.5 bg-teal-500 text-white rounded text-sm font-medium"}," ¬´ Regresar ")])]),e("div",xs,[e("div",gs,[e("button",{onClick:s[4]||(s[4]=t=>R.value=!0),class:"px-3 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center flex-shrink-0",title:"Ver cat√°logo de productos"},ys),e("div",ws,[S(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>_.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:we(te,["enter"]),onInput:te},null,544),[[G,_.value]]),ks,e("button",{onClick:ge,class:"absolute right-2 top-2 p-1.5 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},Ms)])]),j.value.length>0&&_.value.trim()?(a(),l("div",js,[(a(!0),l(g,null,B(j.value,t=>(a(),l("div",{key:t.id,onClick:n=>{I(t),_.value="",j.value=[]},class:"px-4 py-3 border-b border-gray-100 hover:bg-blue-50 cursor-pointer flex items-center gap-3"},[e("div",Ps,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover rounded"},null,8,Ts)):(a(),l("svg",Ss,qs))]),e("div",Ds,[e("p",Ls,r(t.name),1),e("div",null,[t.promo_active&&t.promo_discount_percent>0?(a(),l(g,{key:0},[e("p",Vs,r(d(M(t).originalPrice)),1),e("p",Es,r(d(M(t).finalPrice)),1)],64)):(a(),l("p",Ns,r(d(M(t).finalPrice)),1))])]),zs],8,$s))),128))])):f("",!0)]),As,e("div",Hs,[i.value.length===0?(a(),l("div",Is,Us)):(a(),l("div",Qs,[(a(!0),l(g,null,B(i.value,(t,n)=>(a(),l("div",{key:n,class:"px-4 py-3 bg-white"},[e("div",Gs,[e("div",Ks,[e("div",Ws,[e("span",{class:V(_e(t))}," Stock: "+r(T(t)),3),re(t)?f("",!0):(a(),l("span",Xs," ‚ö† Sin stock "))]),e("p",Js,r(t.product_name),1),e("p",Ys,r(d(t.unit_price)),1)]),e("div",Zs,[e("div",eo,[to,e("div",so,[e("button",{onClick:c=>fe(n,-1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," - ",8,oo),e("span",no,r(t.quantity),1),e("button",{onClick:c=>fe(n,1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," + ",8,ao)])]),e("div",lo,[ro,e("span",io,r(d(t.quantity*t.unit_price)),1)]),e("button",{onClick:c=>me(n),class:"w-8 h-8 flex items-center justify-center bg-gray-200 text-gray-600 rounded hover:bg-gray-300",title:"Aplicar descuento"},ho,8,co),e("button",{onClick:c=>pe(n),class:"w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded hover:bg-red-600"},po,8,vo)])])]))),128))]))]),i.value.length>0?(a(),l("div",fo,[e("div",mo,[e("div",xo,[go,e("span",bo,r(d(P.value)),1)]),e("div",yo,[wo,e("span",{onClick:xe,class:"font-medium text-green-600 cursor-pointer hover:text-blue-600 flex items-center gap-1"},[x(r(C.value>0?"-"+d(L.value):d(0))+" ",1),ko])]),e("div",Co,[Mo,e("span",jo,r(d(U.value)),1)])]),e("div",$o,[e("button",{onClick:s[6]||(s[6]=t=>z.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base transition-colors"}," PROCESAR VENTA "),e("button",{onClick:s[7]||(s[7]=t=>{i.value=[],C.value=0,b.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base transition-colors border border-red-300"}," CANCELAR ")])])):f("",!0)])):f("",!0),p(E,{show:z.value,onClose:s[11]||(s[11]=t=>z.value=!1)},{default:v(()=>[e("div",Po,[To,e("div",So,[Bo,S(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>J.value=t),class:"w-full rounded-md border-gray-300"},Eo,512),[[ce,J.value]])]),e("div",No,[zo,S(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=t=>Y.value=t),class:"w-full rounded-md border-gray-300",rows:"3",placeholder:"Notas adicionales sobre la venta..."},null,512),[[G,Y.value]])]),i.value.some(t=>t.discount_percent>0)?(a(),l("div",Ao,[Ho,e("div",Io,[(a(!0),l(g,null,B(i.value.filter(t=>t.discount_percent>0),(t,n)=>(a(),l("div",{key:n,class:"flex justify-between text-sm"},[e("span",Fo,r(t.product_name)+":",1),e("span",Oo,"-"+r(t.discount_percent)+"% ("+r(d((t.original_price-t.unit_price)*t.quantity))+")",1)]))),128))])])):f("",!0),e("div",Ro,[e("div",Uo,[Qo,e("span",null,r(d(P.value)),1)]),L.value>0?(a(),l("div",Go,[e("span",null,"Descuento ("+r(b.value==="percentage"?C.value+"%":"Monto")+"):",1),e("span",null,"-"+r(d(L.value)),1)])):f("",!0),e("div",Ko,[Wo,e("span",null,r(d(U.value)),1)])]),e("div",Xo,[p(K,{onClick:s[10]||(s[10]=t=>z.value=!1)},{default:v(()=>[x("Cancelar")]),_:1}),p(W,{onClick:qe},{default:v(()=>[x("Confirmar Venta")]),_:1})])])]),_:1},8,["show"]),p(E,{show:X.value,onClose:s[14]||(s[14]=t=>X.value=!1)},{default:v(()=>[e("div",Jo,[Yo,N.value?(a(),l("div",Zo,[e("p",en,[x(" N√∫mero de venta: "),e("span",tn,"#"+r(N.value.sale_number),1)]),e("p",sn,[x(" Total: "),e("span",on,r(d(N.value.total)),1)])])):f("",!0),e("div",nn,[p(K,{onClick:s[12]||(s[12]=t=>X.value=!1)},{default:v(()=>[x("Cerrar")]),_:1}),N.value?(a(),ze(W,{key:0,onClick:s[13]||(s[13]=t=>Ce(N.value))},{default:v(()=>[x(" üñ®Ô∏è Imprimir Factura ")]),_:1})):f("",!0)])])]),_:1},8,["show"]),p(E,{show:O.value,onClose:Q},{default:v(()=>[e("div",an,[ln,rn,cn,p(K,{onClick:Q,class:"mt-4"},{default:v(()=>[x("Cerrar")]),_:1})])]),_:1},8,["show"]),p(E,{show:A.value,onClose:s[19]||(s[19]=t=>A.value=!1)},{default:v(()=>[e("div",dn,[e("div",un,[e("h2",hn,r(u.value!==null?i.value[u.value]?.product_name:"Descuento de Producto"),1),e("button",{onClick:s[15]||(s[15]=t=>A.value=!1),class:"text-gray-400 hover:text-gray-600"},_n)]),e("div",pn,[e("div",null,[fn,e("input",{type:"number",value:u.value!==null?i.value[u.value]?.quantity:1,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,mn)]),e("div",null,[xn,e("input",{type:"number",value:u.value!==null?i.value[u.value]?.original_price||i.value[u.value]?.unit_price:0,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,gn)]),e("div",null,[bn,S(e("select",{"onUpdate:modelValue":s[16]||(s[16]=t=>w.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},kn,512),[[ce,w.value]])]),e("div",null,[e("label",Cn," Descuento "+r(w.value==="percentage"?"%":""),1),S(e("input",{"onUpdate:modelValue":s[17]||(s[17]=t=>k.value=t),type:"number",step:(w.value==="percentage","0.01"),min:0,max:w.value==="percentage"?100:u.value!==null?i.value[u.value]?.original_price||i.value[u.value]?.unit_price:0,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:w.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,Mn),[[G,k.value,void 0,{number:!0}]])]),u.value!==null?(a(),l("div",jn,[e("div",$n,[Pn,e("span",Tn,r(d((i.value[u.value]?.original_price||i.value[u.value]?.unit_price)*i.value[u.value]?.quantity)),1)]),e("div",Sn,[Bn,e("span",qn,r(d(w.value==="percentage"?(i.value[u.value]?.original_price||i.value[u.value]?.unit_price)*i.value[u.value]?.quantity*k.value/100:k.value*i.value[u.value]?.quantity)),1)]),e("div",Dn,[Ln,e("span",null,r(d((i.value[u.value]?.original_price||i.value[u.value]?.unit_price)*i.value[u.value]?.quantity-(w.value==="percentage"?(i.value[u.value]?.original_price||i.value[u.value]?.unit_price)*i.value[u.value]?.quantity*k.value/100:k.value*i.value[u.value]?.quantity))),1)])])):f("",!0)]),e("div",Vn,[p(K,{onClick:s[18]||(s[18]=t=>A.value=!1)},{default:v(()=>[x("Cerrar")]),_:1}),p(W,{onClick:Pe},{default:v(()=>[x("Aplicar")]),_:1})])])]),_:1},8,["show"]),p(E,{show:R.value,onClose:s[22]||(s[22]=t=>R.value=!1),"max-width":"4xl"},{default:v(()=>[e("div",En,[e("div",Nn,[zn,e("button",{onClick:s[20]||(s[20]=t=>R.value=!1),class:"text-gray-400 hover:text-gray-600"},Hn)]),e("div",In,[e("button",{onClick:s[21]||(s[21]=t=>y.value=null),class:V(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",y.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(g,null,B(m.categories,t=>(a(),l("button",{key:t.id,onClick:n=>y.value=t.id,class:V(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",y.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,Fn))),128))]),e("div",On,[ee.value.length===0?(a(),l("div",Rn,Qn)):(a(),l("div",Gn,[(a(!0),l(g,null,B(ee.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>{I(t),R.value=!1}},[e("div",Wn,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,Xn)):(a(),l("svg",Jn,Zn))]),e("div",ea,[e("div",ta,[t.promo_active&&t.promo_discount_percent>0?(a(),l(g,{key:0},[e("p",sa,r(d(M(t).originalPrice)),1),e("p",oa,r(d(M(t).finalPrice)),1)],64)):(a(),l("p",na,r(d(M(t).finalPrice)),1))]),e("h3",aa,r(t.name),1)])],8,Kn))),128))]))])])]),_:1},8,["show"]),p(E,{show:H.value,onClose:s[27]||(s[27]=t=>H.value=!1)},{default:v(()=>[e("div",la,[e("div",ra,[ia,e("button",{onClick:s[23]||(s[23]=t=>H.value=!1),class:"text-gray-400 hover:text-gray-600"},da)]),e("div",ua,[e("div",null,[ha,S(e("select",{"onUpdate:modelValue":s[24]||(s[24]=t=>b.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},pa,512),[[ce,b.value]])]),e("div",null,[e("label",fa," Descuento "+r(b.value==="percentage"?"%":""),1),S(e("input",{"onUpdate:modelValue":s[25]||(s[25]=t=>C.value=t),type:"number",step:(b.value==="percentage","0.01"),min:0,max:b.value==="percentage"?100:P.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:b.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,ma),[[G,C.value,void 0,{number:!0}]])]),e("div",xa,[e("div",ga,[ba,e("span",ya,r(d(P.value)),1)]),e("div",wa,[ka,e("span",Ca,r(d(L.value)),1)]),e("div",Ma,[ja,e("span",null,r(d(U.value)),1)])])]),e("div",$a,[p(K,{onClick:s[26]||(s[26]=t=>H.value=!1)},{default:v(()=>[x("Cerrar")]),_:1}),p(W,{onClick:Te},{default:v(()=>[x("Aplicar")]),_:1})])])]),_:1},8,["show"]),p(E,{show:q.value,onClose:s[30]||(s[30]=t=>q.value=!1)},{default:v(()=>[e("div",Pa,[e("div",Ta,[Sa,e("button",{onClick:s[28]||(s[28]=t=>q.value=!1),class:"text-gray-400 hover:text-gray-600"},qa)]),e("div",Da,[e("div",{class:"text-sm text-gray-700 whitespace-pre-line",innerHTML:Z.value},null,8,La)]),e("div",Va,[p(W,{onClick:s[29]||(s[29]=t=>q.value=!1)},{default:v(()=>[x("Entendido")]),_:1})])])]),_:1},8,["show"])]),_:1})],64))}};export{Fa as default};
