import{r as D,u as J,c as Z,B as rt,C as lt,D as dt,a as n,o as l,b as w,d as i,h as nt,e as M,f as t,i as g,p as c,t as d,g as P,j as k,q as $,l as R,m as _,y as tt,F as L,n as z,E as et,s as st}from"./app-DMObPw0T.js";import{_ as it}from"./AuthenticatedLayout-D4lk6Dyq.js";import{_ as U}from"./Pagination-BRVIKs9H.js";import"./AlertModal-BFCvRPeO.js";import"./Modal-BblhU7V1.js";const ct=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Reportes de Ventas",-1),ut={class:"py-12"},ht={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},pt={class:"mb-6 border-b border-gray-200"},xt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},bt={key:0},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},yt={class:"p-6"},vt=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales (en el período)",-1),ft={class:"mt-1 text-3xl font-semibold text-gray-900"},_t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},wt={class:"p-6"},kt=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Órdenes Totales (en el período)",-1),St={class:"mt-1 text-3xl font-semibold text-gray-900"},Ft={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},Mt={class:"p-6"},Ct={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},Dt=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"Desde",-1),$t=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"Hasta",-1),Lt={class:"flex space-x-2"},Et=["disabled"],Vt={class:"mt-4 flex flex-wrap gap-2"},Rt=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),zt={class:"mb-4 border-b border-gray-200"},Ot={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Tt={key:1},jt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},Nt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Bt={class:"p-6"},Ht=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales",-1),Pt={class:"mt-1 text-2xl font-semibold text-gray-900"},Yt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ut={class:"p-6"},qt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gastos / Salidas",-1),Wt={class:"mt-1 text-2xl font-semibold text-red-600"},At={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},It={class:"p-6"},Xt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Efectivo Neto",-1),Gt={class:"mt-1 text-2xl font-semibold text-green-600"},Kt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Qt={class:"p-6"},Jt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"# Ventas",-1),Zt={class:"mt-1 text-2xl font-semibold text-gray-900"},te={class:"mb-6 border-b border-gray-200"},ee={class:"-mb-px flex space-x-8"},se={key:0},ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},oe={class:"p-6"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},le=t("label",{for:"search_sale",class:"block text-sm font-medium text-gray-700"},"Buscar por número",-1),de=t("label",{for:"physical_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),ne=t("label",{for:"physical_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),ie={class:"flex gap-2"},ce=["disabled"],ue={class:"mt-4 flex flex-wrap gap-2"},he=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},xe={class:"p-6"},be={class:"flex justify-between items-center mb-4"},ge=t("h3",{class:"text-lg font-semibold"},"Historial de Ventas Físicas",-1),me=["href"],ye=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),ve={class:"overflow-x-auto"},fe={class:"min-w-full divide-y divide-gray-200"},_e=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Número"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Vendedor"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Método de Pago"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1),we={class:"bg-white divide-y divide-gray-200"},ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},De={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-sm"},Ee={key:0},Ve=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay ventas para mostrar en este período. ",-1),Re=[Ve],ze={key:1},Oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Te={class:"p-6"},je={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},Ne=t("div",{class:"hidden md:block"},null,-1),Be=t("label",{for:"exp_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),He=t("label",{for:"exp_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),Pe={class:"flex gap-2"},Ye=["disabled"],Ue={class:"mt-4 flex flex-wrap gap-2"},qe=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),We={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ae={class:"p-6"},Ie={class:"flex justify-between items-center mb-4"},Xe=t("h3",{class:"text-lg font-semibold text-red-600"},"Historial de Gastos",-1),Ge=["href"],Ke=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Qe={class:"overflow-x-auto"},Je={class:"min-w-full divide-y divide-gray-200"},Ze=t("thead",{class:"bg-red-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Descripción"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Registrado por"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-red-800 uppercase"},"Monto")])],-1),ts={class:"bg-white divide-y divide-gray-200"},es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ss={class:"px-6 py-4 text-sm text-gray-900"},as={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},os={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600 text-right"},rs={key:0},ls=t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"}," No hay gastos registrados en este período. ",-1),ds=[ls],ns={key:2},is=t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[t("div",{class:"p-6"},[t("h3",{class:"text-lg font-semibold mb-4"},"Ventas en el Período Seleccionado"),t("p",null,"Gráfico temporalmente deshabilitado por debug")])],-1),cs=[is],us={key:3},hs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ps={class:"p-6 text-gray-900"},xs={class:"flex justify-between items-center mb-4"},bs=t("h3",{class:"text-lg font-semibold"},"Historial de Órdenes",-1),gs=["href"],ms=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),ys={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},vs={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},fs={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},_s={class:"sticky top-0 z-10 bg-gray-50"},ws=t("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),ks=[ws],Ss=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cliente",-1),Fs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Fecha",-1),Ms=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Estado",-1),Cs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Total",-1),Ds=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Productos",-1),$s=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cantidades",-1),Ls=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"P. Unitario",-1),Es={class:"bg-white divide-y divide-gray-200"},Vs=["title"],Rs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Os={class:"px-6 py-4 whitespace-nowrap"},Ts={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},js={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600 max-w-xl"},Ns={class:"font-medium"},Bs={key:0},Hs={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},Ps={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},Ys={key:0},Us=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay órdenes para mostrar en este período. ",-1),qs=[Us],at="rep_firstcol_w_px",Ws=60,As=320,Js={__name:"Index",props:{orders:Object,stats:Object,filters:Object,chartData:Object,physicalSales:Object,physicalSalesStats:Object,physicalSales:Object,physicalSalesStats:Object,physicalSalesFilters:Object,expensesList:Object},setup(o){const S=o,v=D("digital"),C=D("chart"),E=D("sales"),F=J({start_date:S.filters.start_date||"",end_date:S.filters.end_date||""}),h=J({start_date:S.physicalSalesFilters?.start_date||"",end_date:S.physicalSalesFilters?.end_date||"",search:S.physicalSalesFilters?.search||""}),j=()=>{v.value==="digital"?F.get(route("admin.reports.index"),{preserveState:!0,preserveScroll:!0}):h.get(route("admin.reports.index",{type:"physical"}),{preserveState:!0,preserveScroll:!0})},Y=a=>{const s=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0");return`${s}-${e}-${u}`},q=()=>{const a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},p=a=>{const s=q();let e,u;switch(a){case"today":e=s,u=s;break;case"last7":e=new Date(s),e.setDate(e.getDate()-6),u=s;break;case"last30":e=new Date(s),e.setDate(e.getDate()-29),u=s;break;case"thisMonth":e=new Date(s.getFullYear(),s.getMonth(),1),u=new Date(s.getFullYear(),s.getMonth()+1,0);break;case"lastMonth":e=new Date(s.getFullYear(),s.getMonth()-1,1),u=new Date(s.getFullYear(),s.getMonth(),0);break;default:return}const r=v.value==="digital"?F:h;r.start_date=Y(e),r.end_date=Y(u),j()},x=a=>{const s=v.value==="digital"?F:h,e=s.start_date,u=s.end_date;if(!e||!u)return!1;const r=q(),m=b=>Y(b),y=(b,T)=>b===T;switch(a){case"today":return y(e,m(r))&&y(u,m(r));case"last7":{const b=new Date(r);return b.setDate(b.getDate()-6),y(e,m(b))&&y(u,m(r))}case"last30":{const b=new Date(r);return b.setDate(b.getDate()-29),y(e,m(b))&&y(u,m(r))}case"thisMonth":{const b=new Date(r.getFullYear(),r.getMonth(),1),T=new Date(r.getFullYear(),r.getMonth()+1,0);return y(e,m(b))&&y(u,m(T))}case"lastMonth":{const b=new Date(r.getFullYear(),r.getMonth()-1,1),T=new Date(r.getFullYear(),r.getMonth(),0);return y(e,m(b))&&y(u,m(T))}default:return!1}};Z(()=>({labels:S.chartData.labels,datasets:[{label:"Entregadas",backgroundColor:"#10B981",borderColor:"#059669",borderWidth:1,borderRadius:4,data:S.chartData.delivered,barPercentage:.6,categoryPercentage:.6},{label:"Canceladas",backgroundColor:"#EF4444",borderColor:"#DC2626",borderWidth:1,borderRadius:4,data:S.chartData.cancelled,barPercentage:.6,categoryPercentage:.6}]}));const ot=a=>{if(!a)return"";const s={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString("es-CO",s)},W=a=>a?new Date(a).toLocaleString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",f=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),N=D(null),A=D(!1),I=D(!1),O=()=>{const a=N.value;if(!a)return;const s=a.scrollWidth-a.clientWidth,e=a.scrollLeft||0;A.value=e>0,I.value=e<s-1};rt(()=>{lt(()=>O()),N.value?.addEventListener("scroll",O,{passive:!0}),window.addEventListener("resize",O)}),dt(()=>{N.value?.removeEventListener("scroll",O),window.removeEventListener("resize",O)});const V=D(Number(localStorage.getItem(at))||160),X=Z(()=>({width:V.value+"px",minWidth:V.value+"px",maxWidth:V.value+"px"}));let G=0,K=0;const B=a=>{const s=a.touches?a.touches[0].clientX:a.clientX,e=Math.max(Ws,Math.min(As,K+(s-G)));V.value=e},H=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",H),document.removeEventListener("touchmove",B),document.removeEventListener("touchend",H);try{localStorage.setItem(at,String(V.value))}catch{}},Q=a=>{G=a.touches?a.touches[0].clientX:a.clientX,K=V.value,document.addEventListener("mousemove",B,{passive:!1}),document.addEventListener("mouseup",H),document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",H)};return(a,s)=>(l(),n(L,null,[w(i(nt),{title:"Reportes de Ventas"}),w(it,null,{header:M(()=>[ct]),default:M(()=>[t("div",ut,[t("div",ht,[t("div",pt,[t("nav",xt,[t("button",{onClick:s[0]||(s[0]=e=>{v.value="digital",C.value="chart"}),class:c([v.value==="digital"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Pedidos Digitales ",2),t("button",{onClick:s[1]||(s[1]=e=>v.value="physical"),class:c([v.value==="physical"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Ventas Físicas ",2)])]),v.value==="digital"?(l(),n("div",bt,[t("div",gt,[t("div",mt,[t("div",yt,[vt,t("p",ft,d(f(o.stats.totalSales)),1)])]),t("div",_t,[t("div",wt,[kt,t("p",St,d(o.stats.totalOrders),1)])])]),t("div",Ft,[t("div",Mt,[t("form",{onSubmit:P(j,["prevent"])},[t("div",Ct,[t("div",null,[Dt,k(t("input",{type:"date",id:"start_date","onUpdate:modelValue":s[2]||(s[2]=e=>i(F).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(F).start_date]])]),t("div",null,[$t,k(t("input",{type:"date",id:"end_date","onUpdate:modelValue":s[3]||(s[3]=e=>i(F).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(F).end_date]])]),t("div",Lt,[t("button",{type:"submit",disabled:i(F).processing,class:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,Et),w(i(R),{href:a.route("admin.reports.index"),class:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400 text-center"},{default:M(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Vt,[Rt,t("button",{type:"button",onClick:s[4]||(s[4]=e=>p("today")),class:c(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[5]||(s[5]=e=>p("last7")),class:c(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[6]||(s[6]=e=>p("last30")),class:c(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[7]||(s[7]=e=>p("thisMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[8]||(s[8]=e=>p("lastMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",zt,[t("nav",Ot,[t("button",{onClick:s[9]||(s[9]=e=>C.value="chart"),class:c([C.value==="chart"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Gráfico ",2),t("button",{onClick:s[10]||(s[10]=e=>C.value="table"),class:c([C.value==="table"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Tabla de Órdenes ",2)])])])):g("",!0),v.value==="physical"?(l(),n("div",Tt,[t("div",jt,[t("div",Nt,[t("div",Bt,[Ht,t("p",Pt,d(o.physicalSalesStats?f(o.physicalSalesStats.totalSales||0):"$0"),1)])]),t("div",Yt,[t("div",Ut,[qt,t("p",Wt,d(o.physicalSalesStats?f(o.physicalSalesStats.totalExpenses||0):"$0"),1)])]),t("div",At,[t("div",It,[Xt,t("p",Gt,d(o.physicalSalesStats?f(o.physicalSalesStats.netCash||0):"$0"),1)])]),t("div",Kt,[t("div",Qt,[Jt,t("p",Zt,d(o.physicalSalesStats&&o.physicalSalesStats.totalCount||0),1)])])]),t("div",te,[t("nav",ee,[t("button",{onClick:s[11]||(s[11]=e=>E.value="sales"),class:c([E.value==="sales"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Ventas ",2),t("button",{onClick:s[12]||(s[12]=e=>E.value="expenses"),class:c([E.value==="expenses"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Gastos ",2)])]),E.value==="sales"?(l(),n("div",se,[t("div",ae,[t("div",oe,[t("form",{onSubmit:P(j,["prevent"])},[t("div",re,[t("div",null,[le,k(t("input",{type:"text",id:"search_sale","onUpdate:modelValue":s[13]||(s[13]=e=>i(h).search=e),placeholder:"Ej: V-000001",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(h).search]])]),t("div",null,[de,k(t("input",{type:"date",id:"physical_start_date","onUpdate:modelValue":s[14]||(s[14]=e=>i(h).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(h).start_date]])]),t("div",null,[ne,k(t("input",{type:"date",id:"physical_end_date","onUpdate:modelValue":s[15]||(s[15]=e=>i(h).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(h).end_date]])]),t("div",ie,[t("button",{type:"submit",disabled:i(h).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,ce),w(i(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:M(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",ue,[he,t("button",{type:"button",onClick:s[16]||(s[16]=e=>p("today")),class:c(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[17]||(s[17]=e=>p("last7")),class:c(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[18]||(s[18]=e=>p("last30")),class:c(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[19]||(s[19]=e=>p("thisMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[20]||(s[20]=e=>p("lastMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",pe,[t("div",xe,[t("div",be,[ge,o.physicalSales&&o.physicalSales.data&&o.physicalSales.data.length>0?(l(),n("a",{key:0,href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition"},[ye,_(" Exportar Ventas ")],8,me)):g("",!0)]),t("div",ve,[t("table",fe,[_e,t("tbody",we,[(l(!0),n(L,null,z(o.physicalSales?.data,e=>(l(),n("tr",{key:e.id},[t("td",ke,[w(i(R),{href:a.route("admin.physical-sales.show",e.id),class:"hover:underline"},{default:M(()=>[_(d(e.sale_number),1)]),_:2},1032,["href"])]),t("td",Se,d(e.user?.name||"N/A"),1),t("td",Fe,d(W(e.created_at)),1),t("td",Me,d(e.payment_method),1),t("td",Ce,d(f(e.subtotal)),1),t("td",De,d(f(e.discount)),1),t("td",$e,d(f(e.total)),1),t("td",Le,[w(i(R),{href:a.route("admin.physical-sales.show",e.id),class:"text-blue-600 hover:text-blue-900"},{default:M(()=>[_(" Ver ")]),_:2},1032,["href"])])]))),128)),!o.physicalSales||!o.physicalSales.data||o.physicalSales.data.length===0?(l(),n("tr",Ee,Re)):g("",!0)])])]),o.physicalSales&&o.physicalSales.links?(l(),tt(U,{key:0,class:"mt-6",links:o.physicalSales.links},null,8,["links"])):g("",!0)])])])):g("",!0),E.value==="expenses"?(l(),n("div",ze,[t("div",Oe,[t("div",Te,[t("form",{onSubmit:P(j,["prevent"])},[t("div",je,[Ne,t("div",null,[Be,k(t("input",{type:"date",id:"exp_start_date","onUpdate:modelValue":s[21]||(s[21]=e=>i(h).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(h).start_date]])]),t("div",null,[He,k(t("input",{type:"date",id:"exp_end_date","onUpdate:modelValue":s[22]||(s[22]=e=>i(h).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,i(h).end_date]])]),t("div",Pe,[t("button",{type:"submit",disabled:i(h).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar Gastos ",8,Ye),w(i(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:M(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Ue,[qe,t("button",{type:"button",onClick:s[23]||(s[23]=e=>p("today")),class:c(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[24]||(s[24]=e=>p("last7")),class:c(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[25]||(s[25]=e=>p("last30")),class:c(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[26]||(s[26]=e=>p("thisMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[27]||(s[27]=e=>p("lastMonth")),class:c(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",We,[t("div",Ae,[t("div",Ie,[Xe,t("a",{href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:outline-none transition"},[Ke,_(" Exportar Reporte ")],8,Ge)]),t("div",Qe,[t("table",Je,[Ze,t("tbody",ts,[(l(!0),n(L,null,z(o.expensesList.data,e=>(l(),n("tr",{key:e.id},[t("td",es,d(W(e.expense_date)),1),t("td",ss,d(e.description),1),t("td",as,d(e.user?.name||"N/A"),1),t("td",os,d(f(e.amount)),1)]))),128)),!o.expensesList||!o.expensesList.data||o.expensesList.data.length===0?(l(),n("tr",rs,ds)):g("",!0)])])]),o.expensesList&&o.expensesList.links?(l(),tt(U,{key:0,class:"mt-6",links:o.expensesList.links},null,8,["links"])):g("",!0)])])])):g("",!0)])):g("",!0),v.value==="digital"&&C.value==="chart"?(l(),n("div",ns,cs)):g("",!0),v.value==="digital"&&C.value==="table"?(l(),n("div",us,[t("div",hs,[t("div",ps,[t("div",xs,[bs,o.orders.data.length>0?(l(),n("a",{key:0,href:a.route("admin.reports.export",{start_date:o.filters.start_date,end_date:o.filters.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[ms,_(" Exportar a Excel ")],8,gs)):g("",!0)]),t("div",{ref_key:"scrollBoxRef",ref:N,class:"relative overflow-x-auto"},[k(t("div",ys,null,512),[[et,A.value]]),k(t("div",vs,null,512),[[et,I.value]]),t("table",fs,[t("thead",_s,[t("tr",null,[t("th",{class:"sticky left-0 z-20 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:st(X.value)},[_(" Orden # "),t("div",{onMousedown:Q,onTouchstart:P(Q,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},ks,32)],4),Ss,Fs,Ms,Cs,Ds,$s,Ls])]),t("tbody",Es,[(l(!0),n(L,null,z(o.orders.data,(e,u)=>(l(),n("tr",{key:e.id,class:"odd:bg-white even:bg-gray-100"},[t("td",{class:c(["sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:underline border-r truncate",u%2===1?"bg-gray-100":"bg-white"]),style:st(X.value),title:e.sequence_number||e.id},[w(i(R),{href:a.route("admin.orders.show",e.id)},{default:M(()=>[_(d(e.sequence_number||e.sequence_number===0?e.sequence_number:e.id),1)]),_:2},1032,["href"])],14,Vs),t("td",Rs,d(e.customer_name),1),t("td",zs,d(ot(e.created_at)),1),t("td",Os,[t("span",{class:c(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":e.status==="entregado","bg-yellow-100 text-yellow-800":e.status==="recibido","bg-blue-100 text-blue-800":e.status==="en_preparacion","bg-purple-100 text-purple-800":e.status==="despachado","bg-red-100 text-red-800":e.status==="cancelado"}])},d(e.status),3)]),t("td",Ts,d(f(e.total_price)),1),t("td",js,[(l(!0),n(L,null,z(e.items,r=>(l(),n("div",{key:r.id},[t("span",Ns,d(r.product_name||r.product?.name),1),r.variant_options||r.variant?.options?(l(),n("span",Bs," ("+d(Object.entries(r.variant_options||r.variant?.options||{}).map(([m,y])=>`${m}: ${y}`).join(", "))+") ",1)):g("",!0)]))),128))]),t("td",Hs,[(l(!0),n(L,null,z(e.items,r=>(l(),n("div",{key:"q"+r.id},d(r.quantity),1))),128))]),t("td",Ps,[(l(!0),n(L,null,z(e.items,r=>(l(),n("div",{key:"p"+r.id},d(f(r.unit_price)),1))),128))])]))),128)),o.orders.data.length===0?(l(),n("tr",Ys,qs)):g("",!0)])])],512),w(U,{class:"mt-6",links:o.orders.links},null,8,["links"])])])])):g("",!0)])])]),_:1})],64))}};export{Js as default};
