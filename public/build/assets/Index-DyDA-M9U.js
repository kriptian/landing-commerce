import{r as d,c as he,w as ze,B as Le,C as H,D as Te,a as l,o as r,b as E,d as Me,h as $e,e as B,f as t,T as me,i as p,j as h,n as y,m as T,t as c,F as N,s as I,x as g,E as _e,y as Z,g as Be,A as ve,G as Ie}from"./app-Ci2tMwYp.js";import{_ as Re}from"./AuthenticatedLayout-yxxeSqKN.js";import{_ as Pe}from"./Pagination-CQHGqZr0.js";import{_ as Ae}from"./Modal-BjVvNRw8.js";import{_ as Ue}from"./AlertModal-qmVh7xon.js";const Oe=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestión de Inventario",-1),Fe={class:"py-12"},je={class:"max-w-screen-2xl mx-auto sm:px-6 lg:px-8"},Ge={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},He={class:"p-6 text-gray-900"},Xe={class:"mb-4 flex items-center justify-between"},Qe={class:"flex items-center gap-3"},We=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})],-1),De=[We],Ke={key:0,class:"relative"},Je={class:"flex items-center gap-2"},Ye=["href"],Ze=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),et=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})],-1),tt=t("span",{class:"hidden md:inline ml-1"},"Nueva Entrada",-1),st=[et,tt],at={class:"relative z-30"},ot=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1),nt={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-lg z-50"},lt=["onClick"],rt={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},it={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},ct={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},dt={class:"sticky top-0 z-10 bg-gray-50"},ut=t("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),pt=[ut],ht=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"STOCK ACTUAL",-1),mt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ COMPRA",-1),_t=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ VENTA",-1),vt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"% Gan.",-1),xt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"$ Gan.",-1),yt=t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Estado",-1),gt={class:"bg-white divide-y divide-gray-200"},ft={key:0,class:"odd:bg-white even:bg-gray-100 group"},wt={class:"flex items-center gap-2"},bt=["onClick"],kt=t("svg",{class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.16 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1),Ct=[kt],St=["title"],Et={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},Nt={key:0,class:"text-xs text-gray-500 font-normal ml-1"},Vt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},qt={key:0,class:"text-xs text-gray-500"},zt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700"},Lt={key:0},Tt={key:1,class:"text-gray-400 italic text-xs"},Mt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},$t={key:1,class:"text-gray-400 text-xs"},Bt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},It={key:1,class:"text-gray-400 text-xs"},Rt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},Pt={class:"flex items-center gap-2"},At=t("svg",{class:"w-3 h-3 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t("polyline",{points:"16 17 21 12 16 7"}),t("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),Ut={class:"truncate"},Ot={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600 font-medium"},Ft={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600"},jt={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm text-gray-600"},Gt={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm"},Ht={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap text-sm"},Xt={class:"px-3 py-2 sm:px-6 sm:py-3 whitespace-nowrap"},Qt=t("td",{class:"px-3 py-2 sm:px-6 sm:py-3"},null,-1),Wt={key:0},Dt=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay productos para mostrar. ",-1),Kt=[Dt],Jt={class:"p-6"},Yt={class:"text-lg font-medium text-gray-900 mb-4"},Zt={key:0},es={key:1},ts={key:0},ss={key:0,class:"mt-4 max-h-60 overflow-y-auto border rounded-md"},as=["onClick"],os={class:"font-medium"},ns={class:"text-xs text-gray-500"},ls=t("div",{class:"text-indigo-600 opacity-0 group-hover:opacity-100 font-bold text-sm"},"SELECCIONAR",-1),rs={key:1,class:"mt-4 text-gray-500 text-center text-sm"},is={key:1,class:"max-h-[60vh] overflow-y-auto pr-2"},cs={key:0},ds={class:"bg-gray-50 p-4 rounded-md border text-sm grid gap-4"},us={class:"grid grid-cols-2 gap-4"},ps=t("label",{class:"block text-gray-500 text-xs"},"Stock Actual",-1),hs={class:"font-bold text-lg"},ms=t("label",{class:"block text-gray-700 font-bold mb-1"},"Agregar Stock (+)",-1),_s={class:"grid grid-cols-2 gap-4"},vs=t("label",{class:"block text-gray-500 text-xs"},"Precio Compra",-1),xs=["placeholder"],ys=t("label",{class:"block text-gray-500 text-xs"},"Precio Venta",-1),gs=["placeholder"],fs={class:"flex justify-end mt-2"},ws=["disabled"],bs={class:"font-bold text-gray-800 border-b pb-2 mb-2 bg-gray-50 -mx-3 -mt-3 px-3 pt-2 text-sm"},ks={key:0,class:"text-gray-400 font-normal text-xs"},Cs={class:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end"},Ss={class:"md:col-span-1"},Es=t("label",{class:"block text-gray-400 text-[10px] uppercase"},"Actual",-1),Ns={class:"font-bold"},Vs={class:"md:col-span-2"},qs=t("label",{class:"block text-gray-700 text-xs font-bold mb-1"},"Sumar (+)",-1),zs=["onUpdate:modelValue"],Ls={class:"md:col-span-2"},Ts=t("label",{class:"block text-gray-500 text-[10px] uppercase"},"$ Compra",-1),Ms=["onUpdate:modelValue","title"],$s={class:"md:col-span-2 flex gap-2"},Bs={class:"flex-1"},Is=t("label",{class:"block text-gray-500 text-[10px] uppercase"},"$ Venta",-1),Rs=["onUpdate:modelValue","title"],Ps=["onClick","disabled"],As=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-4 h-4"},[t("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1),Us=[As],xe="inv_firstcol_w_px",Os=90,Fs=320,Ws={__name:"Index",props:{products:Object,filters:Object},setup(R){const X=R,P=d(!!X.filters?.search),M=d(X.filters?.search||""),f=d(X.filters?.status||""),ee=d(null),A=d(!1),Q=d({}),W=[{value:"",label:"Todos"},{value:"out_of_stock",label:"Agotados"},{value:"low_stock",label:"¡Pocas unidades!"}],ye=he(()=>(W.find(s=>s.value===f.value)||W[0]).label),ge=async()=>{P.value=!P.value,P.value?(await H(),ee.value?.focus()):(M.value="",D())},D=()=>{ve.get(route("admin.inventory.index"),{search:M.value||void 0,status:f.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})};let te;ze(M,()=>{clearTimeout(te),te=setTimeout(()=>D(),350)});const fe=s=>{f.value=s,A.value=!1,D()},we=s=>{if(!f.value)return!0;const a=Number(s.quantity)||0,e=Number(s.alert)||0;return f.value==="out_of_stock"?a<=0:f.value==="low_stock"?e>0&&a>0&&a<=e:!0},U=s=>{const a=Number(s.stock)||0,e=Number(s.alert)||0;return a<=0?{text:"Agotado",class:"bg-red-100 text-red-800"}:e>0&&a<=e?{text:"¡Pocas unidades!",class:"bg-yellow-100 text-yellow-800"}:{text:"En Stock",class:"bg-green-100 text-green-800"}},w=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(Number(s||0)),V=(s,a)=>{const e=Number(s||0),i=Number(a||0);return!e||!i||i<=0?null:Number(((i-e)/i*100).toFixed(2))},q=(s,a)=>{const e=Number(s||0),i=Number(a||0);if(!e||!i||e<=0)return null;const n=i-e;return n>=0?n:null},be=s=>Object.entries(s).map(([a,e])=>`${a}: ${e}`).join(", "),ke=s=>{Q.value[s]=!Q.value[s]},se=s=>!!Q.value[s],m=s=>s.variant_options&&s.variant_options.length>0?!0:s.variants&&s.variants.length>0?s.variants.some(a=>a.options&&Object.keys(a.options).length>0):!1,ae=s=>{let a=be(s.options||{});return s.sku&&(a+=` (SKU: ${s.sku})`),a},b=s=>s.variants&&s.variants.length>0&&s.variant_options&&s.variant_options.length>0?s.variants.reduce((a,e)=>a+(Number(e.stock)||0),0):Number(s.quantity)||0,Ce=s=>{if(!m(s))return w(s.purchase_price);const a=s.variants.reduce((e,i)=>{const n=Number(i.stock)||0,S=Number(i.purchase_price)||0;return e+n*S},0);return w(a)},K=d(!1),k=d(""),C=d([]),o=d(null),z=d(!1),Se=()=>{k.value="",C.value=[],o.value=null,K.value=!0,H(()=>document.getElementById("quick-search-input")?.focus())},oe=()=>{K.value=!1},J=async()=>{if(k.value.length<2)return Promise.resolve();try{const s=await Ie.get(route("admin.inventory.search",{q:k.value}));return C.value=s.data,Promise.resolve()}catch(s){return console.error(s),Promise.resolve()}};let ne;const Ee=()=>{if(clearTimeout(ne),k.value.length<2){C.value=[];return}ne=setTimeout(J,300)},Ne=s=>{o.value=JSON.parse(JSON.stringify(s));const a=o.value.variants&&o.value.variants.length>0&&o.value.variant_options&&o.value.variant_options.length>0;a||(o.value.quantity=b(o.value)),a?o.value.variants.forEach(e=>{e.qty_add="",e.new_price=e.price,e.new_purchase_price=e.purchase_price}):(o.value.qty_add="",o.value.new_price=o.value.price,o.value.new_purchase_price=o.value.purchase_price)},Ve=()=>{o.value=null,H(()=>document.getElementById("quick-search-input")?.focus()),J()},le=(s,a,e,i,n)=>{if(z.value)return;const S=Number(e)||0;!e&&i===void 0&&n===void 0||(z.value=!0,ve.post(route("admin.inventory.quick-update"),{id:s,type:a,quantity_add:S,purchase_price:i,price:n},{preserveScroll:!0,preserveState:!1,onSuccess:async()=>{if(re("success","Éxito","Inventario actualizado correctamente."),await J(),a==="product"&&o.value&&o.value.id===s){const v=C.value.find(G=>G.id===s);v?(o.value.quantity=b(v),o.value.purchase_price=v.purchase_price,o.value.price=v.price):(S>0&&(o.value.quantity=(Number(o.value.quantity)||0)+S),i!==void 0&&(o.value.purchase_price=i),n!==void 0&&(o.value.price=n)),o.value.qty_add=""}else if(a==="variant"&&o.value){const v=C.value.find(u=>u.id===o.value.id);if(v&&v.variants){const u=v.variants.find(x=>x.id===s);if(u){const x=o.value.variants.find(qe=>qe.id===s);x&&(x.stock=Number(u.stock)||0,x.purchase_price=u.purchase_price,x.price=u.price)}}else{const u=o.value.variants.find(x=>x.id===s);u&&(S>0&&(u.stock=(Number(u.stock)||0)+S),i!==void 0&&(u.purchase_price=i),n!==void 0&&(u.price=n))}const G=o.value.variants.find(u=>u.id===s);G&&(G.qty_add="")}z.value=!1},onError:()=>{z.value=!1,re("error","Error","No se pudo actualizar el inventario.")}}))},_=d({show:!1,type:"success",title:"",message:""}),re=(s,a,e)=>{_.value={show:!0,type:s,title:a,message:e},s==="success"&&setTimeout(()=>{_.value.show=!1},1500)},O=d(null),ie=d(!1),ce=d(!1),$=()=>{const s=O.value;if(!s)return;const a=s.scrollWidth-s.clientWidth,e=s.scrollLeft||0;ie.value=e>0,ce.value=e<a-1};Le(()=>{H(()=>$()),O.value?.addEventListener("scroll",$,{passive:!0}),window.addEventListener("resize",$)}),Te(()=>{O.value?.removeEventListener("scroll",$),window.removeEventListener("resize",$)});const L=d(Number(localStorage.getItem(xe))||180),Y=he(()=>({width:L.value+"px",minWidth:L.value+"px",maxWidth:L.value+"px"}));let de=0,ue=0;const F=s=>{const a=s.touches?s.touches[0].clientX:s.clientX,e=Math.max(Os,Math.min(Fs,ue+(a-de)));L.value=e},j=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",j);try{localStorage.setItem(xe,String(L.value))}catch{}},pe=s=>{de=s.touches?s.touches[0].clientX:s.clientX,ue=L.value,document.addEventListener("mousemove",F,{passive:!1}),document.addEventListener("mouseup",j),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",j)};return(s,a)=>(r(),l(N,null,[E(Me($e),{title:"Gestión de Inventario"}),E(Re,null,{header:B(()=>[Oe]),default:B(()=>[t("div",Fe,[t("div",je,[t("div",Ge,[t("div",He,[t("div",Xe,[t("div",Qe,[t("button",{type:"button",onClick:ge,class:"p-2 rounded hover:bg-gray-100 transition"},De),E(me,{name:"fade-slide"},{default:B(()=>[P.value?(r(),l("div",Ke,[h(t("input",{ref_key:"searchInputRef",ref:ee,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),type:"text",placeholder:"Buscar producto...",class:"w-64 md:w-80 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[y,M.value]])])):p("",!0)]),_:1})]),t("div",Je,[t("a",{href:s.route("admin.inventory.export"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[Ze,T(" Exportar a Excel ")],8,Ye),t("button",{type:"button",onClick:Se,class:"inline-flex items-center px-3 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-800 transition ease-in-out duration-150",title:"Entrada Rápida"},st),t("div",at,[t("button",{type:"button",onClick:a[1]||(a[1]=e=>A.value=!A.value),class:"inline-flex items-center gap-2 px-3 py-2 border rounded-md shadow-sm hover:bg-gray-50"},[t("span",null,c(ye.value),1),ot]),E(me,{name:"fade-slide"},{default:B(()=>[A.value?(r(),l("ul",nt,[(r(),l(N,null,I(W,e=>t("li",{key:e.value},[t("button",{type:"button",onClick:i=>fe(e.value),class:g(["w-full text-left px-3 py-2 hover:bg-gray-100",{"font-semibold text-indigo-600":e.value===f.value}])},c(e.label),11,lt)])),64))])):p("",!0)]),_:1})])])]),t("div",{ref_key:"scrollBoxRef",ref:O,class:"relative overflow-x-auto w-full z-0"},[h(t("div",rt,null,512),[[_e,ie.value]]),h(t("div",it,null,512),[[_e,ce.value]]),t("table",ct,[t("thead",dt,[t("tr",null,[t("th",{class:"sticky left-0 z-20 bg-gray-50 px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:Z(Y.value)},[T(" Producto "),t("div",{onMousedown:pe,onTouchstart:Be(pe,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},pt,32)],4),ht,mt,_t,vt,xt,yt])]),t("tbody",gt,[(r(!0),l(N,null,I(R.products.data,(e,i)=>(r(),l(N,{key:e.id},[we(e)?(r(),l("tr",ft,[t("td",{class:"sticky left-0 z-10 px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r bg-[inherit]",style:Z(Y.value)},[t("div",wt,[e.variants&&e.variants.length>0?(r(),l("button",{key:0,type:"button",onClick:n=>ke(e.id),class:g(["p-1 rounded hover:bg-gray-200 text-gray-500 transition-transform duration-200",{"rotate-90":se(e.id)}])},Ct,10,bt)):p("",!0),t("span",{class:"truncate",title:e.name},c(e.name),9,St)])],4),t("td",Et,[T(c(b(e))+" ",1),m(e)?(r(),l("span",Nt,"(Total)")):p("",!0)]),t("td",Vt,[T(c(Ce(e))+" ",1),m(e)?(r(),l("div",qt,"Inversión Total")):p("",!0)]),t("td",zt,[m(e)?(r(),l("span",Tt,"Ver variantes")):(r(),l("span",Lt,c(w(e.price)),1))]),t("td",Mt,[m(e)?(r(),l("span",$t,"—")):(r(),l("span",{key:0,class:g({"text-gray-500":V(e.purchase_price,e.price)===null})},c(V(e.purchase_price,e.price)!==null?V(e.purchase_price,e.price)+"%":"—"),3))]),t("td",Bt,[m(e)?(r(),l("span",It,"—")):(r(),l("span",{key:0,class:g({"text-gray-500":q(e.purchase_price,e.price)===null})},c(q(e.purchase_price,e.price)!==null?w(q(e.purchase_price,e.price)):"—"),3))]),t("td",Rt,[t("span",{class:g(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",U({stock:b(e),alert:e.alert||0}).class])},c(U({stock:b(e),alert:e.alert||0}).text),3)])])):p("",!0),se(e.id)&&m(e)?(r(!0),l(N,{key:1},I(e.variants,n=>(r(),l("tr",{key:n.id,class:"bg-gray-50 border-b border-gray-100"},[t("td",{class:"sticky left-0 z-10 px-3 py-2 sm:px-6 sm:py-3 text-sm text-gray-500 border-r bg-gray-50",style:Z({...Y.value,paddingLeft:"2rem"})},[t("div",Pt,[At,t("span",Ut,c(ae(n)),1)])],4),t("td",Ot,c(Number(n.stock)||0),1),t("td",Ft,c(w(n.purchase_price||e.purchase_price)),1),t("td",jt,c(w(n.price||e.price)),1),t("td",Gt,[t("span",{class:g({"text-gray-400":V(n.purchase_price||e.purchase_price,n.price||e.price)===null})},c(V(n.purchase_price||e.purchase_price,n.price||e.price)!==null?V(n.purchase_price||e.purchase_price,n.price||e.price)+"%":"—"),3)]),t("td",Ht,[t("span",{class:g({"text-green-600 font-medium":q(n.purchase_price||e.purchase_price,n.price||e.price)!==null})},c(q(n.purchase_price||e.purchase_price,n.price||e.price)!==null?w(q(n.purchase_price||e.purchase_price,n.price||e.price)):"—"),3)]),t("td",Xt,[t("span",{class:g(["px-2 inline-flex text-[10px] leading-4 font-semibold rounded-full",U({stock:n.stock,alert:n.alert||0}).class])},c(U({stock:n.stock,alert:n.alert||0}).text),3)]),Qt]))),128)):p("",!0)],64))),128)),R.products.data.length===0?(r(),l("tr",Wt,Kt)):p("",!0)])])],512),E(Pe,{class:"mt-6",links:R.products.links},null,8,["links"])])])])]),E(Ae,{show:K.value,onClose:oe},{default:B(()=>[t("div",Jt,[t("h2",Yt,[o.value?(r(),l("span",es,[t("button",{onClick:Ve,class:"text-indigo-600 hover:underline mr-2"},"←"),T(" Editando: "+c(o.value.name),1)])):(r(),l("span",Zt,"Buscar Producto para Entrada Rápida"))]),o.value?(r(),l("div",is,[m(o.value)?(r(!0),l(N,{key:1},I(o.value.variants,e=>(r(),l("div",{key:e.id,class:"mb-4 bg-white border rounded-md p-3 shadow-sm"},[t("div",bs,[T(c(ae(e))+" ",1),e.sku?(r(),l("span",ks,"("+c(e.sku)+")",1)):p("",!0)]),t("div",Cs,[t("div",Ss,[Es,t("div",Ns,c(e.stock),1)]),t("div",Vs,[qs,h(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.qty_add=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2"},null,8,zs),[[y,e.qty_add]])]),t("div",Ls,[Ts,h(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.new_purchase_price=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2",placeholder:"Heredado",title:"Heredado: "+(o.value.purchase_price||0)},null,8,Ms),[[y,e.new_purchase_price]])]),t("div",$s,[t("div",Bs,[Is,h(t("input",{type:"number",min:"0","onUpdate:modelValue":i=>e.new_price=i,class:"w-full border-gray-300 rounded shadow-sm text-sm py-1 px-2",placeholder:"Heredado",title:"Heredado: "+(o.value.price||0)},null,8,Rs),[[y,e.new_price]])]),t("button",{onClick:i=>le(e.id,"variant",e.qty_add,e.new_purchase_price,e.new_price),disabled:z.value,class:"mb-[1px] p-2 bg-green-50 text-green-700 border border-green-200 rounded hover:bg-green-100 transition",title:"Guardar Variantes"},Us,8,Ps)])])]))),128)):(r(),l("div",cs,[t("div",ds,[t("div",us,[t("div",null,[ps,t("div",hs,c(b(o.value)),1)]),t("div",null,[ms,h(t("input",{type:"number",min:"0","onUpdate:modelValue":a[3]||(a[3]=e=>o.value.qty_add=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8"},null,512),[[y,o.value.qty_add]])])]),t("div",_s,[t("div",null,[vs,h(t("input",{type:"number",min:"0","onUpdate:modelValue":a[4]||(a[4]=e=>o.value.new_purchase_price=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8",placeholder:o.value.purchase_price},null,8,xs),[[y,o.value.new_purchase_price]])]),t("div",null,[ys,h(t("input",{type:"number",min:"0","onUpdate:modelValue":a[5]||(a[5]=e=>o.value.new_price=e),class:"w-full border-gray-300 rounded-md shadow-sm h-8",placeholder:o.value.price},null,8,gs),[[y,o.value.new_price]])])]),t("div",fs,[t("button",{onClick:a[6]||(a[6]=e=>le(o.value.id,"product",o.value.qty_add,o.value.new_purchase_price,o.value.new_price)),disabled:z.value,class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition disabled:opacity-50"}," Guardar ",8,ws)])])]))])):(r(),l("div",ts,[h(t("input",{id:"quick-search-input",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),onInput:Ee,placeholder:"Escribe el nombre o escanea código...",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[y,k.value]]),C.value.length>0?(r(),l("div",ss,[(r(!0),l(N,null,I(C.value,e=>(r(),l("div",{key:e.id,onClick:i=>Ne(e),class:"p-2 hover:bg-gray-100 cursor-pointer border-b last:border-b-0 flex justify-between items-center group"},[t("div",null,[t("div",os,c(e.name),1),t("div",ns," Stock Total: "+c(b(e)),1)]),ls],8,as))),128))])):k.value.length>2?(r(),l("div",rs," No se encontraron productos. ")):p("",!0)])),t("div",{class:"mt-6 flex justify-end"},[t("button",{onClick:oe,class:"text-gray-500 hover:text-gray-700 mr-4"},"Cerrar")])])]),_:1},8,["show"]),E(Ue,{show:_.value.show,type:_.value.type,title:_.value.title,message:_.value.message,primaryText:"Aceptar",onClose:a[7]||(a[7]=e=>_.value.show=!1),onPrimary:a[8]||(a[8]=e=>_.value.show=!1)},null,8,["show","type","title","message"])]),_:1})],64))}};export{Ws as default};
