import{r as D,u as J,c as Z,B as nt,C as dt,D as it,a as i,o as d,b as w,d as c,h as ct,e as C,f as t,i as m,p as u,t as n,g as H,j as k,q as $,l as R,m as _,y as tt,F as E,n as T,E as et,s as st}from"./app-BWfncV94.js";import{_ as ut}from"./AuthenticatedLayout-J7uuA0aO.js";import{_ as q}from"./Pagination-CmuQO-1Y.js";import"./AlertModal-CyuLGaFw.js";import"./Modal-BKig7U95.js";const pt=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Reportes de Ventas",-1),ht={class:"py-12"},xt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},bt={class:"mb-6 border-b border-gray-200"},gt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},mt={key:0},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},ft={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},vt={class:"p-6"},_t=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales (en el período)",-1),wt={class:"mt-1 text-3xl font-semibold text-gray-900"},kt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},St={class:"p-6"},Ft=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Órdenes Totales (en el período)",-1),Ct={class:"mt-1 text-3xl font-semibold text-gray-900"},Mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},Dt={class:"p-6"},$t={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},Et=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"Desde",-1),Lt=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"Hasta",-1),Vt={class:"flex space-x-2"},Rt=["disabled"],Tt={class:"mt-4 flex flex-wrap gap-2"},zt=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),Ot={class:"mb-4 border-b border-gray-200"},Pt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},jt={key:1},Nt={class:"flex flex-wrap gap-4 mb-6"},Bt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Ht={class:"p-6"},Yt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales",-1),qt={class:"mt-1 text-2xl font-semibold text-gray-900"},Ut={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Gt={class:"p-6"},Wt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gastos / Salidas",-1),At={class:"mt-1 text-2xl font-semibold text-red-600"},It={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Xt={class:"p-6"},Kt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Efectivo Neto",-1),Qt={class:"mt-1 text-2xl font-semibold text-blue-600"},Jt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Zt={class:"p-6"},te=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ganancia Total",-1),ee={class:"mt-1 text-2xl font-semibold text-green-600"},se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},ae={class:"p-6"},oe=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"# Ventas",-1),re={class:"mt-1 text-2xl font-semibold text-gray-900"},le={class:"mb-6 border-b border-gray-200"},ne={class:"-mb-px flex space-x-8"},de={key:0},ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ce={class:"p-6"},ue={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},pe=t("label",{for:"search_sale",class:"block text-sm font-medium text-gray-700"},"Buscar por número",-1),he=t("label",{for:"physical_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),xe=t("label",{for:"physical_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),be={class:"flex gap-2"},ge=["disabled"],me={class:"mt-4 flex flex-wrap gap-2"},ye=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),fe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ve={class:"p-6"},_e={class:"flex justify-between items-center mb-4"},we=t("h3",{class:"text-lg font-semibold"},"Historial de Ventas Físicas",-1),ke=["href"],Se=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Fe={class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},Me=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Número"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Vendedor"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Método de Pago"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ganancia"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1),De={class:"bg-white divide-y divide-gray-200"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm"},je={key:0},Ne=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay ventas para mostrar en este período. ",-1),Be=[Ne],He={key:1},Ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},qe={class:"p-6"},Ue={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},Ge=t("div",{class:"hidden md:block"},null,-1),We=t("label",{for:"exp_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),Ae=t("label",{for:"exp_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),Ie={class:"flex gap-2"},Xe=["disabled"],Ke={class:"mt-4 flex flex-wrap gap-2"},Qe=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),Je={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ze={class:"p-6"},ts={class:"flex justify-between items-center mb-4"},es=t("h3",{class:"text-lg font-semibold text-red-600"},"Historial de Gastos",-1),ss=["href"],as=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),os={class:"overflow-x-auto"},rs={class:"min-w-full divide-y divide-gray-200"},ls=t("thead",{class:"bg-red-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Descripción"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Registrado por"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-red-800 uppercase"},"Monto")])],-1),ns={class:"bg-white divide-y divide-gray-200"},ds={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},is={class:"px-6 py-4 text-sm text-gray-900"},cs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},us={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600 text-right"},ps={key:0},hs=t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"}," No hay gastos registrados en este período. ",-1),xs=[hs],bs={key:2},gs=t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[t("div",{class:"p-6"},[t("h3",{class:"text-lg font-semibold mb-4"},"Ventas en el Período Seleccionado"),t("p",null,"Gráfico temporalmente deshabilitado por debug")])],-1),ms=[gs],ys={key:3},fs={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},vs={class:"p-6 text-gray-900"},_s={class:"flex justify-between items-center mb-4"},ws=t("h3",{class:"text-lg font-semibold"},"Historial de Órdenes",-1),ks=["href"],Ss=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Fs={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},Cs={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},Ms={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},Ds={class:"sticky top-0 z-10 bg-gray-50"},$s=t("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),Es=[$s],Ls=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cliente",-1),Vs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Fecha",-1),Rs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Estado",-1),Ts=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Total",-1),zs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Productos",-1),Os=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cantidades",-1),Ps=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"P. Unitario",-1),js={class:"bg-white divide-y divide-gray-200"},Ns=["title"],Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Hs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ys={class:"px-6 py-4 whitespace-nowrap"},qs={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Us={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600 max-w-xl"},Gs={class:"font-medium"},Ws={key:0},As={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},Is={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},Xs={key:0},Ks=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay órdenes para mostrar en este período. ",-1),Qs=[Ks],at="rep_firstcol_w_px",Js=60,Zs=320,ra={__name:"Index",props:{orders:Object,stats:Object,filters:Object,chartData:Object,physicalSales:Object,physicalSalesStats:Object,physicalSales:Object,physicalSalesStats:Object,physicalSalesFilters:Object,expensesList:Object},setup(o){const S=o,v=D("digital"),M=D("chart"),L=D("sales"),F=J({start_date:S.filters.start_date||"",end_date:S.filters.end_date||""}),p=J({start_date:S.physicalSalesFilters?.start_date||"",end_date:S.physicalSalesFilters?.end_date||"",search:S.physicalSalesFilters?.search||""}),P=()=>{v.value==="digital"?F.get(route("admin.reports.index"),{preserveState:!0,preserveScroll:!0}):p.get(route("admin.reports.index",{type:"physical"}),{preserveState:!0,preserveScroll:!0})},Y=a=>{const s=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0");return`${s}-${e}-${l}`},U=()=>{const a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},h=a=>{const s=U();let e,l;switch(a){case"today":e=s,l=s;break;case"last7":e=new Date(s),e.setDate(e.getDate()-6),l=s;break;case"last30":e=new Date(s),e.setDate(e.getDate()-29),l=s;break;case"thisMonth":e=new Date(s.getFullYear(),s.getMonth(),1),l=new Date(s.getFullYear(),s.getMonth()+1,0);break;case"lastMonth":e=new Date(s.getFullYear(),s.getMonth()-1,1),l=new Date(s.getFullYear(),s.getMonth(),0);break;default:return}const r=v.value==="digital"?F:p;r.start_date=Y(e),r.end_date=Y(l),P()},x=a=>{const s=v.value==="digital"?F:p,e=s.start_date,l=s.end_date;if(!e||!l)return!1;const r=U(),g=b=>Y(b),f=(b,O)=>b===O;switch(a){case"today":return f(e,g(r))&&f(l,g(r));case"last7":{const b=new Date(r);return b.setDate(b.getDate()-6),f(e,g(b))&&f(l,g(r))}case"last30":{const b=new Date(r);return b.setDate(b.getDate()-29),f(e,g(b))&&f(l,g(r))}case"thisMonth":{const b=new Date(r.getFullYear(),r.getMonth(),1),O=new Date(r.getFullYear(),r.getMonth()+1,0);return f(e,g(b))&&f(l,g(O))}case"lastMonth":{const b=new Date(r.getFullYear(),r.getMonth()-1,1),O=new Date(r.getFullYear(),r.getMonth(),0);return f(e,g(b))&&f(l,g(O))}default:return!1}};Z(()=>({labels:S.chartData.labels,datasets:[{label:"Entregadas",backgroundColor:"#10B981",borderColor:"#059669",borderWidth:1,borderRadius:4,data:S.chartData.delivered,barPercentage:.6,categoryPercentage:.6},{label:"Canceladas",backgroundColor:"#EF4444",borderColor:"#DC2626",borderWidth:1,borderRadius:4,data:S.chartData.cancelled,barPercentage:.6,categoryPercentage:.6}]}));const ot=a=>{if(!a)return"";const s={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString("es-CO",s)},G=a=>a?new Date(a).toLocaleString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",y=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),rt=a=>{if(!a||!a.items)return"-";let s=0,e=!0;for(const l of a.items){let r=0;if(l.variant&&l.variant.purchase_price>0?r=parseFloat(l.variant.purchase_price):l.product&&l.product.purchase_price>0&&(r=parseFloat(l.product.purchase_price)),r>0){const g=(parseFloat(l.unit_price)-r)*l.quantity;s+=g}else e=!1}return e?y(s):"-"},lt=a=>{let s=parseFloat(a.discount||0);return a.items&&a.items.forEach(e=>{const l=parseFloat(e.original_price||0),r=parseFloat(e.unit_price||0);l>r&&(s+=(l-r)*e.quantity)}),y(s)},j=D(null),W=D(!1),A=D(!1),z=()=>{const a=j.value;if(!a)return;const s=a.scrollWidth-a.clientWidth,e=a.scrollLeft||0;W.value=e>0,A.value=e<s-1};nt(()=>{dt(()=>z()),j.value?.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",z)}),it(()=>{j.value?.removeEventListener("scroll",z),window.removeEventListener("resize",z)});const V=D(Number(localStorage.getItem(at))||160),I=Z(()=>({width:V.value+"px",minWidth:V.value+"px",maxWidth:V.value+"px"}));let X=0,K=0;const N=a=>{const s=a.touches?a.touches[0].clientX:a.clientX,e=Math.max(Js,Math.min(Zs,K+(s-X)));V.value=e},B=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",B),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",B);try{localStorage.setItem(at,String(V.value))}catch{}},Q=a=>{X=a.touches?a.touches[0].clientX:a.clientX,K=V.value,document.addEventListener("mousemove",N,{passive:!1}),document.addEventListener("mouseup",B),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("touchend",B)};return(a,s)=>(d(),i(E,null,[w(c(ct),{title:"Reportes de Ventas"}),w(ut,null,{header:C(()=>[pt]),default:C(()=>[t("div",ht,[t("div",xt,[t("div",bt,[t("nav",gt,[t("button",{onClick:s[0]||(s[0]=e=>{v.value="digital",M.value="chart"}),class:u([v.value==="digital"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Pedidos Digitales ",2),t("button",{onClick:s[1]||(s[1]=e=>v.value="physical"),class:u([v.value==="physical"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Ventas Físicas ",2)])]),v.value==="digital"?(d(),i("div",mt,[t("div",yt,[t("div",ft,[t("div",vt,[_t,t("p",wt,n(y(o.stats.totalSales)),1)])]),t("div",kt,[t("div",St,[Ft,t("p",Ct,n(o.stats.totalOrders),1)])])]),t("div",Mt,[t("div",Dt,[t("form",{onSubmit:H(P,["prevent"])},[t("div",$t,[t("div",null,[Et,k(t("input",{type:"date",id:"start_date","onUpdate:modelValue":s[2]||(s[2]=e=>c(F).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(F).start_date]])]),t("div",null,[Lt,k(t("input",{type:"date",id:"end_date","onUpdate:modelValue":s[3]||(s[3]=e=>c(F).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(F).end_date]])]),t("div",Vt,[t("button",{type:"submit",disabled:c(F).processing,class:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,Rt),w(c(R),{href:a.route("admin.reports.index"),class:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Tt,[zt,t("button",{type:"button",onClick:s[4]||(s[4]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[5]||(s[5]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[6]||(s[6]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[7]||(s[7]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[8]||(s[8]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",Ot,[t("nav",Pt,[t("button",{onClick:s[9]||(s[9]=e=>M.value="chart"),class:u([M.value==="chart"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Gráfico ",2),t("button",{onClick:s[10]||(s[10]=e=>M.value="table"),class:u([M.value==="table"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Tabla de Órdenes ",2)])])])):m("",!0),v.value==="physical"?(d(),i("div",jt,[t("div",Nt,[t("div",Bt,[t("div",Ht,[Yt,t("p",qt,n(o.physicalSalesStats?y(o.physicalSalesStats.totalSales||0):"$0"),1)])]),t("div",Ut,[t("div",Gt,[Wt,t("p",At,n(o.physicalSalesStats?y(o.physicalSalesStats.totalExpenses||0):"$0"),1)])]),t("div",It,[t("div",Xt,[Kt,t("p",Qt,n(o.physicalSalesStats?y(o.physicalSalesStats.netCash||0):"$0"),1)])]),t("div",Jt,[t("div",Zt,[te,t("p",ee,n(o.physicalSalesStats?y(o.physicalSalesStats.totalProfit||0):"$0"),1)])]),t("div",se,[t("div",ae,[oe,t("p",re,n(o.physicalSalesStats&&o.physicalSalesStats.totalCount||0),1)])])]),t("div",le,[t("nav",ne,[t("button",{onClick:s[11]||(s[11]=e=>L.value="sales"),class:u([L.value==="sales"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Ventas ",2),t("button",{onClick:s[12]||(s[12]=e=>L.value="expenses"),class:u([L.value==="expenses"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Gastos ",2)])]),L.value==="sales"?(d(),i("div",de,[t("div",ie,[t("div",ce,[t("form",{onSubmit:H(P,["prevent"])},[t("div",ue,[t("div",null,[pe,k(t("input",{type:"text",id:"search_sale","onUpdate:modelValue":s[13]||(s[13]=e=>c(p).search=e),placeholder:"Ej: V-000001",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).search]])]),t("div",null,[he,k(t("input",{type:"date",id:"physical_start_date","onUpdate:modelValue":s[14]||(s[14]=e=>c(p).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).start_date]])]),t("div",null,[xe,k(t("input",{type:"date",id:"physical_end_date","onUpdate:modelValue":s[15]||(s[15]=e=>c(p).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).end_date]])]),t("div",be,[t("button",{type:"submit",disabled:c(p).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,ge),w(c(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",me,[ye,t("button",{type:"button",onClick:s[16]||(s[16]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[17]||(s[17]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[18]||(s[18]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[19]||(s[19]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[20]||(s[20]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",fe,[t("div",ve,[t("div",_e,[we,o.physicalSales&&o.physicalSales.data&&o.physicalSales.data.length>0?(d(),i("a",{key:0,href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition"},[Se,_(" Exportar Ventas ")],8,ke)):m("",!0)]),t("div",Fe,[t("table",Ce,[Me,t("tbody",De,[(d(!0),i(E,null,T(o.physicalSales?.data,e=>(d(),i("tr",{key:e.id},[t("td",$e,[w(c(R),{href:a.route("admin.physical-sales.show",e.id),class:"hover:underline"},{default:C(()=>[_(n(e.sale_number),1)]),_:2},1032,["href"])]),t("td",Ee,n(e.user?.name||"N/A"),1),t("td",Le,n(G(e.created_at)),1),t("td",Ve,n(e.payment_method),1),t("td",Re,n(y(e.subtotal)),1),t("td",Te,n(lt(e)),1),t("td",ze,n(y(e.total)),1),t("td",Oe,n(rt(e)),1),t("td",Pe,[w(c(R),{href:a.route("admin.physical-sales.show",e.id),class:"text-blue-600 hover:text-blue-900"},{default:C(()=>[_(" Ver ")]),_:2},1032,["href"])])]))),128)),!o.physicalSales||!o.physicalSales.data||o.physicalSales.data.length===0?(d(),i("tr",je,Be)):m("",!0)])])]),o.physicalSales&&o.physicalSales.links?(d(),tt(q,{key:0,class:"mt-6",links:o.physicalSales.links},null,8,["links"])):m("",!0)])])])):m("",!0),L.value==="expenses"?(d(),i("div",He,[t("div",Ye,[t("div",qe,[t("form",{onSubmit:H(P,["prevent"])},[t("div",Ue,[Ge,t("div",null,[We,k(t("input",{type:"date",id:"exp_start_date","onUpdate:modelValue":s[21]||(s[21]=e=>c(p).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).start_date]])]),t("div",null,[Ae,k(t("input",{type:"date",id:"exp_end_date","onUpdate:modelValue":s[22]||(s[22]=e=>c(p).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).end_date]])]),t("div",Ie,[t("button",{type:"submit",disabled:c(p).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar Gastos ",8,Xe),w(c(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Ke,[Qe,t("button",{type:"button",onClick:s[23]||(s[23]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[24]||(s[24]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[25]||(s[25]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[26]||(s[26]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[27]||(s[27]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",Je,[t("div",Ze,[t("div",ts,[es,t("a",{href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:outline-none transition"},[as,_(" Exportar Reporte ")],8,ss)]),t("div",os,[t("table",rs,[ls,t("tbody",ns,[(d(!0),i(E,null,T(o.expensesList.data,e=>(d(),i("tr",{key:e.id},[t("td",ds,n(G(e.expense_date)),1),t("td",is,n(e.description),1),t("td",cs,n(e.user?.name||"N/A"),1),t("td",us,n(y(e.amount)),1)]))),128)),!o.expensesList||!o.expensesList.data||o.expensesList.data.length===0?(d(),i("tr",ps,xs)):m("",!0)])])]),o.expensesList&&o.expensesList.links?(d(),tt(q,{key:0,class:"mt-6",links:o.expensesList.links},null,8,["links"])):m("",!0)])])])):m("",!0)])):m("",!0),v.value==="digital"&&M.value==="chart"?(d(),i("div",bs,ms)):m("",!0),v.value==="digital"&&M.value==="table"?(d(),i("div",ys,[t("div",fs,[t("div",vs,[t("div",_s,[ws,o.orders.data.length>0?(d(),i("a",{key:0,href:a.route("admin.reports.export",{start_date:o.filters.start_date,end_date:o.filters.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[Ss,_(" Exportar a Excel ")],8,ks)):m("",!0)]),t("div",{ref_key:"scrollBoxRef",ref:j,class:"relative overflow-x-auto"},[k(t("div",Fs,null,512),[[et,W.value]]),k(t("div",Cs,null,512),[[et,A.value]]),t("table",Ms,[t("thead",Ds,[t("tr",null,[t("th",{class:"sticky left-0 z-20 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:st(I.value)},[_(" Orden # "),t("div",{onMousedown:Q,onTouchstart:H(Q,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},Es,32)],4),Ls,Vs,Rs,Ts,zs,Os,Ps])]),t("tbody",js,[(d(!0),i(E,null,T(o.orders.data,(e,l)=>(d(),i("tr",{key:e.id,class:"odd:bg-white even:bg-gray-100"},[t("td",{class:u(["sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:underline border-r truncate",l%2===1?"bg-gray-100":"bg-white"]),style:st(I.value),title:e.sequence_number||e.id},[w(c(R),{href:a.route("admin.orders.show",e.id)},{default:C(()=>[_(n(e.sequence_number||e.sequence_number===0?e.sequence_number:e.id),1)]),_:2},1032,["href"])],14,Ns),t("td",Bs,n(e.customer_name),1),t("td",Hs,n(ot(e.created_at)),1),t("td",Ys,[t("span",{class:u(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":e.status==="entregado","bg-yellow-100 text-yellow-800":e.status==="recibido","bg-blue-100 text-blue-800":e.status==="en_preparacion","bg-purple-100 text-purple-800":e.status==="despachado","bg-red-100 text-red-800":e.status==="cancelado"}])},n(e.status),3)]),t("td",qs,n(y(e.total_price)),1),t("td",Us,[(d(!0),i(E,null,T(e.items,r=>(d(),i("div",{key:r.id},[t("span",Gs,n(r.product_name||r.product?.name),1),r.variant_options||r.variant?.options?(d(),i("span",Ws," ("+n(Object.entries(r.variant_options||r.variant?.options||{}).map(([g,f])=>`${g}: ${f}`).join(", "))+") ",1)):m("",!0)]))),128))]),t("td",As,[(d(!0),i(E,null,T(e.items,r=>(d(),i("div",{key:"q"+r.id},n(r.quantity),1))),128))]),t("td",Is,[(d(!0),i(E,null,T(e.items,r=>(d(),i("div",{key:"p"+r.id},n(y(r.unit_price)),1))),128))])]))),128)),o.orders.data.length===0?(d(),i("tr",Xs,Qs)):m("",!0)])])],512),w(q,{class:"mt-6",links:o.orders.links},null,8,["links"])])])])):m("",!0)])])]),_:1})],64))}};export{ra as default};
