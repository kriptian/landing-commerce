import{c as C,p as F,r as y,a,o as n,b as x,e,d as P,f as v,u as r,h as D,t as l,s as N,g as u,v as m,F as p,i as _,m as V}from"./app-BRVkAi0d.js";import{_ as q}from"./AlertModal-Kba0pXFQ.js";import"./Modal-BqEUkn8w.js";const E=["href"],O={class:"bg-white shadow-sm sticky top-0"},I={class:"container mx-auto px-6 py-4"},j={class:"text-2xl font-bold text-gray-900"},T={class:"container mx-auto px-6 py-12"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-12"},A=["disabled"],B={class:"bg-gray-50 p-8 rounded-lg"},M={class:"space-y-4"},S={class:"flex items-center"},$=["src"],z={class:"font-semibold"},R={key:0,class:"text-sm text-gray-500"},W={class:"text-sm text-gray-600"},H={class:"font-semibold"},L={class:"border-t mt-6 pt-6"},G={class:"flex justify-between font-bold text-xl"},X={__name:"CheckoutPage",props:{cartItems:Array,store:Object},setup(d){const f=d,h=C(()=>f.cartItems.reduce((c,t)=>{const s=t.variant?.price??t.product.price;return c+s*t.quantity},0)),o=F({customer_name:"",customer_phone:"",customer_email:"",customer_address:""}),i=y(!1),b=y(""),w=()=>{o.post(route("checkout.store",{store:f.store.slug}),{onSuccess:()=>{},onError:c=>{b.value="Hubo un error al procesar tu pedido. Por favor verificá tus datos.",i.value=!0}})};return(c,t)=>(n(),a(p,null,[x(r(D),{title:"Finalizar Compra"},{default:P(()=>[d.store?.logo_url?(n(),a("link",{key:0,rel:"icon",type:"image/png",href:d.store.logo_url},null,8,E)):v("",!0)]),_:1}),e("header",O,[e("nav",I,[e("h1",j,l(d.store.name),1)])]),e("main",T,[e("div",U,[e("div",null,[t[10]||(t[10]=e("h1",{class:"text-3xl font-bold mb-8"},"Datos de Envío",-1)),e("form",{onSubmit:N(w,["prevent"]),class:"space-y-6 bg-white p-8 shadow rounded-lg"},[e("div",null,[t[6]||(t[6]=e("label",{for:"customer_name",class:"block font-medium text-sm text-gray-700"},"Nombre Completo",-1)),u(e("input",{id:"customer_name","onUpdate:modelValue":t[0]||(t[0]=s=>r(o).customer_name=s),type:"text",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[m,r(o).customer_name]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"customer_phone",class:"block font-medium text-sm text-gray-700"},"Teléfono (WhatsApp)",-1)),u(e("input",{id:"customer_phone","onUpdate:modelValue":t[1]||(t[1]=s=>r(o).customer_phone=s),type:"tel",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[m,r(o).customer_phone]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"customer_email",class:"block font-medium text-sm text-gray-700"},"Correo Electrónico",-1)),u(e("input",{id:"customer_email","onUpdate:modelValue":t[2]||(t[2]=s=>r(o).customer_email=s),type:"email",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[m,r(o).customer_email]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"customer_address",class:"block font-medium text-sm text-gray-700"},"Dirección Completa (con ciudad y detalles)",-1)),u(e("textarea",{id:"customer_address","onUpdate:modelValue":t[3]||(t[3]=s=>r(o).customer_address=s),class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",rows:"3",required:""},null,512),[[m,r(o).customer_address]])]),e("button",{type:"submit",disabled:r(o).processing,class:"w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-center hover:bg-green-700 disabled:opacity-50"},l(r(o).processing?"Procesando...":"Realizar Pedido por WhatsApp"),9,A)],32)]),e("div",B,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold mb-6"},"Resumen de tu Pedido",-1)),e("div",M,[(n(!0),a(p,null,_(d.cartItems,s=>(n(),a("div",{key:s.id,class:"flex justify-between items-center"},[e("div",S,[e("img",{src:s.product.main_image_url,class:"w-16 h-16 object-cover rounded mr-4"},null,8,$),e("div",null,[e("p",z,l(s.product.name),1),s.variant?(n(),a("div",R,[(n(!0),a(p,null,_(s.variant.options,(k,g)=>(n(),a("span",{key:g,class:"mr-2"},[e("strong",null,l(g)+":",1),V(" "+l(k),1)]))),128))])):v("",!0),e("p",W,"Cantidad: "+l(s.quantity),1)])]),e("p",H,l(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format((s.variant?.price??s.product.price)*s.quantity)),1)]))),128))]),e("div",L,[e("div",G,[t[11]||(t[11]=e("span",null,"Total",-1)),e("span",null,l(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(h.value)),1)])])])])]),x(q,{show:i.value,type:"error",title:"No pudimos procesar tu pedido",message:b.value,"primary-text":"Entendido",onPrimary:t[4]||(t[4]=s=>i.value=!1),onClose:t[5]||(t[5]=s=>i.value=!1)},null,8,["show","message"])],64))}};export{X as default};
