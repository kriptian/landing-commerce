const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DDU4x-bz.js","assets/app-DWzOy7w2.js","assets/app-ECcWga0O.css"])))=>i.map(i=>d[i]);
import{H as Te,c as W,r as u,u as vt,B as pt,z as ie,D as _t,w as Ke,a as l,o as a,b as g,d as je,h as mt,e as b,i as v,f as e,s as ft,m as y,j as L,A as Se,q as te,p as Q,F as j,n as O,t as r,g as gt,x as $e,y as xt,C as Ue,_ as bt}from"./app-DWzOy7w2.js";import{_ as yt}from"./AuthenticatedLayout-CugQ99eV.js";import{d as wt,s as kt}from"./pdfUtils-F4UIJyTs.js";import{_ as Ct}from"./AlertModal-DPFi-dg7.js";import{_ as J}from"./Modal-B4C0nd8L.js";import{_ as ce}from"./SecondaryButton-iJFEa6xL.js";import{_ as de}from"./PrimaryButton-uVUC6tiB.js";import Mt from"./ExpenseModal-B_tiQO81.js";import Tt from"./VariantSelectorModal-DXGeZrD7.js";import"./InputError-BLDv6eSH.js";const jt={key:0,class:"font-semibold text-xl text-gray-800 leading-tight"},St={key:0,class:"hidden lg:flex fixed inset-0 bg-white flex-row",style:{"margin-top":"0","z-index":"10"}},$t={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},Pt={class:"flex items-center gap-3 mb-3"},Et=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Dt=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Nt={class:"flex-1 relative"},Ft=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),qt=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),Bt=[qt],Lt={class:"flex items-center gap-2 overflow-x-auto"},Ot=["onClick"],Rt={class:"flex-1 overflow-y-auto p-4"},Vt={key:0,class:"text-center py-12 text-gray-500"},At=e("p",null,"No se encontraron productos",-1),zt=[At],It={key:1,class:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3"},Xt=["onClick"],Ht={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},Kt=["src","alt"],Ut={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Gt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Wt=[Gt],Qt={class:"p-2 flex-1 flex flex-col"},Jt={class:"mb-1"},Yt={class:"text-xs line-through text-red-600"},Zt={class:"text-sm font-bold text-green-600"},es={key:1,class:"text-sm font-bold text-gray-900"},ts=["title"],ss=e("div",{class:"h-8 w-1 bg-gray-400 rounded-full group-hover:bg-white"},null,-1),os=[ss],ns={class:"flex-1 h-full flex flex-col bg-white overflow-hidden",style:{"min-width":"300px"}},as={class:"bg-blue-50 border-b border-blue-100 px-4 py-3 flex-shrink-0"},ls={class:"flex items-center gap-3"},rs=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),is={class:"text-blue-700 font-semibold"},cs=e("span",{class:"text-blue-400"},"|",-1),ds=["src","alt"],us={key:1,class:"text-blue-700 font-medium text-sm"},hs={class:"flex-1 overflow-y-auto px-3 py-2"},vs={key:0,class:"text-center py-12 text-gray-500"},ps=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),_s=e("p",null,"El carrito est√° vac√≠o",-1),ms=[ps,_s],fs={key:1,class:"overflow-x-auto"},gs={class:"w-full text-sm"},xs=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 py-3 text-left text-xs font-semibold text-gray-700"},"Producto"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"},"Stock"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-20"},"Cant"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-40"},"Valor"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-32"},"Desc"),e("th",{class:"px-3 py-3 text-right text-xs font-semibold text-gray-700 w-36"},"SubTotal"),e("th",{class:"px-3 py-3 text-center text-xs font-semibold text-gray-700 w-16"})])],-1),bs={class:"divide-y divide-gray-200 bg-white"},ys=["title"],ws={class:"min-w-0",style:{"max-width":"140px"}},ks={class:"font-medium text-gray-900"},Cs={key:0,class:"text-xs text-gray-500 ml-1"},Ms=["title"],Ts=["title"],js=["value","onChange"],Ss=["title"],$s=["value","onInput"],Ps=["title"],Es=["onClick"],Ds={key:1,class:"relative"},Ns=["value","onChange","onClick"],Fs=e("span",{class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm font-medium pointer-events-none"},"%",-1),qs=["title"],Bs={class:"font-semibold text-gray-900 text-sm"},Ls={class:"px-3 py-3 text-center align-middle w-16"},Os=["onClick"],Rs=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Vs=[Rs],As={key:0,class:"border-t border-gray-200 px-4 py-3 bg-gray-50 space-y-3 flex-shrink-0"},zs={class:"flex justify-between text-sm"},Is=e("span",{class:"text-gray-700"},"Total Bruto:",-1),Xs={class:"font-medium"},Hs={class:"flex justify-between text-sm items-center"},Ks=e("span",{class:"text-gray-700"},"Descuento:",-1),Us=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),Gs={class:"pt-2 border-t border-gray-300"},Ws={class:"flex justify-between items-center mb-3"},Qs=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),Js={class:"text-base font-bold text-green-600"},Ys={class:"flex gap-3"},Zs={key:1,class:"lg:hidden fixed inset-0 bg-white flex flex-col",style:{"margin-top":"0","z-index":"10"}},eo={class:"bg-blue-500 px-4 py-3 flex-shrink-0"},to={class:"flex items-center justify-between"},so={class:"flex items-center gap-2"},oo=e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),no={class:"text-white font-semibold"},ao=e("span",{class:"text-white"},"|",-1),lo=["src","alt"],ro={key:1,class:"text-white font-medium text-sm"},io={class:"bg-gray-100 px-4 py-3 flex-shrink-0 border-b border-gray-200"},co={class:"flex items-center gap-2"},uo=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),ho=[uo],vo=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),po=[vo],_o={class:"flex-1 relative"},mo=e("svg",{class:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),fo=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2.01M8 8h.01M12 8h.01M16 8h.01M20 8h.01M5 12h2.01M8 12h.01M12 12h2.01M16 12h.01M20 12h.01M5 16h2.01M8 16h.01M12 16h.01M16 16h.01M20 16h.01"})],-1),go=[fo],xo={key:0,class:"mt-3 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto"},bo=["onClick"],yo={class:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center flex-shrink-0"},wo=["src","alt"],ko={key:1,class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Co=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Mo=[Co],To={class:"flex-1 min-w-0"},jo={class:"font-medium text-sm text-gray-900 truncate"},So={class:"text-xs line-through text-red-600"},$o={class:"text-xs text-green-600 font-semibold"},Po={key:1,class:"text-xs text-gray-500"},Eo=e("svg",{class:"w-5 h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Do=e("div",{class:"bg-gray-200 px-4 py-2 flex-shrink-0"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})])]),e("h3",{class:"text-gray-700 font-semibold text-sm"},"INFORMACION DE LA VENTA")])],-1),No={class:"flex-1 overflow-y-auto bg-white"},Fo={key:0,class:"text-center py-12 text-gray-500"},qo=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l3.6-7H6.4M7 13L5.4 6M7 13l-2 9m12-9l2 9M9 22a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})],-1),Bo=e("p",null,"No hay productos en el carrito",-1),Lo=e("p",{class:"text-xs text-gray-400 mt-2"},"Busca o escanea un producto para comenzar",-1),Oo=[qo,Bo,Lo],Ro={key:1,class:"divide-y divide-gray-200"},Vo={class:"flex items-start justify-between gap-3"},Ao={class:"flex-1 min-w-0"},zo={class:"flex items-center gap-2 mb-1"},Io={key:0,class:"text-xs text-red-600 font-semibold"},Xo={class:"font-medium text-sm text-gray-900 mb-1"},Ho={class:"text-xs text-gray-500"},Ko={class:"flex items-center gap-3"},Uo={class:"flex flex-col items-center gap-1"},Go=e("span",{class:"text-xs text-gray-500"},"Cant",-1),Wo={class:"flex items-center gap-1"},Qo=["onClick"],Jo={class:"w-10 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full font-semibold text-sm"},Yo=["onClick"],Zo={class:"flex flex-col items-end gap-1 min-w-[80px]"},en=e("span",{class:"text-xs text-gray-500"},"Total",-1),tn={class:"font-semibold text-sm text-gray-900"},sn=["onClick"],on=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),nn=[on],an=["onClick"],ln=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),rn=[ln],cn={key:0,class:"border-t border-gray-300 bg-white px-4 py-4 flex-shrink-0"},dn={class:"space-y-2 mb-4"},un={class:"flex justify-between text-sm"},hn=e("span",{class:"text-gray-700"},"Subtotal:",-1),vn={class:"font-medium text-green-600"},pn={class:"flex justify-between text-sm"},_n=e("span",{class:"text-gray-700"},"Descuento:",-1),mn=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),fn={class:"flex justify-between items-center pt-2 border-t border-gray-300"},gn=e("span",{class:"text-base font-bold text-gray-900"},"Total Compra:",-1),xn={class:"text-base font-bold text-green-600"},bn={class:"flex gap-3"},yn={class:"p-6"},wn=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmar Venta",-1),kn={class:"mb-4"},Cn=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"M√©todo de Pago",-1),Mn=e("option",{value:"efectivo"},"Efectivo",-1),Tn=e("option",{value:"tarjeta"},"Tarjeta",-1),jn=e("option",{value:"transferencia"},"Transferencia",-1),Sn=e("option",{value:"mixto"},"Mixto",-1),$n=[Mn,Tn,jn,Sn],Pn={class:"mb-4"},En=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notas (Opcional)",-1),Dn={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded"},Nn=e("h4",{class:"text-sm font-semibold text-green-800 mb-2"},"Descuentos por Producto:",-1),Fn={class:"space-y-1"},qn={class:"text-green-700"},Bn={class:"text-green-700 font-medium"},Ln={class:"mb-4 p-3 bg-gray-50 rounded"},On={class:"flex justify-between mb-2"},Rn=e("span",null,"Subtotal:",-1),Vn={key:0,class:"flex justify-between mb-2 text-red-600"},An={class:"flex justify-between font-bold text-lg pt-2 border-t"},zn=e("span",null,"Total:",-1),In={class:"flex gap-3"},Xn={class:"p-6"},Hn=e("h2",{class:"text-lg font-semibold mb-4 text-green-600"},"¬°Venta registrada exitosamente!",-1),Kn={key:0,class:"mb-4"},Un={class:"text-sm text-gray-600 mb-2"},Gn={class:"font-semibold"},Wn={class:"text-sm text-gray-600 mb-2"},Qn={class:"font-semibold"},Jn={class:"flex gap-2 sm:gap-3 justify-center sm:justify-end"},Yn=e("span",{class:"sm:hidden"},"‚úï",-1),Zn=e("span",{class:"hidden sm:inline"},"Cerrar",-1),ea=["disabled"],ta={key:0,class:"animate-pulse"},sa={key:1},oa=e("span",{class:"hidden sm:inline ml-1"},"Descargar PDF",-1),na=["disabled"],aa={key:0,class:"animate-pulse"},la={key:1},ra=e("span",{class:"hidden sm:inline ml-1"},"Compartir",-1),ia=e("span",{class:"hidden sm:inline ml-1"},"Imprimir",-1),ca={id:"invoice-content-pos",class:"fixed top-0 left-0 w-[80mm] bg-white z-[-100] opacity-0 pointer-events-none"},da={class:"bg-white text-black p-2 font-mono text-[11px] leading-tight",style:{width:"80mm",margin:"0 auto","font-family":"'Courier New', Courier, monospace"}},ua={class:"text-center mb-4"},ha=["src"],va={class:"font-bold text-base uppercase mb-1"},pa={class:"text-[10px] space-y-0.5",style:{"font-size":"10px"}},_a={key:0},ma={key:1,class:"whitespace-normal"},fa={key:2,class:"whitespace-normal"},ga={key:3,class:"whitespace-normal break-words"},xa=e("div",{class:"border-b-2 border-dashed border-black my-2"},null,-1),ba={class:"mb-3 text-[10px] space-y-1"},ya={key:0},wa={class:"font-bold"},ka={key:1},Ca={key:2},Ma=e("div",{class:"border-b border-dashed border-black my-2"},null,-1),Ta={class:"mb-4"},ja={class:"flex justify-between font-bold items-start"},Sa={class:"w-[70%] leading-tight"},$a={class:"whitespace-nowrap"},Pa={class:"flex flex-col text-[10px] text-gray-600 pl-2 mt-0.5"},Ea={key:0,class:"italic"},Da=e("div",{class:"border-b-2 border-dashed border-black my-2"},null,-1),Na={class:"space-y-1 text-right"},Fa={key:0,class:"flex justify-between text-[10px]"},qa=e("span",null,"Subtotal",-1),Ba={key:1,class:"flex justify-between text-[10px]"},La=e("span",null,"Descuento",-1),Oa={class:"flex justify-between text-xl font-bold mt-2"},Ra=e("span",null,"TOTAL",-1),Va={class:"flex justify-between text-[10px] mt-2 pt-1 border-dotted border-t border-gray-400"},Aa=e("span",null,"M√©todo Pago",-1),za={class:"capitalize"},Ia={class:"text-center mt-6 text-[10px] space-y-1 mb-4"},Xa=e("p",null,"¬°Gracias por su compra!",-1),Ha=e("p",{class:"italic"},"Entrega este recibo para retirar tu orden",-1),Ka={key:0,class:"mt-2 pt-2 border-t border-dotted border-gray-300"},Ua=e("p",{class:"font-bold"},"Notas:",-1),Ga={class:"p-6"},Wa=e("h2",{class:"text-lg font-semibold mb-4"},"Escanear C√≥digo de Barras",-1),Qa=e("p",{class:"text-sm text-gray-600 mb-4"}," Apunta la c√°mara hacia el c√≥digo de barras. El producto se agregar√° autom√°ticamente al carrito. ",-1),Ja=e("div",{id:"barcode-scanner-sales",class:"w-full rounded-lg overflow-hidden",style:{"min-height":"300px"}},null,-1),Ya={class:"p-6"},Za={class:"flex items-center justify-between mb-4"},el={class:"text-lg font-semibold"},tl=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),sl=[tl],ol={class:"space-y-4"},nl=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cantidad",-1),al=["value"],ll=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Valor",-1),rl=["value"],il=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),cl=e("option",{value:"percentage"},"Porcentaje",-1),dl=e("option",{value:"amount"},"Monto",-1),ul=[cl,dl],hl={class:"block text-sm font-medium text-gray-700 mb-2"},vl=["step","max","placeholder"],pl={key:0,class:"p-4 bg-gray-50 rounded-lg space-y-2"},_l={class:"flex justify-between text-sm"},ml=e("span",{class:"text-gray-700"},"Subtotal:",-1),fl={class:"font-semibold"},gl={class:"flex justify-between text-sm"},xl=e("span",{class:"text-gray-700"},"Descuento:",-1),bl={class:"font-semibold"},yl={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},wl=e("span",null,"Total:",-1),kl={class:"flex gap-3 mt-6"},Cl={class:"p-6 max-h-[90vh] flex flex-col"},Ml={class:"flex items-center justify-between mb-4 flex-shrink-0"},Tl=e("h2",{class:"text-lg font-semibold"},"Cat√°logo de Productos",-1),jl=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Sl=[jl],$l={class:"mb-4 relative flex-shrink-0"},Pl=e("svg",{class:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),El={class:"mb-4 flex items-center gap-2 overflow-x-auto pb-2 flex-shrink-0"},Dl=["onClick"],Nl={class:"flex-1 overflow-y-auto"},Fl={key:0,class:"text-center py-12 text-gray-500"},ql=e("p",null,"No se encontraron productos",-1),Bl=[ql],Ll={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Ol=["onClick"],Rl={class:"aspect-square bg-gray-100 flex items-center justify-center",style:{"min-height":"120px"}},Vl=["src","alt"],Al={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zl=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1),Il=[zl],Xl={class:"p-2 flex-1 flex flex-col"},Hl={class:"mb-1"},Kl={class:"text-xs line-through text-red-600"},Ul={class:"text-sm font-bold text-green-600"},Gl={key:1,class:"text-sm font-bold text-gray-900"},Wl={class:"font-medium text-xs text-gray-900 line-clamp-2"},Ql={class:"p-6"},Jl={class:"flex items-center justify-between mb-4"},Yl=e("h2",{class:"text-lg font-semibold"},"Descuento general de la factura",-1),Zl=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),er=[Zl],tr={class:"space-y-4"},sr=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1),or=e("option",{value:"percentage"},"Porcentaje",-1),nr=e("option",{value:"amount"},"Monto",-1),ar=[or,nr],lr={class:"block text-sm font-medium text-gray-700 mb-2"},rr=["step","max","placeholder"],ir={class:"p-4 bg-gray-50 rounded-lg space-y-2"},cr={class:"flex justify-between text-sm"},dr=e("span",{class:"text-gray-700"},"Subtotal:",-1),ur={class:"font-semibold"},hr={class:"flex justify-between text-sm"},vr=e("span",{class:"text-gray-700"},"Descuento:",-1),pr={class:"font-semibold"},_r={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-300"},mr=e("span",null,"Total:",-1),fr={class:"flex gap-3 mt-6"},gr={class:"p-6"},xr={class:"flex items-center justify-between mb-4"},br=e("h2",{class:"text-lg font-semibold text-red-600"},"‚ö†Ô∏è Stock Insuficiente",-1),yr=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),wr=[yr],kr={class:"mb-4"},Cr=["innerHTML"],Mr={class:"flex justify-end"},Br={__name:"Index",props:{sales:Object,stats:Object,filters:Object,products:Array,categories:Array,store:Object},setup(_){const R=_,ge=Te(),Ge=W(()=>(ge.props.auth?.roles||[]).includes("physical-sales")),Pe=()=>{Ge.value?ie.post(route("logout"),{},{onSuccess:()=>{window.location.href=route("login")},onError:()=>{window.location.href=route("login")}}):ie.visit(route("dashboard"))},xe=u("sales");vt({start_date:R.filters?.start_date||"",end_date:R.filters?.end_date||"",search:R.filters?.search||""});const Ee=u("");u(!1);const h=u(null),se=u(!1),V=u(!1),We=async()=>{if(h.value){V.value=!0;try{const o=document.getElementById("invoice-content-pos");o&&await wt(o,`factura-${h.value.sale_number}.pdf`)}catch(o){console.error(o),alert("Error al generar el PDF")}finally{V.value=!1}}},Qe=async()=>{if(h.value){V.value=!0;try{const o=document.getElementById("invoice-content-pos");o&&await kt(o,`factura-${h.value.sale_number}.pdf`,`Factura #${h.value.sale_number}`)}catch(o){console.error(o)}finally{V.value=!1}}},ue=u(!1),De=u(null),Je=o=>{De.value=o,ue.value=!0},Ye=(o,s)=>{fe(o,s)},Y=o=>{o.variant_options&&o.variant_options.length>0?Je(o):fe(o)},d=o=>!o&&o!==0?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),Ze=o=>new Date(o).toLocaleString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),et=o=>{o&&ie.visit(route("admin.physical-sales.show",o.id)+"?print=true")};W(()=>{if(!R.sales||!R.sales.data)return[];const o=new Date;o.setHours(0,0,0,0);const s=new Date(o);s.setHours(23,59,59,999);let t=R.sales.data.filter(n=>{const i=new Date(n.created_at);return i>=o&&i<=s});if(Ee.value.trim()){const n=Ee.value.toLowerCase();t=t.filter(i=>i.sale_number.toLowerCase().includes(n))}return t});const c=u([]),x=u(""),be=u(null),q=u([]),Ne=u(!1),I=()=>{window.innerWidth>=1024&&Ue(()=>{be.value&&be.value.focus()})},oe=u(!1),Fe=u(""),X=u(!1),he=u("efectivo"),ve=u(""),N=u(0),E=u("amount"),D=u(null);u(null),u(!1),u(!1);const H=u(!1),K=u(!1),Z=u(!1),p=u(null),S=u("percentage"),$=u(0),A=u(!1),pe=u(""),U=u(null),tt=W(()=>{if(S.value==="percentage")return 100;if(p.value===null)return 0;const o=c.value[p.value];return o&&(o.original_price||o.unit_price)||0}),ne=u(!1),_e=u(!1),st=()=>{_e.value=!0},ye=()=>{try{const o=new(window.AudioContext||window.webkitAudioContext),s=o.createOscillator(),t=o.createGain();s.connect(t),t.connect(o.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,o.currentTime),t.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),s.start(o.currentTime),s.stop(o.currentTime+.2)}catch{}},z=W(()=>c.value.reduce((o,s)=>o+s.quantity*s.unit_price,0)),G=W(()=>E.value==="percentage"?z.value*N.value/100:N.value),ae=W(()=>z.value-G.value),me=W(()=>{if(!R.products)return[];let o=R.products;if(D.value&&(o=o.filter(s=>s.category_id===D.value)),x.value.trim()){const s=x.value.toLowerCase();o=o.filter(t=>t.name.toLowerCase().includes(s)||t.id.toString().includes(s)||t.barcode&&t.barcode.toLowerCase().includes(s))}return o}),ee=async()=>{if(!x.value.trim()){q.value=[];return}Ne.value=!0;try{const s=(await window.axios.get(route("admin.physical-sales.search-products"),{params:{q:x.value}})).data?.products||[];q.value=s,s.length===1&&window.innerWidth<1024&&(Y(s[0]),x.value="",q.value=[])}catch{q.value=[]}finally{Ne.value=!1}},qe=async o=>{const s=o.replace(/\s+/g,"").trim();if(s)try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){const n=t.data.product,i=t.data.matched_variant_option;let f=null;if(i&&n.variants&&n.variants.length>0){const k=n.variants.filter(P=>P.options&&Object.values(P.options).some(m=>m===i.name));k.length===1&&(f=k[0])}f?(fe(n,f),Fe.value=""):(Y(n),Fe.value="")}else alert("Producto no encontrado con ese c√≥digo de barras"),I()}catch{alert("Error al buscar producto"),I()}},F=(o,s=null)=>{const t=s?.price??o.price;let n=parseFloat(t),i=0;return o.promo_active&&o.promo_discount_percent>0&&(i=parseFloat(o.promo_discount_percent),n=Math.round(n*(100-i)/100)),{originalPrice:parseFloat(t),finalPrice:n,discountPercent:i}},fe=(o,s=null)=>{const t=c.value.find(n=>n.product_id===o.id&&n.variant_id===(s?.id||null));if(t)t.quantity+=1;else{const n=F(o,s);c.value.push({product_id:o.id,product_name:o.name,variant_id:s?.id||null,variant_options:s?.options||null,quantity:1,unit_price:n.finalPrice,original_price:n.originalPrice,discount_percent:n.discountPercent,product:o,variant:s})}x.value="",q.value=[],I()},B=o=>{if(o.product){const s=o.product.track_inventory;if(!s||s==="0"||s===0||s===!1)return"Ilimitado"}return o.variant&&o.variant.stock!==null&&o.variant.stock!==void 0?o.variant.stock:o.product&&o.product.quantity!==null&&o.product.quantity!==void 0?o.product.quantity:"N/A"},we=o=>{const s=B(o);return s==="Ilimitado"||s==="N/A"?!0:s>=o.quantity},ot=o=>{if(!we(o))return"bg-red-50";const s=B(o);return s===0||typeof s=="number"&&s<o.quantity?"bg-yellow-50":""},Be=o=>{const s=B(o);return s===0||typeof s=="number"&&s<o.quantity?"text-red-600 font-semibold text-xs":typeof s=="number"&&s<5?"text-yellow-600 font-medium text-xs":"text-gray-600 text-xs"},nt=()=>{c.value=[],N.value=0,E.value="amount",I()},Le=o=>{c.value.splice(o,1),I()},Oe=(o,s)=>{const t=c.value[o],n=t.quantity+s;if(n>0){const i=B(t);if(typeof i=="number"&&n>i){pe.value=`No hay suficiente stock para el producto "${t.product_name}".<br><br>Stock disponible: ${i}<br>Cantidad solicitada: ${n}`,A.value=!0;return}t.quantity=n}},at=(o,s)=>{const t=parseInt(s.target.value);if(t>0){const n=c.value[o],i=B(n);if(typeof i=="number"&&t>i){pe.value=`No hay suficiente stock para el producto "${n.product_name}".<br><br>Stock disponible: ${i}<br>Cantidad solicitada: ${t}`,A.value=!0,s.target.value=n.quantity;return}c.value[o].quantity=t}},ke=o=>o==null||o===""?"":new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}).format(o),lt=o=>{if(typeof o=="number")return o;if(!o)return 0;const s=o.toString().replace(/\./g,"").replace(/[^0-9]/g,"");return parseFloat(s)||0},rt=(o,s)=>{let t=s.target.value;const n=lt(t),i=c.value[o];i.discount_percent>0?(i.unit_price=n,i.original_price=n/(1-i.discount_percent/100)):(i.unit_price=n,i.original_price=n),t!==""&&(s.target.value=ke(n))},it=(o,s)=>{let t=parseFloat(s.target.value)||0;t=Math.round(t*100)/100;const n=Math.min(100,Math.max(0,t)),i=c.value[o];i.original_price||(i.original_price=i.unit_price),i.discount_type="percentage",i.discount_value=n,i.discount_percent=n,i.unit_price=i.original_price*(1-n/100),t!==n&&(s.target.value=n)},Ce=o=>{p.value=o;const s=c.value[o];s.discount_type?(S.value=s.discount_type,$.value=s.discount_value||0):s.discount_percent>0?(S.value="percentage",$.value=s.discount_percent):(S.value="percentage",$.value=0),H.value=!0},ct=()=>{if(p.value===null)return;const o=c.value[p.value];o.original_price||(o.original_price=o.unit_price);const s=o.original_price;if(S.value==="percentage"){const t=Math.min(100,Math.max(0,$.value)),n=Math.round(t*100)/100;o.discount_type="percentage",o.discount_value=n,o.discount_percent=n,o.unit_price=s*(1-n/100)}else{const t=Math.min(s,Math.max(0,$.value));o.discount_type="amount",o.discount_value=t,o.discount_percent=t/s*100,o.unit_price=s-t}H.value=!1,p.value=null,$.value=0},Re=()=>{K.value=!0},dt=()=>{K.value=!1},Ve=async()=>{try{oe.value=!0,await Ue();const{Html5Qrcode:o}=await bt(async()=>{const{Html5Qrcode:n}=await import("./index-DDU4x-bz.js");return{Html5Qrcode:n}},__vite__mapDeps([0,1,2])),s=document.getElementById("barcode-scanner-sales");if(!s)return;U.value=new o(s.id);const t={fps:10,qrbox:{width:250,height:250}};try{await U.value.start({facingMode:"environment"},t,async n=>{ye(),await qe(n),le()},n=>{})}catch{try{await U.value.start({facingMode:"user"},t,async i=>{ye(),await qe(i),le()},i=>{})}catch{alert("No se pudo acceder a la c√°mara. Por favor, permite el acceso a la c√°mara en la configuraci√≥n del navegador."),oe.value=!1}}}catch{alert("Error al inicializar el esc√°ner. Por favor, intenta nuevamente."),oe.value=!1}},le=async()=>{if(U.value){try{await U.value.stop(),await U.value.clear()}catch{}U.value=null}oe.value=!1},re=()=>{const o=document.head.querySelector('meta[name="csrf-token"]');if(o&&o.content)return window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=o.content,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=o.content),o.content;const t=(n=>{const f=`; ${document.cookie}`.split(`; ${n}=`);return f.length===2?f.pop().split(";").shift():null})("XSRF-TOKEN");if(t&&window.axios){const n=decodeURIComponent(t);return window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,n}return null};pt(()=>{I(),setTimeout(()=>{re(),window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{re()},300)},100)}),ie.on("finish",()=>{setTimeout(()=>{const s=Te().props.csrf_token;if(s){const t=document.head.querySelector('meta[name="csrf-token"]');t&&t.setAttribute("content",s),window.axios&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=s,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=s)}re(),window.updateCsrfToken&&window.updateCsrfToken()},200)});const ut=async()=>{if(c.value.length===0){alert("El carrito est√° vac√≠o");return}const o=[];for(let t=0;t<c.value.length;t++){const n=c.value[t];if(!we(n)){const i=B(n);o.push({name:n.product_name,requested:n.quantity,available:i})}}if(o.length>0){let t=`No se puede procesar la venta. Los siguientes productos no tienen stock suficiente:

`;o.forEach(n=>{t+=`‚Ä¢ ${n.name}: Solicitado ${n.requested}, Disponible ${n.available}
`}),pe.value=t.replace(/\n/g,"<br>"),A.value=!0;return}const s={items:c.value.map(t=>({product_id:t.product_id,variant_id:t.variant_id,quantity:t.quantity,unit_price:t.unit_price,original_price:t.original_price,discount_percent:t.discount_percent})),subtotal:z.value,tax:0,discount:G.value,total:ae.value,payment_method:he.value,notes:ve.value};try{if(!window.axios){alert("Error: No se pudo inicializar la conexi√≥n. Por favor, recarga la p√°gina.");return}let n=Te().props.csrf_token;if(n){const m=document.head.querySelector('meta[name="csrf-token"]');m&&m.setAttribute("content",n)}else n=re();if(n||(await new Promise(m=>setTimeout(m,200)),n=re()),!n){alert("Error: No se pudo obtener el token de seguridad. Por favor, recarga la p√°gina.");return}window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=n;const i=()=>{const m=document.head.querySelector('meta[name="csrf-token"]');if(m&&m.content)return m.content;const w=(M=>{const He=`; ${document.cookie}`.split(`; ${M}=`);return He.length===2?He.pop().split(";").shift():null})("XSRF-TOKEN");return w?decodeURIComponent(w):null},f=async(m=0)=>{try{let C=i();if(!C&&m===0)try{const M=await window.axios.get(route("dashboard"),{headers:{"X-Requested-With":"XMLHttpRequest"}});await new Promise(T=>setTimeout(T,100)),C=i()}catch{}if(!C)throw new Error("No se pudo obtener el token CSRF. Por favor, recarga la p√°gina.");window.axios.defaults.headers.common["X-CSRF-TOKEN"]=C,window.axios.defaults.headers.common["X-XSRF-TOKEN"]=C;const w=await window.axios.post(route("admin.physical-sales.store"),s,{headers:{"X-CSRF-TOKEN":C,"X-XSRF-TOKEN":C,"X-Requested-With":"XMLHttpRequest"}});if(w&&w.headers){const M=w.headers["x-csrf-token"]||w.headers["X-CSRF-TOKEN"];if(M){const T=document.head.querySelector('meta[name="csrf-token"]');T&&T.setAttribute("content",M),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=M}}return w}catch(C){if(C.response){if(C.response.status===419&&m===0){const w=C.response.headers||{},M=w["x-csrf-token"]||w["X-CSRF-TOKEN"]||null;if(M){const T=document.head.querySelector('meta[name="csrf-token"]');T&&T.setAttribute("content",M),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=M}else{const T=i();T&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=T)}return await new Promise(T=>setTimeout(T,200)),await f(1)}}else if(m===0){const w=i();return w&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=w),await new Promise(M=>setTimeout(M,200)),await f(1)}throw C}},k=await f(),P=k.headers?.["x-csrf-token"]||k.headers?.["X-CSRF-TOKEN"];if(P){const m=document.head.querySelector('meta[name="csrf-token"]');m&&m.setAttribute("content",P),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=P}k.data&&k.data.success?(h.value=k.data.sale,X.value=!1,c.value=[],x.value="",N.value=0,E.value="amount",ve.value="",he.value="efectivo",D.value=null,window.updateCsrfToken&&window.updateCsrfToken(),se.value=!0,ie.reload()):alert("Error: "+(k.data?.message||"No se pudo procesar la venta"))}catch(t){console.error("Error completo al procesar la venta:",{error:t,message:t.message,response:t.response,status:t.response?.status,data:t.response?.data,headers:t.response?.headers});let n="Error al procesar la venta";if(t.response){const i=t.response.status,f=t.response.data;i===419?(n="Tu sesi√≥n ha expirado. Por favor, recarga la p√°gina e intenta nuevamente.",window.updateCsrfToken&&window.updateCsrfToken(),setTimeout(()=>{window.location.reload()},2e3)):i===422?f?.message?n=f.message:f?.errors?n=`Error de validaci√≥n:
${Object.entries(f.errors).map(([P,m])=>Array.isArray(m)?`${P}: ${m.join(", ")}`:`${P}: ${m}`).join(`
`)}`:n="Error de validaci√≥n. Verifica los datos e intenta nuevamente.":f?.message?n=f.message:n=`Error del servidor (${i}). Por favor, intenta nuevamente.`}else t.request?n="No se pudo conectar con el servidor. Verifica tu conexi√≥n a internet.":t.message&&(n=t.message);alert(n)}};_t(()=>{le()});let Ae;Ke(x,async o=>{clearTimeout(Ae);const s=o.replace(/\s+/g,"").trim();if(s.length>=8&&/^\d+$/.test(s))try{const t=await window.axios.get(route("admin.physical-sales.get-product-by-barcode"),{params:{barcode:s}});if(t.data?.product){const n=t.data.product,i=t.data.matched_variant_option;let f=null;if(i&&n.variants&&n.variants.length>0){const k=n.variants.filter(P=>P.options&&Object.values(P.options).some(m=>m===i.name));k.length===1&&(f=k[0])}f?fe(n,f):Y(n),x.value="",ye();return}}catch{}Ae=setTimeout(()=>{x.value.trim().length>=2?ee():q.value=[]},300)}),Ke([ue,Z,H,K,X,se,ne,A],(o,s)=>{o.some((n,i)=>!n&&s[i])&&setTimeout(()=>{I()},150)});const ze=u(50),Me=u(!1),ht=()=>{Me.value=!0,document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",Xe),document.body.style.userSelect="none",document.body.style.cursor="col-resize"},Ie=o=>{if(!Me.value)return;const s=window.innerWidth,t=o.clientX/s*100;t>20&&t<80&&(ze.value=t)},Xe=()=>{Me.value=!1,document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",Xe),document.body.style.userSelect="",document.body.style.cursor=""};return(o,s)=>(a(),l(j,null,[g(je(mt),{title:"Ventas F√≠sicas"}),g(yt,null,{header:b(()=>[xe.value!=="sales"?(a(),l("h2",jt,"Ventas F√≠sicas")):v("",!0)]),default:b(()=>[xe.value==="sales"?(a(),l("div",St,[e("div",{style:ft({width:ze.value+"%"}),class:"h-full flex flex-col border-r border-gray-300"},[e("div",$t,[e("div",Pt,[e("button",{onClick:Pe,class:"px-3 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100 text-sm font-medium flex items-center gap-2 border border-gray-200"},[Et,y(" Salir ")]),e("button",{onClick:s[0]||(s[0]=t=>ne.value=!0),class:"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm font-medium flex items-center gap-2 border border-red-200",title:"Registrar Gasto / Salida"},[Dt,y(" Gasto ")]),e("div",Nt,[L(e("input",{ref_key:"searchInput",ref:be,"onUpdate:modelValue":s[1]||(s[1]=t=>x.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Se(ee,["enter"])},null,544),[[te,x.value]]),Ft,e("button",{onClick:Ve,class:"absolute right-2 top-1.5 p-1 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},Bt)])]),e("div",Lt,[e("button",{onClick:s[2]||(s[2]=t=>{D.value=null,x.value=""}),class:Q(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",D.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(j,null,O(_.categories,t=>(a(),l("button",{key:t.id,onClick:n=>{D.value=t.id,x.value=""},class:Q(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",D.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,Ot))),128))])]),e("div",Rt,[me.value.length===0?(a(),l("div",Vt,zt)):(a(),l("div",It,[(a(!0),l(j,null,O(me.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>Y(t)},[e("div",Ht,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,Kt)):(a(),l("svg",Ut,Wt))]),e("div",Qt,[e("div",Jt,[t.promo_active&&t.promo_discount_percent>0?(a(),l(j,{key:0},[e("p",Yt,r(d(F(t).originalPrice)),1),e("p",Zt,r(d(F(t).finalPrice)),1)],64)):(a(),l("p",es,r(d(F(t).finalPrice)),1))]),e("h3",{class:"font-medium text-xs text-gray-900 line-clamp-2",title:t.name},r(t.name),9,ts)])],8,Xt))),128))]))])],4),e("div",{class:"w-1 hover:w-2 bg-gray-200 hover:bg-blue-400 cursor-col-resize flex items-center justify-center transition-all z-20 group",onMousedown:ht,title:"Arrastra para ajustar el tama√±o"},os,32),e("div",ns,[e("div",as,[e("div",ls,[rs,e("span",is,r(je(ge).props.auth?.user?.name||"Usuario"),1),cs,_.store&&_.store.logo_url?(a(),l("img",{key:0,src:_.store.logo_url,alt:`Logo de ${_.store.name}`,class:"h-6 w-6 rounded-full object-cover"},null,8,ds)):v("",!0),_.store?(a(),l("span",us,r(_.store.name),1)):v("",!0)])]),e("div",hs,[c.value.length===0?(a(),l("div",vs,ms)):(a(),l("div",fs,[e("table",gs,[xs,e("tbody",bs,[(a(!0),l(j,null,O(c.value,(t,n)=>(a(),l("tr",{key:n,class:Q(["hover:bg-gray-50",ot(t)])},[e("td",{class:"px-3 py-3 text-left align-middle",title:t.product_name},[e("div",ws,[e("div",ks,[y(r(t.product_name)+" ",1),t.variant_options?(a(),l("span",Cs," ("+r(Object.values(t.variant_options).join(" / "))+") ",1)):v("",!0)])])],8,ys),e("td",{class:"px-3 py-3 text-center align-middle w-16",title:`Stock disponible: ${B(t)}`},[e("span",{class:Q(Be(t))},r(B(t)),3)],8,Ms),e("td",{class:"px-3 py-3 text-center align-middle w-20",title:`Cantidad: ${t.quantity}`},[e("input",{type:"number",value:t.quantity,onChange:i=>at(n,i),class:"w-full text-center border border-gray-300 rounded text-sm py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"},null,40,js)],8,Ts),e("td",{class:"px-3 py-3 text-right align-middle w-40",title:`Precio unitario: ${d(t.unit_price)}`},[e("input",{type:"text",value:ke(t.original_price||t.unit_price),onInput:i=>rt(n,i),class:"w-full text-right border border-gray-300 rounded text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"},null,40,$s)],8,Ss),e("td",{class:"px-3 py-3 text-right align-middle w-32",title:t.discount_type==="amount"?`Descuento: $${t.discount_value}`:`Descuento: ${t.discount_percent}%`},[t.discount_type==="amount"?(a(),l("button",{key:0,onClick:i=>Ce(n),class:"w-full text-right border border-blue-200 bg-blue-50 text-blue-700 font-semibold rounded text-sm py-2 px-2 hover:bg-blue-100 transition-colors"}," $ "+r(ke(t.discount_value)),9,Es)):(a(),l("div",Ds,[e("input",{type:"number",value:t.discount_percent,onChange:i=>it(n,i),onClick:gt(i=>Ce(n),["self"]),class:"w-full text-right border border-gray-300 rounded text-sm py-2 pl-2 pr-6 cursor-pointer focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"},null,40,Ns),Fs]))],8,Ps),e("td",{class:"px-3 py-3 text-right align-middle w-36",title:`Subtotal: ${d(t.quantity*t.unit_price)}`},[e("span",Bs,r(d(t.quantity*t.unit_price)),1)],8,qs),e("td",Ls,[e("button",{onClick:i=>Le(n),class:"flex items-center justify-center w-8 h-8 bg-red-500 text-white rounded hover:bg-red-600 transition-colors mx-auto",title:"Eliminar producto"},Vs,8,Os)])],2))),128))])])]))]),c.value.length>0?(a(),l("div",As,[e("div",zs,[Is,e("span",Xs,r(d(z.value)),1)]),e("div",Hs,[Ks,e("span",{onClick:Re,class:"font-medium cursor-pointer hover:text-blue-600 flex items-center gap-1"},[y(r(N.value>0?"-"+d(G.value):d(0))+" ",1),Us])]),e("div",Gs,[e("div",Ws,[Qs,e("span",Js,r(d(ae.value)),1)]),e("div",Ys,[e("button",{onClick:s[3]||(s[3]=t=>X.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base"}," Procesar Venta "),e("button",{onClick:nt,class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base border border-red-300"}," Cancelar ")])])])):v("",!0)])])):v("",!0),xe.value==="sales"?(a(),l("div",Zs,[e("div",eo,[e("div",to,[e("div",so,[oo,e("span",no,r(je(ge).props.auth?.user?.name||"Usuario"),1),ao,_.store&&_.store.logo_url?(a(),l("img",{key:0,src:_.store.logo_url,alt:`Logo de ${_.store.name}`,class:"h-5 w-5 rounded-full object-cover"},null,8,lo)):v("",!0),_.store?(a(),l("span",ro,r(_.store.name),1)):v("",!0)]),e("button",{onClick:Pe,class:"px-3 py-1.5 bg-teal-500 text-white rounded text-sm font-medium"}," ¬´ Regresar ")])]),e("div",io,[e("div",co,[e("button",{onClick:s[4]||(s[4]=t=>Z.value=!0),class:"px-3 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center flex-shrink-0",title:"Ver cat√°logo de productos"},ho),e("button",{onClick:s[5]||(s[5]=t=>ne.value=!0),class:"px-3 py-2.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 flex items-center justify-center flex-shrink-0 border border-red-200",title:"Registrar Gasto"},po),e("div",_o,[L(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>x.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-12 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white",onKeyup:Se(ee,["enter"]),onInput:ee},null,544),[[te,x.value]]),mo,e("button",{onClick:Ve,class:"absolute right-2 top-2 p-1.5 text-blue-600 hover:text-blue-700",title:"Escanear c√≥digo de barras"},go)])]),q.value.length>0&&x.value.trim()?(a(),l("div",xo,[(a(!0),l(j,null,O(q.value,t=>(a(),l("div",{key:t.id,onClick:n=>{Y(t),x.value="",q.value=[]},class:"px-4 py-3 border-b border-gray-100 hover:bg-blue-50 cursor-pointer flex items-center gap-3"},[e("div",yo,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover rounded"},null,8,wo)):(a(),l("svg",ko,Mo))]),e("div",To,[e("p",jo,r(t.name),1),e("div",null,[t.promo_active&&t.promo_discount_percent>0?(a(),l(j,{key:0},[e("p",So,r(d(F(t).originalPrice)),1),e("p",$o,r(d(F(t).finalPrice)),1)],64)):(a(),l("p",Po,r(d(F(t).finalPrice)),1))])]),Eo],8,bo))),128))])):v("",!0)]),Do,e("div",No,[c.value.length===0?(a(),l("div",Fo,Oo)):(a(),l("div",Ro,[(a(!0),l(j,null,O(c.value,(t,n)=>(a(),l("div",{key:n,class:"px-4 py-3 bg-white"},[e("div",Vo,[e("div",Ao,[e("div",zo,[e("span",{class:Q(Be(t))}," Stock: "+r(B(t)),3),we(t)?v("",!0):(a(),l("span",Io," ‚ö† Sin stock "))]),e("p",Xo,r(t.product_name),1),e("p",Ho,r(d(t.unit_price)),1)]),e("div",Ko,[e("div",Uo,[Go,e("div",Wo,[e("button",{onClick:i=>Oe(n,-1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," - ",8,Qo),e("span",Jo,r(t.quantity),1),e("button",{onClick:i=>Oe(n,1),class:"w-8 h-8 flex items-center justify-center bg-blue-600 text-white rounded-full hover:bg-blue-700 font-medium text-sm"}," + ",8,Yo)])]),e("div",Zo,[en,e("span",tn,r(d(t.quantity*t.unit_price)),1)]),e("button",{onClick:i=>Ce(n),class:"w-8 h-8 flex items-center justify-center bg-gray-200 text-gray-600 rounded hover:bg-gray-300",title:"Aplicar descuento"},nn,8,sn),e("button",{onClick:i=>Le(n),class:"w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded hover:bg-red-600"},rn,8,an)])])]))),128))]))]),c.value.length>0?(a(),l("div",cn,[e("div",dn,[e("div",un,[hn,e("span",vn,r(d(z.value)),1)]),e("div",pn,[_n,e("span",{onClick:Re,class:"font-medium text-green-600 cursor-pointer hover:text-blue-600 flex items-center gap-1"},[y(r(N.value>0?"-"+d(G.value):d(0))+" ",1),mn])]),e("div",fn,[gn,e("span",xn,r(d(ae.value)),1)])]),e("div",bn,[e("button",{onClick:s[7]||(s[7]=t=>X.value=!0),class:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-base transition-colors"}," PROCESAR VENTA "),e("button",{onClick:s[8]||(s[8]=t=>{c.value=[],N.value=0,E.value="amount"}),class:"flex-1 py-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 font-semibold text-base transition-colors border border-red-300"}," CANCELAR ")])])):v("",!0)])):v("",!0),g(J,{show:X.value,onClose:s[12]||(s[12]=t=>X.value=!1)},{default:b(()=>[e("div",yn,[wn,e("div",kn,[Cn,L(e("select",{"onUpdate:modelValue":s[9]||(s[9]=t=>he.value=t),class:"w-full rounded-md border-gray-300"},$n,512),[[$e,he.value]])]),e("div",Pn,[En,L(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=t=>ve.value=t),class:"w-full rounded-md border-gray-300",rows:"3",placeholder:"Notas adicionales sobre la venta..."},null,512),[[te,ve.value]])]),c.value.some(t=>t.discount_percent>0)?(a(),l("div",Dn,[Nn,e("div",Fn,[(a(!0),l(j,null,O(c.value.filter(t=>t.discount_percent>0),(t,n)=>(a(),l("div",{key:n,class:"flex justify-between text-sm"},[e("span",qn,r(t.product_name)+":",1),e("span",Bn,"-"+r(t.discount_percent)+"% ("+r(d((t.original_price-t.unit_price)*t.quantity))+")",1)]))),128))])])):v("",!0),e("div",Ln,[e("div",On,[Rn,e("span",null,r(d(z.value)),1)]),G.value>0?(a(),l("div",Vn,[e("span",null,"Descuento ("+r(E.value==="percentage"?N.value+"%":"Monto")+"):",1),e("span",null,"-"+r(d(G.value)),1)])):v("",!0),e("div",An,[zn,e("span",null,r(d(ae.value)),1)])]),e("div",In,[g(ce,{onClick:s[11]||(s[11]=t=>X.value=!1)},{default:b(()=>[y("Cancelar")]),_:1}),g(de,{onClick:ut},{default:b(()=>[y("Confirmar Venta")]),_:1})])])]),_:1},8,["show"]),g(J,{show:se.value,onClose:s[15]||(s[15]=t=>se.value=!1)},{default:b(()=>[e("div",Xn,[Hn,h.value?(a(),l("div",Kn,[e("p",Un,[y(" N√∫mero de venta: "),e("span",Gn,"#"+r(h.value.sale_number),1)]),e("p",Wn,[y(" Total: "),e("span",Qn,r(d(h.value.total)),1)])])):v("",!0),e("div",Jn,[g(ce,{onClick:s[13]||(s[13]=t=>se.value=!1),class:"!px-3 sm:!px-4"},{default:b(()=>[Yn,Zn]),_:1}),h.value?(a(),l("button",{key:0,onClick:We,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150",disabled:V.value,title:"Descargar PDF"},[V.value?(a(),l("span",ta,"‚è≥")):(a(),l("span",sa,[y("‚¨áÔ∏è "),oa]))],8,ea)):v("",!0),h.value?(a(),l("button",{key:1,onClick:Qe,class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:ring ring-indigo-300 disabled:opacity-25 transition ease-in-out duration-150",disabled:V.value,title:"Compartir Factura"},[V.value?(a(),l("span",aa,"‚è≥")):(a(),l("span",la,[y("üîó "),ra]))],8,na)):v("",!0),h.value?(a(),xt(de,{key:2,onClick:s[14]||(s[14]=t=>et(h.value)),class:"!px-3 sm:!px-4",title:"Imprimir Factura"},{default:b(()=>[y(" üñ®Ô∏è "),ia]),_:1})):v("",!0)]),e("div",ca,[e("div",da,[e("div",ua,[_.store?.logo_url?(a(),l("img",{key:0,src:_.store.logo_url,alt:"Logo",class:"h-12 w-auto object-contain mx-auto mb-2 grayscale",crossorigin:"anonymous"},null,8,ha)):v("",!0),e("h2",va,r(_.store?.name),1),e("div",pa,[_.store?.nit?(a(),l("p",_a,"NIT: "+r(_.store.nit),1)):v("",!0),_.store?.phone?(a(),l("p",ma,"Tel: "+r(_.store.phone),1)):v("",!0),_.store?.address?(a(),l("p",fa,r(_.store.address),1)):v("",!0),_.store?.email?(a(),l("p",ga,r(_.store.email),1)):v("",!0)])]),xa,e("div",ba,[h.value?.user?.name?(a(),l("p",ya,"Le atendi√≥: "+r(h.value.user.name),1)):v("",!0),e("p",null,"Fecha: "+r(h.value?Ze(h.value.created_at):""),1),e("p",null,[y("No. Fac: "),e("span",wa,r(h.value?.sale_number),1)]),h.value?.customer_name?(a(),l("p",ka,"Cliente: "+r(h.value.customer_name),1)):v("",!0),h.value?.customer_nit?(a(),l("p",Ca,"CC/NIT: "+r(h.value.customer_nit),1)):v("",!0)]),Ma,e("div",Ta,[(a(!0),l(j,null,O(h.value?.items,t=>(a(),l("div",{key:t.id,class:"mb-2 pb-1 border-b border-dotted border-gray-400 last:border-0"},[e("div",ja,[e("span",Sa,r(t.product_name),1),e("span",$a,r(d(t.subtotal)),1)]),e("div",Pa,[t.variant_options?(a(),l("span",Ea,r(Object.values(t.variant_options).join("/")),1)):v("",!0),e("span",null,r(t.quantity)+" x "+r(d(t.unit_price)),1)])]))),128))]),Da,e("div",Na,[h.value?.discount>0?(a(),l("div",Fa,[qa,e("span",null,r(d(h.value.subtotal)),1)])):v("",!0),h.value?.discount>0?(a(),l("div",Ba,[La,e("span",null,"-"+r(d(h.value.discount)),1)])):v("",!0),e("div",Oa,[Ra,e("span",null,r(d(h.value?.total)),1)]),e("div",Va,[Aa,e("span",za,r(h.value?.payment_method),1)])]),e("div",Ia,[Xa,Ha,h.value?.notes?(a(),l("div",Ka,[Ua,e("p",null,r(h.value.notes),1)])):v("",!0)])])])])]),_:1},8,["show"]),g(J,{show:oe.value,onClose:le},{default:b(()=>[e("div",Ga,[Wa,Qa,Ja,g(ce,{onClick:le,class:"mt-4"},{default:b(()=>[y("Cerrar")]),_:1})])]),_:1},8,["show"]),g(J,{show:H.value,onClose:s[20]||(s[20]=t=>H.value=!1)},{default:b(()=>[e("div",Ya,[e("div",Za,[e("h2",el,r(p.value!==null?c.value[p.value]?.product_name:"Descuento de Producto"),1),e("button",{onClick:s[16]||(s[16]=t=>H.value=!1),class:"text-gray-400 hover:text-gray-600"},sl)]),e("div",ol,[e("div",null,[nl,e("input",{type:"number",value:p.value!==null?c.value[p.value]?.quantity:1,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,al)]),e("div",null,[ll,e("input",{type:"number",value:p.value!==null?c.value[p.value]?.original_price||c.value[p.value]?.unit_price:0,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,8,rl)]),e("div",null,[il,L(e("select",{"onUpdate:modelValue":s[17]||(s[17]=t=>S.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},ul,512),[[$e,S.value]])]),e("div",null,[e("label",hl," Descuento "+r(S.value==="percentage"?"%":""),1),L(e("input",{"onUpdate:modelValue":s[18]||(s[18]=t=>$.value=t),type:"number",step:(S.value==="percentage","0.01"),min:0,max:tt.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:S.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,vl),[[te,$.value,void 0,{number:!0}]])]),p.value!==null?(a(),l("div",pl,[e("div",_l,[ml,e("span",fl,r(d((c.value[p.value]?.original_price||c.value[p.value]?.unit_price)*c.value[p.value]?.quantity)),1)]),e("div",gl,[xl,e("span",bl,r(d(S.value==="percentage"?(c.value[p.value]?.original_price||c.value[p.value]?.unit_price)*c.value[p.value]?.quantity*$.value/100:$.value*c.value[p.value]?.quantity)),1)]),e("div",yl,[wl,e("span",null,r(d((c.value[p.value]?.original_price||c.value[p.value]?.unit_price)*c.value[p.value]?.quantity-(S.value==="percentage"?(c.value[p.value]?.original_price||c.value[p.value]?.unit_price)*c.value[p.value]?.quantity*$.value/100:$.value*c.value[p.value]?.quantity))),1)])])):v("",!0)]),e("div",kl,[g(ce,{onClick:s[19]||(s[19]=t=>H.value=!1)},{default:b(()=>[y("Cerrar")]),_:1}),g(de,{onClick:ct},{default:b(()=>[y("Aplicar")]),_:1})])])]),_:1},8,["show"]),g(Mt,{show:ne.value,onClose:s[21]||(s[21]=t=>ne.value=!1),onSuccess:st},null,8,["show"]),g(Tt,{show:ue.value,product:De.value,onClose:s[22]||(s[22]=t=>ue.value=!1),onAddToCart:Ye},null,8,["show","product"]),g(J,{show:Z.value,onClose:s[26]||(s[26]=t=>Z.value=!1),"max-width":"4xl"},{default:b(()=>[e("div",Cl,[e("div",Ml,[Tl,e("button",{onClick:s[23]||(s[23]=t=>Z.value=!1),class:"text-gray-400 hover:text-gray-600"},Sl)]),e("div",$l,[L(e("input",{"onUpdate:modelValue":s[24]||(s[24]=t=>x.value=t),type:"text",placeholder:"Buscar producto...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyup:Se(ee,["enter"]),onInput:ee},null,544),[[te,x.value]]),Pl]),e("div",El,[e("button",{onClick:s[25]||(s[25]=t=>D.value=null),class:Q(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",D.value===null?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])}," TODOS ",2),(a(!0),l(j,null,O(_.categories,t=>(a(),l("button",{key:t.id,onClick:n=>D.value=t.id,class:Q(["px-3 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap border",D.value===t.id?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},r(t.name),11,Dl))),128))]),e("div",Nl,[me.value.length===0?(a(),l("div",Fl,Bl)):(a(),l("div",Ll,[(a(!0),l(j,null,O(me.value,t=>(a(),l("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md cursor-pointer flex flex-col",onClick:n=>{Y(t),Z.value=!1}},[e("div",Rl,[t.main_image_url?(a(),l("img",{key:0,src:t.main_image_url,alt:t.name,class:"w-full h-full object-cover"},null,8,Vl)):(a(),l("svg",Al,Il))]),e("div",Xl,[e("div",Hl,[t.promo_active&&t.promo_discount_percent>0?(a(),l(j,{key:0},[e("p",Kl,r(d(F(t).originalPrice)),1),e("p",Ul,r(d(F(t).finalPrice)),1)],64)):(a(),l("p",Gl,r(d(F(t).finalPrice)),1))]),e("h3",Wl,r(t.name),1)])],8,Ol))),128))]))])])]),_:1},8,["show"]),g(J,{show:K.value,onClose:s[31]||(s[31]=t=>K.value=!1)},{default:b(()=>[e("div",Ql,[e("div",Jl,[Yl,e("button",{onClick:s[27]||(s[27]=t=>K.value=!1),class:"text-gray-400 hover:text-gray-600"},er)]),e("div",tr,[e("div",null,[sr,L(e("select",{"onUpdate:modelValue":s[28]||(s[28]=t=>E.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},ar,512),[[$e,E.value]])]),e("div",null,[e("label",lr," Descuento "+r(E.value==="percentage"?"%":""),1),L(e("input",{"onUpdate:modelValue":s[29]||(s[29]=t=>N.value=t),type:"number",step:(E.value==="percentage","0.01"),min:0,max:E.value==="percentage"?100:z.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:E.value==="percentage"?"Porcentaje Descuento":"Monto Descuento"},null,8,rr),[[te,N.value,void 0,{number:!0}]])]),e("div",ir,[e("div",cr,[dr,e("span",ur,r(d(z.value)),1)]),e("div",hr,[vr,e("span",pr,r(d(G.value)),1)]),e("div",_r,[mr,e("span",null,r(d(ae.value)),1)])])]),e("div",fr,[g(ce,{onClick:s[30]||(s[30]=t=>K.value=!1)},{default:b(()=>[y("Cerrar")]),_:1}),g(de,{onClick:dt},{default:b(()=>[y("Aplicar")]),_:1})])])]),_:1},8,["show"]),g(J,{show:A.value,onClose:s[34]||(s[34]=t=>A.value=!1)},{default:b(()=>[e("div",gr,[e("div",xr,[br,e("button",{onClick:s[32]||(s[32]=t=>A.value=!1),class:"text-gray-400 hover:text-gray-600"},wr)]),e("div",kr,[e("div",{class:"text-sm text-gray-700 whitespace-pre-line",innerHTML:pe.value},null,8,Cr)]),e("div",Mr,[g(de,{onClick:s[33]||(s[33]=t=>A.value=!1)},{default:b(()=>[y("Entendido")]),_:1})])])]),_:1},8,["show"]),g(Ct,{show:_e.value,type:"success",title:"¬°Gasto Guardado!",message:"El gasto se ha registrado correctamente en el sistema.","primary-text":"Entendido",onClose:s[35]||(s[35]=t=>_e.value=!1),onPrimary:s[36]||(s[36]=t=>_e.value=!1)},null,8,["show"])]),_:1})],64))}};export{Br as default};
