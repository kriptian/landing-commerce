import{_ as F}from"./AuthenticatedLayout-0XqtQlBh.js";import{K as N,r as d,a,o as l,b as r,u,h as G,d as o,e,f as m,n as U,F as C,i as $,t as v,l as y,H as D,m as p,j as S}from"./app-DdN1dnwv.js";import{u as H}from"./index-5LVkfiGv.js";import{_ as q}from"./Modal-uE4VJq8H.js";import{_ as B}from"./SecondaryButton-B5xcrSpi.js";import{D as M}from"./DangerButton-BMEUFFUh.js";import{_ as I}from"./AlertModal-CWL83k3D.js";import"./DropdownLink-DQGx_2Xf.js";const P={class:"flex justify-between items-center"},K={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},W={class:"mb-4 border-b border-gray-200"},X={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Y={key:0,class:"overflow-x-auto"},Z={class:"min-w-[720px] w-full divide-y divide-gray-200 table-auto"},ee={class:"bg-white divide-y divide-gray-200"},se={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},te={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},oe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},le={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},re={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},ae=["onClick"],ie={key:1,class:"overflow-x-auto"},ne={class:"min-w-[520px] w-full divide-y divide-gray-200 table-auto"},de={class:"bg-white divide-y divide-gray-200"},ue={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},me={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},pe=["onClick"],xe={class:"p-6"},ce={class:"mt-6 flex justify-end"},fe={class:"p-6"},ve={class:"mt-6 flex justify-end"},Ee={__name:"Index",props:{users:Array,roles:Array},setup(E){const T=N().props.auth.user,g=N(),i=d(g?.props?.ziggy?.query?.tab==="roles"?"roles":"users"),x=d(!!g.props.flash?.success),h=d(g.props.flash?.success||""),b=d(!1),w=d(null),L=n=>{w.value=n,b.value=!0},c=()=>{b.value=!1,w.value=null},j=()=>{S.delete(route("admin.users.destroy",w.value),{preserveScroll:!0,onSuccess:()=>{c(),h.value="¡Usuario eliminado con éxito!",x.value=!0},onError:()=>{c(),h.value="Hubo un error al eliminar el usuario.",x.value=!0}})},_=d(!1),k=d(null),R=H(),z=n=>{k.value=n,_.value=!0},f=()=>{_.value=!1,k.value=null},A=()=>{S.delete(route("admin.roles.destroy",k.value),{preserveScroll:!0,onSuccess:()=>{f(),R.success("¡Rol eliminado con éxito!")},onError:()=>{f(),R.error("No se puede eliminar un rol que está en uso.")}})};return(n,s)=>(l(),a(C,null,[r(u(G),{title:"Gestionar Usuarios y Roles"}),r(F,null,{header:o(()=>[e("div",P,[s[6]||(s[6]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Usuarios y Roles",-1)),e("div",null,[i.value==="roles"?(l(),D(u(y),{key:0,href:n.route("admin.roles.create"),class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700 ml-4"},{default:o(()=>[...s[4]||(s[4]=[p(" Crear Nuevo Rol ",-1)])]),_:1},8,["href"])):m("",!0),i.value==="users"?(l(),D(u(y),{key:1,href:n.route("admin.users.create"),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"},{default:o(()=>[...s[5]||(s[5]=[p(" Crear Nuevo Usuario ",-1)])]),_:1},8,["href"])):m("",!0)])])]),default:o(()=>[e("div",K,[e("div",J,[e("div",O,[e("div",Q,[e("div",W,[e("nav",X,[e("button",{onClick:s[0]||(s[0]=t=>i.value="users"),class:U([i.value==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Usuarios ",2),e("button",{onClick:s[1]||(s[1]=t=>i.value="roles"),class:U([i.value==="roles"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Roles ",2)])]),i.value==="users"?(l(),a("div",Y,[e("table",Z,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1)),e("tbody",ee,[(l(!0),a(C,null,$(E.users,t=>(l(),a("tr",{key:t.id},[e("td",se,v(t.name),1),e("td",te,v(t.email),1),e("td",oe,[t.roles.length>0?(l(),a("span",le,v(t.roles[0].name),1)):m("",!0)]),e("td",re,[r(u(y),{href:n.route("admin.users.edit",t.id),class:"text-indigo-600 hover:text-indigo-900 inline-flex items-center gap-1"},{default:o(()=>[...s[7]||(s[7]=[e("svg",{class:"w-5 h-5 sm:hidden",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),e("span",{class:"hidden sm:inline"},"Editar",-1)])]),_:1},8,["href"]),t.id!==u(T).id?(l(),a("button",{key:0,onClick:V=>L(t.id),class:"text-red-600 hover:text-red-900 ml-4"}," Eliminar ",8,ae)):m("",!0)])]))),128))])])])):m("",!0),i.value==="roles"?(l(),a("div",ie,[e("table",ne,[s[10]||(s[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre del Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1)),e("tbody",de,[(l(!0),a(C,null,$(E.roles,t=>(l(),a("tr",{key:t.id},[e("td",ue,v(t.name),1),e("td",me,[r(u(y),{href:n.route("admin.roles.edit",t.id),class:"text-indigo-600 hover:text-indigo-900 inline-flex items-center gap-1"},{default:o(()=>[...s[9]||(s[9]=[e("svg",{class:"w-5 h-5 sm:hidden",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),e("span",{class:"hidden sm:inline"},"Editar",-1)])]),_:1},8,["href"]),e("button",{onClick:V=>z(t.id),class:"text-red-600 hover:text-red-900 ml-4"}," Eliminar ",8,pe)])]))),128))])])])):m("",!0)])])])])]),_:1}),r(q,{show:b.value,onClose:c},{default:o(()=>[e("div",xe,[s[13]||(s[13]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este usuario? ",-1)),s[14]||(s[14]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. ",-1)),e("div",ce,[r(B,{onClick:c},{default:o(()=>[...s[11]||(s[11]=[p(" Cancelar ",-1)])]),_:1}),r(M,{class:"ms-3",onClick:j},{default:o(()=>[...s[12]||(s[12]=[p(" Sí, Eliminar Usuario ",-1)])]),_:1})])])]),_:1},8,["show"]),r(q,{show:_.value,onClose:f},{default:o(()=>[e("div",fe,[s[17]||(s[17]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este rol? ",-1)),s[18]||(s[18]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. No podrás eliminar un rol si hay usuarios que lo tengan asignado. ",-1)),e("div",ve,[r(B,{onClick:f},{default:o(()=>[...s[15]||(s[15]=[p(" Cancelar ",-1)])]),_:1}),r(M,{class:"ms-3",onClick:A},{default:o(()=>[...s[16]||(s[16]=[p(" Sí, Eliminar Rol ",-1)])]),_:1})])])]),_:1},8,["show"]),r(I,{show:x.value,type:"info",title:"Notificación",message:h.value,"primary-text":"Entendido",onPrimary:s[2]||(s[2]=t=>x.value=!1),onClose:s[3]||(s[3]=t=>x.value=!1)},null,8,["show","message"])],64))}};export{Ee as default};
