import{u as w,r as d,y,o as C,e as u,f as t,g as V,b as o,d as a,j as $,n as k,m as f,q as D}from"./app-CNn28wTC.js";import{_ as I}from"./Modal-DwPaT3Nw.js";import{_ as p,a as M,b as _}from"./InputError-B3Ol3tkp.js";import{_ as S}from"./PrimaryButton-FJgTUhUD.js";import{_ as j}from"./SecondaryButton-DPBPLJq3.js";const B={class:"p-6"},E=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," Registrar Gasto (Salida de Caja) ",-1),F={class:"mb-4"},N={class:"mb-6"},q={class:"flex justify-end gap-3"},T={__name:"ExpenseModal",props:{show:Boolean},emits:["close","success"],setup(g,{emit:v}){const i=v,e=w({amount:"",description:""}),l=d(null),r=d(""),b=n=>{if(!n)return"";const s=n.replace(/\D/g,"");return s?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s):""},h=n=>{let s=n.target.value.replace(/\D/g,"");e.amount=s,r.value=b(s)},x=()=>{e.post(route("admin.expenses.store"),{preserveScroll:!0,onSuccess:()=>{e.reset(),r.value="",i("success"),i("close")},onError:()=>{e.errors.amount&&l.value&&l.value.focus()}})},m=()=>{e.reset(),r.value="",e.clearErrors(),i("close")};return(n,s)=>(C(),y(I,{show:g.show,onClose:m},{default:u(()=>[t("div",B,[E,t("form",{onSubmit:V(x,["prevent"])},[t("div",F,[o(p,{for:"amount",value:"Monto"}),o(M,{id:"amount",ref_key:"amountInput",ref:l,modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),onInput:h,type:"text",class:"mt-1 block w-full",placeholder:"$ 0",required:"",autofocus:""},null,8,["modelValue"]),o(_,{class:"mt-2",message:a(e).errors.amount},null,8,["message"])]),t("div",N,[o(p,{for:"description",value:"DescripciÃ³n"}),$(t("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=c=>a(e).description=c),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"3",placeholder:"Ej: Pago de taxi, compra de insumos...",required:""},null,512),[[k,a(e).description]]),o(_,{class:"mt-2",message:a(e).errors.description},null,8,["message"])]),t("div",q,[o(j,{onClick:m},{default:u(()=>[f(" Cancelar ")]),_:1}),o(S,{class:D({"opacity-25":a(e).processing}),disabled:a(e).processing},{default:u(()=>[f(" Registrar Gasto ")]),_:1},8,["class","disabled"])])],32)])]),_:1},8,["show"]))}};export{T as default};
