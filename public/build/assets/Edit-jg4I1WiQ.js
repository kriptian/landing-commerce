const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-qMpXfv0d.js","assets/app-DC59Gc2Y.js","assets/app-KzUC-dne.css"])))=>i.map(i=>d[i]);
import{B as ot,r as g,c as B,u as nt,w as _e,q as rt,x as lt,a as d,o as c,b as x,d as p,h as it,e as V,f as s,g as b,i as k,j as _,l as y,p as U,v as dt,n as z,F as j,k as A,t as E,D as be,E as ct,s as ye,_ as ut}from"./app-DC59Gc2Y.js";import{_ as mt}from"./AuthenticatedLayout-71287cHp.js";import{_ as Y}from"./AlertModal-6xbY8yQE.js";import{_ as ne}from"./Modal-DYQL_gee.js";import{_ as pt}from"./PrimaryButton-566Rr2aq.js";import{_ as we}from"./SecondaryButton-Dzo7rlSi.js";import{D as gt}from"./DangerButton-B3qUNNgC.js";const ht={class:"font-semibold text-xl text-gray-800 leading-tight"},vt={class:"py-12"},ft={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},bt={class:"p-6 text-gray-900"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wt={class:"mb-4"},xt=s("label",{for:"name",class:"block font-medium text-sm text-gray-700"},"Nombre",-1),kt={class:"mb-4"},Ct=s("label",{for:"barcode",class:"block font-medium text-sm text-gray-700 mb-1"},"CÃ³digo de Barras (Opcional)",-1),St={class:"flex gap-2"},Pt=s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),jt={class:"mb-4"},Et=s("label",{for:"price",class:"block font-medium text-sm text-gray-700"},"Precio (Principal)",-1),Vt={class:"inline-flex items-center gap-2 mb-3 select-none"},At=s("span",{class:"font-semibold"},"Controlar inventario",-1),$t={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Mt=s("label",{for:"quantity",class:"block font-medium text-sm text-gray-700"},"Inventario (Total)",-1),Ot=["disabled"],Tt=s("label",{for:"alert_general",class:"block font-medium text-sm text-gray-700"},"Alerta (Opcional)",-1),Dt=["disabled"],Bt=s("label",{for:"purchase_price",class:"block font-medium text-sm text-gray-700"},"Precio de compra",-1),Ut={class:"mb-2"},zt=s("label",{class:"block font-medium text-sm text-gray-700"},"CategorÃ­as",-1),qt={key:0,class:"mt-1 text-sm text-amber-600 font-medium"},Nt={class:"space-y-3"},Ft=["onUpdate:modelValue","onChange","required"],Lt=s("option",{value:null},"Seleccione una categorÃ­a",-1),Ht=["value"],Gt={key:1,class:"mt-1 text-sm text-red-600"},Rt={class:"mb-4"},Wt=s("label",{for:"short_description",class:"block font-medium text-sm text-gray-700"},"DescripciÃ³n Corta",-1),Jt={class:"mb-4"},Qt=s("label",{for:"long_description",class:"block font-medium text-sm text-gray-700"},"DescripciÃ³n Larga",-1),Kt={class:"mb-4"},Xt=s("label",{for:"specifications",class:"block font-medium text-sm text-gray-700"},"Especificaciones (separadas por comas)",-1),Yt={class:"mb-4"},Zt=s("label",{for:"meta_keywords",class:"block font-medium text-sm text-gray-700"},"Palabras Clave SEO (separadas por comas)",-1),It=s("p",{class:"mt-1 text-xs text-gray-500"},"Estas palabras clave ayudan a mejorar el SEO del producto. No son visibles para los clientes.",-1),es={class:"md:col-span-2 mt-6 border-t pt-6"},ts={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ss={class:"p-6 text-gray-900"},as={class:"flex items-center justify-between"},os=s("h3",{class:"text-lg font-medium"},"Variantes del Producto",-1),ns={class:"flex items-center gap-2"},rs={class:"mt-4 border rounded-lg divide-y"},ls={key:0,class:"text-sm text-gray-500 p-3"},is={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2"},ds={class:"flex-1 min-w-0"},cs={class:"flex items-center gap-2"},us=["title","onClick"],ms={key:0},ps={key:1},gs=["onUpdate:modelValue"],hs={key:0,class:"flex-shrink-0 text-xs bg-gray-100 text-gray-700 rounded px-2 py-0.5 align-middle"},vs={class:"flex items-center gap-2 flex-shrink-0"},fs=["title","onClick"],_s=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[s("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),s("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),bs=[_s],ys=["onClick"],ws=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),s("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),xs=[ws],ks=["onClick"],Cs=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),Ss=[Cs],Ps={key:0,class:"mt-2 pl-2 bg-gray-50 rounded-md p-2"},js={class:"grid grid-cols-1 md:grid-cols-5 gap-3"},Es={class:"md:col-span-2"},Vs=s("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Depende de",-1),As=["onUpdate:modelValue"],$s=s("option",{value:""},"(sin dependencia)",-1),Ms=["value","disabled"],Os={key:0,class:"md:col-span-3"},Ts=s("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Permitir valores segÃºn el valor del padre",-1),Ds={class:"mt-2 space-y-2"},Bs={class:"text-xs font-semibold text-gray-700 mb-1"},Us={class:"flex flex-wrap gap-2"},zs=["checked","onChange"],qs={key:1,class:"mt-2 pl-4 border-l"},Ns={class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3"},Fs=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nombre",-1),Ls=["onUpdate:modelValue"],Hs=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Precio (opcional)",-1),Gs=["onUpdate:modelValue","disabled","onInput"],Rs={key:0,class:"mt-1 text-xs text-amber-600"},Ws={class:"flex items-center gap-2"},Js=["onChange","id","disabled"],Qs={key:0,class:"relative"},Ks=["src"],Xs=["onClick"],Ys=["for","title"],Zs=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-5 h-5 text-gray-400",fill:"currentColor"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),Is=[Zs],ea={key:2,class:"mt-1 text-xs text-amber-600"},ta={class:"flex items-center gap-2 ml-2"},sa=["onClick"],aa=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),oa=[aa],na=s("label",{class:"block font-medium text-sm text-gray-700"},"AÃ±adir Nueva Variante Principal",-1),ra={class:"mt-2 flex items-center gap-2"},la=s("button",{type:"submit",class:"w-8 h-8 inline-flex items-center justify-center rounded bg-green-500 text-white hover:bg-green-600",title:"AÃ±adir"}," âœ” ",-1),ia={class:"md:col-span-2 mt-6 border-t pt-6"},da=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"ImÃ¡genes Extra de la GalerÃ­a",-1),ca=s("p",{class:"text-sm text-gray-600 mb-4"}," Estas imÃ¡genes se agregarÃ¡n a la galerÃ­a general del producto. Las imÃ¡genes de las variantes se muestran cuando se selecciona esa opciÃ³n. ",-1),ua={class:"p-4 border rounded-md bg-gray-50 col-span-2"},ma={class:"flex items-center justify-between mb-2"},pa=s("label",{class:"block font-medium text-sm text-gray-700"},"ImÃ¡genes actuales",-1),ga={class:"text-xs text-gray-500"},ha={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3"},va=["onClick"],fa=["src"],_a=["onClick"],ba={key:1,class:"text-sm text-gray-500 mt-2"},ya={class:"mt-4 col-span-2"},wa=s("label",{for:"new_gallery_files",class:"block font-medium text-sm text-gray-700"},"AÃ±adir mÃ¡s imÃ¡genes",-1),xa=s("p",{class:"mt-1 text-xs text-gray-500"},"Formatos de imagen y hasta 2 MB por archivo.",-1),ka={class:"relative flex items-center justify-center bg-gray-50 border rounded-lg h-[60vh] min-h-[320px] mb-3 select-none"},Ca=["src"],Sa={class:"flex items-center gap-2 overflow-x-auto py-2"},Pa=["onClick"],ja=["src"],Ea={class:"md:col-span-2 flex items-center justify-end mt-6 border-t pt-6"},Va=["disabled"],Aa=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M4 4a2 2 0 0 1 2-2h7l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4zm9-1.5V7h4.5L13 2.5z"}),s("path",{d:"M8 13h8v2H8zM8 9h5v2H8z"})],-1),$a=s("span",null,"Guardar",-1),Ma=[Aa,$a],Oa={class:"p-6"},Ta=s("h2",{class:"text-lg font-medium text-gray-900"}," Â¿DeseÃ¡s guardar los cambios del producto? ",-1),Da=s("p",{class:"mt-1 text-sm text-gray-600"}," Se actualizarÃ¡ la informaciÃ³n y variantes del producto. ",-1),Ba={class:"mt-6 flex justify-end"},Ua={class:"p-6"},za=s("h2",{class:"text-lg font-semibold mb-4"},"Escanear CÃ³digo de Barras",-1),qa=s("div",{class:"mb-4"},[s("p",{class:"text-sm text-gray-600 mb-4"}," Apunta la cÃ¡mara hacia el cÃ³digo de barras. El cÃ³digo se detectarÃ¡ automÃ¡ticamente. "),s("div",{id:"barcode-scanner-edit",class:"w-full rounded-lg overflow-hidden",style:{"min-height":"300px"}})],-1),Na={class:"flex gap-3"},Fa={class:"p-6"},La=s("h2",{class:"text-lg font-semibold mb-4 text-green-600"},"Â¡CÃ³digo de barras escaneado!",-1),Ha={class:"mb-4"},Ga=s("p",{class:"text-sm text-gray-600 mb-2"}," CÃ³digo escaneado: ",-1),Ra={class:"text-lg font-semibold text-gray-900"},Wa={class:"flex gap-3"},xe=2*1024*1024,eo={__name:"Edit",props:{product:Object,categories:Array,selectedCategoryPath:Array},setup(ke){const u=ke,re=ot(),Z=g(!!re?.props?.flash?.success);g(re?.props?.flash?.success||"");const R=g(!1),M=g(!1),q=g([]),N=g(!1),O=g(null),F=g(!1),I=g(""),le=()=>{try{const a=new(window.AudioContext||window.webkitAudioContext),e=a.createOscillator(),t=a.createGain();e.connect(t),t.connect(a.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,a.currentTime),t.gain.exponentialRampToValueAtTime(.01,a.currentTime+.2),e.start(a.currentTime),e.stop(a.currentTime+.2)}catch(a){console.warn("No se pudo reproducir el beep:",a)}},Ce=a=>{const e=Array.from(a?.target?.files||[]),t=[],o=[];for(const n of e){if(!(n?.type||"").startsWith("image/")){t.push(`${n.name}: no es una imagen vÃ¡lida.`);continue}if(n.size>xe){t.push(`${n.name}: supera el lÃ­mite de 2 MB.`);continue}o.push(n)}if(t.length){q.value=["Problemas con las imÃ¡genes seleccionadas:",...t],M.value=!0,a?.target&&(a.target.value=""),r.new_gallery_files=[];return}r.new_gallery_files=o},v=g([{options:u.categories,selected:null}]),Se=async()=>{if(!Array.isArray(u.selectedCategoryPath)||u.selectedCategoryPath.length===0)return;for(let e=0;e<u.selectedCategoryPath.length;e++){const t=u.selectedCategoryPath[e];if(v.value[e]||(v.value[e]={options:[],selected:null}),e>0&&v.value[e].options.length===0){const o=v.value[e-1].selected;if(o){const l=await(await fetch(route("admin.categories.children",o))).json();v.value[e].options=Array.isArray(l.data)?l.data:[]}}v.value[e].selected=t.id,r.category_id=t.id,e<u.selectedCategoryPath.length-1&&(v.value[e+1]||(v.value[e+1]={options:[],selected:null}))}const a=r.category_id;if(a){const t=await(await fetch(route("admin.categories.children",a))).json(),o=Array.isArray(t.data)?t.data:[];o.length>0&&v.value.push({options:o,selected:null})}},Pe=a=>{v.value.splice(a+1)},je=async a=>{const e=v.value[a].selected;if(Pe(a),r.category_id=e||null,!e)return;const t=await fetch(route("admin.categories.children",e));if(!t.ok)return;const o=await t.json(),n=Array.isArray(o.data)?o.data:[];n.length>0&&(v.value.push({options:n,selected:null}),r.category_id=null)},W=B(()=>{if(v.value.length>1){const a=v.value[v.value.length-1];if(a.options.length>0&&!a.selected)return!v.value.some(t=>t.selected===r.category_id)}return!1}),Ee=a=>Object.entries(a).map(([e,t])=>`${e}:${t}`).join(", "),Ve=u.product.variants.map(a=>({id:a.id,options_text:Ee(a.options),price:a.price??"",purchase_price:a.purchase_price??null,retail_price:a.retail_price??null,stock:a.stock,alert:a.alert??null})),r=nt({_method:"PUT",name:u.product.name,barcode:u.product.barcode??"",price:u.product.price,purchase_price:u.product.purchase_price??null,track_inventory:u.product.track_inventory??!0,quantity:u.product.quantity,alert:u.product.alert??null,category_id:u.product.category_id,short_description:u.product.short_description,long_description:u.product.long_description,specifications:u.product.specifications?JSON.parse(u.product.specifications).join(", "):"",meta_keywords:u.product.meta_keywords??"",new_gallery_files:[],images_to_delete:[],variants:Ve,variants_to_delete:[],variant_attributes:[],variant_options:[]}),m=g([]),L=g(""),C=g({}),Ae=a=>{C.value[a]=!C.value[a]},$e=()=>{if(!u.product.variant_options||!Array.isArray(u.product.variant_options)){console.log("ðŸ” EDIT - No hay variant_options para hidratar");return}console.log("ðŸ” EDIT - Variant options recibidas del backend",JSON.stringify(u.product.variant_options,null,2));const a={};u.product.variant_attributes&&Array.isArray(u.product.variant_attributes)&&u.product.variant_attributes.forEach(e=>{e.name&&e.dependsOn&&(a[e.name]={dependsOn:e.dependsOn,rulesSelected:e.rulesSelected||{},rules:e.rules||{}})}),m.value=u.product.variant_options.map(e=>{const t=(e.children||[]).map(l=>{let i=l.image_path||null;return console.log("ðŸ” EDIT - Hidratando child",{id:l.id,name:l.name,image_path_raw:l.image_path,image_path_type:typeof l.image_path}),i&&!i.startsWith("/storage/")&&!i.startsWith("http://")&&!i.startsWith("https://")&&(i="/storage/"+i.replace(/^\/+/,"")),console.log("ðŸ” EDIT - Child hidratado",{id:l.id,name:l.name,imagePath_normalized:i}),{id:l.id,name:l.name,price:l.price,image:null,imagePreview:i,imagePath:i,order:l.order||0}}),o=a[e.name]||{},n=!!(o.dependsOn||Object.keys(o.rulesSelected||{}).length||Object.keys(o.rules||{}).length);return{id:e.id,name:e.name,children:t,order:e.order||0,dependsOn:o.dependsOn||"",rules:o.rules||{},rulesSelected:o.rulesSelected||{},__showDependency:n}}),m.value.forEach((e,t)=>{C.value[t]=!0})},ie=()=>{const a=L.value.trim()||"",e=m.value.length;m.value.push({id:null,name:a,children:[],order:e,dependsOn:"",rules:{},rulesSelected:{},__showDependency:!1}),C.value[e]=!0,L.value=""},Me=a=>{m.value.splice(a,1)},Oe=a=>{m.value[a].children||(m.value[a].children=[]),m.value[a].children.push({id:null,name:"",price:null,image:null,imagePreview:null,imagePath:null,order:m.value[a].children.length}),C.value[a]=!0},Te=(a,e)=>{m.value[a].children.splice(e,1)},De=(a,e,t)=>{const o=t?.target?.files?.[0];if(!o)return;if(!D(a)){t?.target&&(t.target.value=""),de.value||(K.value=!0,de.value=!0);return}const n=[];if((o?.type||"").startsWith("image/")||n.push(`${o.name}: no es una imagen vÃ¡lida.`),o.size>xe&&n.push(`${o.name}: supera el lÃ­mite de 2 MB.`),n.length){q.value=["Problemas con la imagen de la variante:",...n],M.value=!0,t?.target&&(t.target.value=""),m.value[a].children[e].image=null,m.value[a].children[e].imagePreview=null,m.value[a].children[e].imagePath=null;return}m.value[a].children[e].image=o,m.value[a].children[e].imagePath=null;const i=new FileReader;i.onload=h=>{m.value[a].children[e].imagePreview=h.target.result},i.readAsDataURL(o)},Be=(a,e)=>{m.value[a].children[e].image=null,m.value[a].children[e].imagePreview=null,m.value[a].children[e].imagePath=null},Ue=()=>{const a=[];return m.value.forEach((e,t)=>{if(!e.name.trim())return;const o={id:e.id,name:e.name.trim(),parent_id:null,price:null,image_path:null,order:e.order??t,children:[]};e.children&&e.children.length>0&&e.children.forEach((n,l)=>{if(!n.name.trim())return;let i=null;if(!n.image&&n.imagePath){const h=String(n.imagePath||"").trim();h&&h!=="null"&&h!=="undefined"&&(i=h)}console.log("ðŸ” EDIT - Preparando variant option child",{childId:n.id,name:n.name,hasNewImage:!!n.image,imagePath:n.imagePath,imagePathToSend:i}),o.children.push({id:n.id,name:n.name.trim(),parent_id:null,price:n.price?parseFloat(n.price):null,image_file_key:n.image?`variant_option_${t}_${l}`:null,image_path:i,order:n.order??l})}),(o.children.length>0||o.name)&&a.push(o)}),console.log("ðŸ” EDIT - Variant options preparadas para enviar",JSON.stringify(a,null,2)),a},ze=()=>{const a=[];return m.value.forEach(e=>{if(!e.name.trim())return;const t=(e.children||[]).map(n=>n.name.trim()).filter(Boolean);if(t.length===0)return;const o={name:e.name.trim(),values:t,valuesText:t.join(", "),dependsOn:e.dependsOn||"",rules:e.rules||{},rulesSelected:e.rulesSelected||{}};a.push(o)}),a},qe=B(()=>m.value.filter(e=>!e.children||e.children.length===0?!1:e.children.some(t=>t.price&&t.price!==""&&t.price!=null)).length>1),T=g(!1),J=g(!1),Ne=["Has intentado agregar precios a una variante cuando ya existe otra variante principal con precios configurados.","","ðŸ“‹ Regla del Sistema:","Solo puedes asignar precios a las opciones hijas de UNA variante principal. Si ya asignaste precios a una variante (por ejemplo, Color), no podrÃ¡s agregar precios a otra variante (por ejemplo, Equipo).","","ðŸ’¡ CÃ³mo funciona:","Cuando un cliente seleccione una opciÃ³n de la variante que tiene precios, se mostrarÃ¡ el precio de esa opciÃ³n especÃ­fica. Si no selecciona ninguna opciÃ³n o selecciona una opciÃ³n sin precio, se usarÃ¡ el precio principal del producto.","","ðŸ’¡ Sugerencia:","Si necesitas diferentes precios segÃºn mÃºltiples caracterÃ­sticas, considera crear productos separados o usar una sola variante que combine ambas caracterÃ­sticas."],Q=a=>!m.value.find((t,o)=>o===a||!t.children||t.children.length===0?!1:t.children.some(n=>n.price&&n.price!==""&&n.price!=null)),D=a=>!m.value.find((t,o)=>o===a||!t.children||t.children.length===0?!1:t.children.some(n=>n.imagePreview||n.image||n.imagePath&&n.imagePath!=="")),Fe=(a,e,t)=>{const o=t?.target?.value;!o||o===""||o==null||Q(a)||(t.target.value="",m.value[a].children[e].price=null,J.value||(T.value=!0,J.value=!0))},K=g(!1),de=g(!1),Le=["Has intentado agregar imÃ¡genes a una variante cuando ya existe otra variante principal con imÃ¡genes configuradas.","","ðŸ“‹ Regla del Sistema:","Solo puedes asignar imÃ¡genes a las opciones hijas de UNA variante principal. Si ya asignaste imÃ¡genes a una variante (por ejemplo, Color), no podrÃ¡s agregar imÃ¡genes a otra variante (por ejemplo, Equipo).","","ðŸ’¡ CÃ³mo funciona:","Cuando un cliente seleccione una opciÃ³n de la variante que tiene imÃ¡genes, se mostrarÃ¡ la imagen de esa opciÃ³n especÃ­fica en la galerÃ­a. Si no selecciona ninguna opciÃ³n o selecciona una opciÃ³n sin imagen, se mostrarÃ¡n las imÃ¡genes regulares del producto.","","ðŸ’¡ Sugerencia:","Si necesitas diferentes imÃ¡genes segÃºn mÃºltiples caracterÃ­sticas, considera crear productos separados o usar una sola variante que combine ambas caracterÃ­sticas."];_e(()=>m.value,()=>{J.value||setTimeout(()=>{qe.value&&!T.value&&(T.value=!0,J.value=!0)},1e3)},{deep:!0});const X=g([{name:"",valuesText:"",dependsOn:"",rules:{},rulesSelected:{}}]),ee=a=>String(a||"").split(",").map(e=>e.trim()).filter(Boolean);function He(a,e,t){return(a.rulesSelected&&Array.isArray(a.rulesSelected[e])?a.rulesSelected[e]:[]).includes(t)}function Ge(a,e,t,o){const n=!!o?.target?.checked;a.rulesSelected||(a.rulesSelected={});const l=Array.isArray(a.rulesSelected[e])?[...a.rulesSelected[e]]:[],i=l.indexOf(t);n&&i===-1&&l.push(t),!n&&i!==-1&&l.splice(i,1),a.rulesSelected[e]=l}function Re(a){a.__showDependency=!a.__showDependency,a.__showDependency||(a.dependsOn="",a.rulesSelected={},a.rules={})}const We=()=>{try{const a=Array.isArray(u.product.variants)?u.product.variants:[];if(a.length===0)return;const e=new Set;a.forEach(o=>{Object.keys(o?.options||{}).forEach(n=>e.add(n))});const t=[];e.forEach(o=>{const n=new Set;a.forEach(i=>{const h=(i?.options||{})[o];h!=null&&String(h).trim()!==""&&n.add(String(h))});const l=Array.from(n).join(", ");t.push({name:o,valuesText:l,dependsOn:"",rules:{},rulesSelected:{}})}),t.length>0&&(X.value=t)}catch{}},Je=()=>{try{const a=u.product?.variant_attributes,e=Array.isArray(a)?a:[];if(e.length===0)return!1;const t=e.map(o=>{const n=Array.isArray(o?.values)?o.values:ee(o?.valuesText||""),l=String(o?.dependsOn||"").trim(),i=typeof o?.rulesSelected=="object"&&o.rulesSelected?o.rulesSelected:{},h=typeof o?.rules=="object"&&o.rules?o.rules:{},f=!!(l||Object.keys(i).length||Object.keys(h).length);return{name:String(o?.name||""),valuesText:n.join(", "),dependsOn:l,rulesSelected:i,rules:h,__showDependency:f}}).filter(o=>o.name);if(t.length>0)return X.value=t,!0}catch{}return!1},Qe=()=>{try{const a=u.product?.variant_attributes||[];if(!Array.isArray(a)||a.length===0)return;const e=Object.fromEntries(X.value.map(t=>[t.name,t]));for(const t of a){const o=e[t.name];o&&(t.dependsOn&&(o.dependsOn=t.dependsOn,o.__showDependency=!0),t.rulesSelected&&typeof t.rulesSelected=="object"?(o.rulesSelected=t.rulesSelected,Object.keys(o.rulesSelected||{}).length>0&&(o.__showDependency=!0)):t.rules&&typeof t.rules=="object"&&(o.rules=t.rules,Object.keys(o.rules||{}).length>0&&(o.__showDependency=!0)))}}catch{}},w=g([...u.product.images]),ce=a=>{r.images_to_delete.push(a.id),w.value=w.value.filter(e=>e.id!==a.id)},te=g(!1),S=g(0),ue=g(!1);function se(){ue.value=window.innerWidth<768}rt(async()=>{se(),window.addEventListener("resize",se),Se(),$e(),Je()||(We(),Qe())}),lt(()=>{window.removeEventListener("resize",se),H()});const Ke=async()=>{try{N.value=!0,await ye();const{Html5Qrcode:a}=await ut(async()=>{const{Html5Qrcode:o}=await import("./index-qMpXfv0d.js");return{Html5Qrcode:o}},__vite__mapDeps([0,1,2])),e=document.getElementById("barcode-scanner-edit");if(!e)return;O.value=new a(e.id);const t={fps:10,qrbox:{width:250,height:250}};try{await O.value.start({facingMode:"environment"},t,o=>{le(),r.barcode=o,I.value=o,H(),F.value=!0},o=>{})}catch{try{await O.value.start({facingMode:"user"},t,n=>{le(),r.barcode=n,I.value=n,H(),F.value=!0},n=>{})}catch(n){console.error("Error accediendo a la cÃ¡mara:",n),alert("No se pudo acceder a la cÃ¡mara. Por favor, permite el acceso a la cÃ¡mara en la configuraciÃ³n del navegador."),N.value=!1}}}catch(a){console.error("Error inicializando escÃ¡ner:",a),alert("Error al inicializar el escÃ¡ner. Por favor, intenta nuevamente."),N.value=!1}},H=async()=>{if(O.value){try{await O.value.stop(),await O.value.clear()}catch(a){console.error("Error deteniendo escÃ¡ner:",a)}O.value=null}N.value=!1},ae=B(()=>ue.value?1:4),Xe=B(()=>w.value.slice(0,ae.value)),me=B(()=>w.value.slice(ae.value));function pe(a=0){S.value=a,te.value=!0}function ge(){te.value=!1}function Ye(){const a=w.value.length;a!==0&&(S.value=(S.value-1+a)%a)}function Ze(){const a=w.value.length;a!==0&&(S.value=(S.value+1)%a)}function Ie(a){a<0||a>=w.value.length||(S.value=a)}const et=B(()=>{if(r.variants.length>0){let a=0;return r.variants.forEach(e=>{a+=Number(e.stock)||0}),a}return Number(r.quantity)||0});_e(et,a=>{r.variants.length>0&&(r.quantity=a)});const tt=()=>{if(W.value){q.value=["DebÃ©s seleccionar una subcategorÃ­a. La categorÃ­a principal tiene subcategorÃ­as disponibles y es obligatorio elegir una de ellas."],M.value=!0,ye(()=>{const e=document.querySelector(".space-y-3 select");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus())});return}r.variant_options=Ue();const a=ze();if(a.length>0)r.variant_attributes=a.map(e=>({name:e.name,values:e.values,dependsOn:e.dependsOn||"",rulesSelected:e.rulesSelected||{},rules:e.rules||{}}));else try{const e=X.value.map(t=>({name:String(t.name||"").trim(),values:ee(t.valuesText),dependsOn:String(t.dependsOn||"").trim(),rules:t.rules||{},rulesSelected:t.rulesSelected||{}})).filter(t=>t.name&&t.values.length>0);if(r.variant_attributes=e,e.length>0){let l=function(f){n.has(f.name)||(f.dependsOn&&t[f.dependsOn]&&l(t[f.dependsOn]),n.add(f.name),o.push(f))},h=function(f,P){if(f===o.length){i.push({...P});return}const $=o[f];let ve=$.values;if($.dependsOn){const G=P[$.dependsOn];if(G!=null){const oe=$.rulesSelected?.[G]??$.rules?.[G]??[],fe=Array.isArray(oe)?oe:ee(oe);fe.length>0&&(ve=$.values.filter(at=>fe.includes(at)))}}for(const G of ve)P[$.name]=G,h(f+1,P);delete P[$.name]};const t=Object.fromEntries(e.map(f=>[f.name,f])),o=[],n=new Set;e.forEach(l);const i=[];h(0,{}),r.variants=i.map(f=>({id:null,options_text:o.map(P=>`${P.name}:${f[P.name]}`).join(", "),price:"",purchase_price:null,stock:0,alert:null}))}else r.variants=[]}catch{r.variant_attributes=[]}R.value=!0},he=()=>{R.value=!1},st=()=>{r.transform(n=>(m.value.forEach((l,i)=>{l.children&&l.children.length>0&&l.children.forEach((h,f)=>{if(h.image instanceof File){const P=`variant_option_${i}_${f}`;n[P]=h.image}})}),n));const a=m.value.flatMap((n,l)=>(n.children||[]).map((i,h)=>i.image instanceof File?`variant_option_${l}_${h}`:null).filter(Boolean)),e=r.new_gallery_files&&r.new_gallery_files.length>0,t=a.length>0||e,o={preserveScroll:!0,onError:async()=>{const n=[];for(const[l,i]of Object.entries(r.errors))l.startsWith("new_gallery_files.")&&String(i).toLowerCase().includes("image")?n.push("Una o mÃ¡s imÃ¡genes nuevas superan el tamaÃ±o mÃ¡ximo permitido (2 MB) o no son vÃ¡lidas."):n.push(String(i));q.value=n,M.value=n.length>0},onFinish:()=>{R.value=!1}};t?r.post(route("admin.products.update",u.product.id),o):r.put(route("admin.products.update",u.product.id),o)};return(a,e)=>(c(),d(j,null,[x(p(it),{title:"Editar Producto"}),x(mt,null,{header:V(()=>[s("h2",ht,"Editar Producto: "+E(p(r).name),1)]),default:V(()=>[s("div",vt,[s("div",ft,[s("div",_t,[s("div",bt,[s("form",{onSubmit:b(tt,["prevent"])},[s("div",yt,[s("div",null,[s("div",wt,[xt,_(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>p(r).name=t),type:"text",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[y,p(r).name]])]),s("div",kt,[Ct,s("div",St,[_(s("input",{id:"barcode","onUpdate:modelValue":e[1]||(e[1]=t=>p(r).barcode=t),type:"text",class:"flex-1 block mt-1 rounded-md shadow-sm border-gray-300",placeholder:"Ej: 1234567890123"},null,512),[[y,p(r).barcode]]),s("button",{type:"button",onClick:Ke,class:"px-4 py-2 mt-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2 whitespace-nowrap",title:"Escanear cÃ³digo de barras"},[Pt,U(" Escanear ")])])]),s("div",jt,[Et,_(s("input",{id:"price","onUpdate:modelValue":e[2]||(e[2]=t=>p(r).price=t),type:"number",step:"0.01",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[y,p(r).price]])]),s("label",Vt,[_(s("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>p(r).track_inventory=t),class:"rounded"},null,512),[[dt,p(r).track_inventory]]),At]),p(r).track_inventory?(c(),d("div",$t,[s("div",null,[Mt,_(s("input",{id:"quantity","onUpdate:modelValue":e[4]||(e[4]=t=>p(r).quantity=t),type:"number",class:z(["block mt-1 w-full rounded-md shadow-sm border-gray-300",{"bg-gray-100":p(r).track_inventory===!1}]),disabled:p(r).track_inventory===!1,required:"",title:"Stock si no hay variantes. Con variantes, se suma automÃ¡ticamente."},null,10,Ot),[[y,p(r).quantity]])]),s("div",null,[Tt,_(s("input",{id:"alert_general","onUpdate:modelValue":e[5]||(e[5]=t=>p(r).alert=t),type:"number",class:z(["block mt-1 w-full rounded-md shadow-sm border-gray-300",{"bg-gray-100":p(r).track_inventory===!1}]),disabled:p(r).track_inventory===!1,title:"Se considera bajo stock cuando cantidad â‰¤ alerta."},null,10,Dt),[[y,p(r).alert]])]),s("div",null,[Bt,_(s("input",{id:"purchase_price","onUpdate:modelValue":e[6]||(e[6]=t=>p(r).purchase_price=t),type:"number",step:"0.01",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300"},null,512),[[y,p(r).purchase_price]])])])):k("",!0),s("div",Ut,[zt,W.value?(c(),d("p",qt," âš ï¸ Es obligatorio seleccionar una subcategorÃ­a ")):k("",!0)]),s("div",Nt,[(c(!0),d(j,null,A(v.value,(t,o)=>(c(),d("div",{key:o,class:"mb-1"},[_(s("select",{class:z(["block w-full rounded-md shadow-sm border-gray-300",{"border-red-500":W.value&&o===v.value.length-1&&!t.selected}]),"onUpdate:modelValue":n=>t.selected=n,onChange:n=>je(o),required:o===v.value.length-1&&t.options.length>0},[Lt,(c(!0),d(j,null,A(t.options,n=>(c(),d("option",{key:n.id,value:n.id},E(n.name),9,Ht))),128))],42,Ft),[[be,t.selected]])]))),128))]),W.value?(c(),d("p",Gt," DebÃ©s seleccionar una subcategorÃ­a. La categorÃ­a principal tiene subcategorÃ­as disponibles. ")):k("",!0)]),s("div",null,[s("div",Rt,[Wt,_(s("textarea",{id:"short_description","onUpdate:modelValue":e[7]||(e[7]=t=>p(r).short_description=t),class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",rows:"3"},null,512),[[y,p(r).short_description]])]),s("div",Jt,[Qt,_(s("textarea",{id:"long_description","onUpdate:modelValue":e[8]||(e[8]=t=>p(r).long_description=t),class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",rows:"5"},null,512),[[y,p(r).long_description]])]),s("div",Kt,[Xt,_(s("input",{id:"specifications","onUpdate:modelValue":e[9]||(e[9]=t=>p(r).specifications=t),type:"text",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300"},null,512),[[y,p(r).specifications]])]),s("div",Yt,[Zt,_(s("input",{id:"meta_keywords","onUpdate:modelValue":e[10]||(e[10]=t=>p(r).meta_keywords=t),type:"text",class:"block mt-1 w-full rounded-md shadow-sm border-gray-300",placeholder:"palabra1, palabra2, palabra3"},null,512),[[y,p(r).meta_keywords]]),It])])]),s("div",es,[s("div",ts,[s("div",ss,[s("div",as,[os,s("div",ns,[s("button",{type:"button",class:"w-7 h-7 inline-flex items-center justify-center rounded border border-gray-300 hover:bg-gray-100 text-gray-700",title:"Expandir todo",onClick:e[11]||(e[11]=()=>{m.value.forEach((t,o)=>C.value[o]=!0)})}," + "),s("button",{type:"button",class:"w-7 h-7 inline-flex items-center justify-center rounded border border-gray-300 hover:bg-gray-100 text-gray-700",title:"Colapsar todo",onClick:e[12]||(e[12]=()=>{m.value.forEach((t,o)=>C.value[o]=!1)})}," âˆ’ ")])]),s("div",rs,[m.value.length===0?(c(),d("p",ls," AÃºn no hay variantes principales. AgregÃ¡ una usando el botÃ³n de abajo. ")):k("",!0),(c(!0),d(j,null,A(m.value,(t,o)=>(c(),d("div",{key:`parent-${o}`,class:"p-3 hover:bg-gray-50"},[s("div",is,[s("div",ds,[s("div",cs,[s("button",{type:"button",class:"w-6 h-6 flex-shrink-0 inline-flex items-center justify-center rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100",title:C.value[o]??!1?"Colapsar opciones":"Expandir opciones",onClick:n=>Ae(o)},[C.value[o]??!1?(c(),d("span",ps,"v")):(c(),d("span",ms,">"))],8,us),_(s("input",{"onUpdate:modelValue":n=>t.name=n,type:"text",placeholder:"Ej: Color, Talla, Material",class:"flex-1 min-w-0 font-medium border-0 bg-transparent focus:bg-white focus:border focus:border-gray-300 rounded px-2 py-1 focus:outline-none"},null,8,gs),[[y,t.name]]),t.children&&t.children.length>0?(c(),d("span",hs," ("+E(t.children.length)+") ",1)):k("",!0)])]),s("div",vs,[s("button",{type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:t.__showDependency?"Ocultar dependencia":"Configurar dependencia",onClick:n=>Re(t)},bs,8,fs),s("button",{type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded border border-green-500 text-green-600 hover:bg-green-50",title:"AÃ±adir opciÃ³n",onClick:n=>Oe(o)},xs,8,ys),s("button",{type:"button",onClick:n=>Me(o),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},Ss,8,ks)])]),t.__showDependency?(c(),d("div",Ps,[s("div",js,[s("div",Es,[Vs,_(s("select",{"onUpdate:modelValue":n=>t.dependsOn=n,class:"block w-full text-sm border-gray-300 rounded-md shadow-sm"},[$s,(c(!0),d(j,null,A(m.value,(n,l)=>(c(),d("option",{key:`dep-${o}-${l}`,value:n.name,disabled:n===t||!n.name},E(n.name||"(sin nombre)"),9,Ms))),128))],8,As),[[be,t.dependsOn]])]),t.dependsOn?(c(),d("div",Os,[Ts,s("div",Ds,[(c(!0),d(j,null,A((m.value.find(n=>n.name===t.dependsOn)?.children||[]).map(n=>n.name),n=>(c(),d("div",{key:`pv-${o}-${n}`,class:"border rounded p-2 bg-white"},[s("div",Bs,[U(E(t.dependsOn)+" = ",1),s("strong",null,E(n),1)]),s("div",Us,[(c(!0),d(j,null,A((t.children||[]).map(l=>l.name),l=>(c(),d("label",{key:`cv-${o}-${n}-${l}`,class:"inline-flex items-center gap-1 text-xs"},[s("input",{type:"checkbox",checked:He(t,n,l),onChange:i=>Ge(t,n,l,i),class:"rounded"},null,40,zs),s("span",null,E(l),1)]))),128))])]))),128))])])):k("",!0)])])):k("",!0),C.value[o]??!1?(c(),d("div",qs,[(c(!0),d(j,null,A(t.children,(n,l)=>(c(),d("div",{key:`child-${o}-${l}`,class:"py-2 flex justify-between items-start"},[s("div",Ns,[s("div",null,[Fs,_(s("input",{"onUpdate:modelValue":i=>n.name=i,type:"text",placeholder:"Ej: Rojo, Verde",class:"block w-full text-sm border-gray-300 rounded-md shadow-sm"},null,8,Ls),[[y,n.name]])]),s("div",null,[Hs,_(s("input",{"onUpdate:modelValue":i=>n.price=i,type:"number",step:"0.01",placeholder:"Usa precio principal",class:z(["block w-full text-sm border-gray-300 rounded-md shadow-sm",{"bg-gray-100 cursor-not-allowed":!Q(o)}]),disabled:!Q(o),onInput:i=>Fe(o,l,i)},null,42,Gs),[[y,n.price]]),Q(o)?k("",!0):(c(),d("p",Rs," Solo puedes agregar precios a una variante principal "))]),s("div",Ws,[s("input",{type:"file",accept:"image/*",onChange:i=>De(o,l,i),class:"hidden",id:`variant-image-input-${o}-${l}`,disabled:!D(o)},null,40,Js),n.imagePreview||n.imagePath?(c(),d("div",Qs,[s("img",{src:n.imagePreview||n.imagePath,alt:"Preview",class:"w-10 h-10 object-cover rounded border"},null,8,Ks),s("button",{type:"button",onClick:b(i=>Be(o,l),["stop"]),class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs hover:bg-red-600"}," Ã— ",8,Xs)])):(c(),d("label",{key:1,for:`variant-image-input-${o}-${l}`,class:z(["inline-flex items-center justify-center w-10 h-10 border-2 border-dashed border-gray-300 rounded hover:border-blue-400 hover:bg-blue-50 transition",{"cursor-pointer":D(o),"cursor-not-allowed opacity-50":!D(o)}]),title:D(o)?"Agregar foto":"Solo puedes agregar imÃ¡genes a una variante principal"},Is,10,Ys)),D(o)?k("",!0):(c(),d("p",ea," Solo puedes agregar imÃ¡genes a una variante principal "))])]),s("div",ta,[s("button",{type:"button",onClick:i=>Te(o,l),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},oa,8,sa)])]))),128))])):k("",!0)]))),128))]),s("form",{onSubmit:b(ie,["prevent"]),class:"mt-6 border-t pt-4"},[na,s("div",ra,[_(s("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=t=>L.value=t),class:"block w-full rounded-md shadow-sm border-gray-300",placeholder:"Nombre de la nueva variante principal",onKeyup:ct(ie,["enter"])},null,544),[[y,L.value]]),la,s("button",{type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded bg-gray-200 text-gray-800 hover:bg-gray-300",onClick:e[14]||(e[14]=t=>L.value=""),title:"Cancelar"}," âœ– ")])],32)])])]),s("div",ia,[da,ca,s("div",ua,[s("div",ma,[pa,s("span",ga,E(w.value.length)+" imagen(es)",1)]),w.value.length>0?(c(),d("div",ha,[(c(!0),d(j,null,A(Xe.value,(t,o)=>(c(),d("div",{key:t.id,class:"relative rounded-lg overflow-hidden border bg-white shadow-sm hover:shadow-md transition group cursor-pointer",onClick:n=>pe(o)},[s("img",{src:t.path,class:"w-full h-full aspect-[4/3] object-cover",alt:"Imagen del producto"},null,8,fa),s("button",{onClick:b(n=>ce(t),["stop","prevent"]),type:"button",class:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-7 h-7 flex items-center justify-center shadow-md hover:bg-red-700"}," Ã— ",8,_a)],8,va))),128)),me.value.length>0?(c(),d("div",{key:0,class:"relative rounded-lg overflow-hidden border bg-white shadow-sm hover:shadow-md transition group cursor-pointer flex items-center justify-center text-gray-800 font-bold text-base h-full min-h-[90px]",onClick:e[15]||(e[15]=t=>pe(ae.value))}," +"+E(me.value.length),1)):k("",!0)])):(c(),d("p",ba,"Este producto no tiene imÃ¡genes."))]),s("div",ya,[wa,s("input",{id:"new_gallery_files",onInput:e[16]||(e[16]=t=>Ce(t)),type:"file",multiple:"",class:"block mt-1 w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),xa])]),te.value?(c(),d("div",{key:0,class:"fixed inset-0 bg-black/50 z-[1000] flex items-center justify-center p-4",style:{"pointer-events":"auto"},onClick:b(ge,["self"])},[s("div",{class:"bg-white rounded-lg p-4 w-full max-w-5xl max-h-[85vh] overflow-hidden relative",onClick:e[22]||(e[22]=b(()=>{},["stop"]))},[s("button",{type:"button",class:"absolute top-3 right-3 bg-gray-900 text-white rounded-full w-8 h-8 flex items-center justify-center z-30",onClick:b(ge,["stop","prevent"]),onMousedown:e[17]||(e[17]=b(()=>{},["stop","prevent"]))},"Ã—",32),s("div",ka,[s("button",{class:"absolute left-2 bg-white/90 border rounded-full w-9 h-9 flex items-center justify-center z-20",onClick:b(Ye,["stop","prevent"]),onMousedown:e[18]||(e[18]=b(()=>{},["stop","prevent"]))},"â€¹",32),s("img",{src:w.value[S.value]?.path,class:"max-w-full max-h-full object-contain",alt:"Imagen"},null,8,Ca),s("button",{class:"absolute right-2 bg-white/90 border rounded-full w-9 h-9 flex items-center justify-center z-20",onClick:b(Ze,["stop","prevent"]),onMousedown:e[19]||(e[19]=b(()=>{},["stop","prevent"]))},"â€º",32),w.value[S.value]?(c(),d("button",{key:0,class:"absolute top-2 right-12 bg-red-600 text-white rounded px-2 py-1 text-xs z-20",type:"button",onClick:e[20]||(e[20]=b(t=>ce(w.value[S.value]),["stop","prevent"])),onMousedown:e[21]||(e[21]=b(()=>{},["stop","prevent"]))},"Eliminar",32)):k("",!0)]),s("div",Sa,[(c(!0),d(j,null,A(w.value,(t,o)=>(c(),d("div",{key:t.id,class:z(["border rounded p-1 cursor-pointer flex-shrink-0",{"ring-2 ring-blue-500":o===S.value}]),onClick:n=>Ie(o)},[s("img",{src:t.path,class:"w-20 h-20 object-cover rounded",alt:"thumb"},null,8,ja)],10,Pa))),128))])])])):k("",!0),s("div",Ea,[s("button",{type:"submit",disabled:p(r).processing,class:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow"},Ma,8,Va)])],32)])])])])]),_:1}),x(ne,{show:R.value,onClose:he},{default:V(()=>[s("div",Oa,[Ta,Da,s("div",Ba,[x(we,{onClick:he},{default:V(()=>[U("Cancelar")]),_:1}),x(gt,{class:"ms-3",onClick:st,disabled:p(r).processing},{default:V(()=>[U(" Guardar cambios ")]),_:1},8,["disabled"])])])]),_:1},8,["show"]),x(Y,{show:Z.value,type:"success",title:"Producto actualizado","primary-text":"Entendido",onPrimary:e[23]||(e[23]=t=>Z.value=!1),onClose:e[24]||(e[24]=t=>Z.value=!1)},null,8,["show"]),x(Y,{show:M.value,type:"error",title:"No pudimos actualizar el producto",message:"RevisÃ¡ los siguientes puntos:",messages:q.value,"primary-text":"Entendido",onPrimary:e[25]||(e[25]=t=>M.value=!1),onClose:e[26]||(e[26]=t=>M.value=!1)},null,8,["show","messages"]),x(Y,{show:T.value,type:"warning",title:"Solo una Variante Puede Tener Precios",messages:Ne,"primary-text":"Entendido",onPrimary:e[27]||(e[27]=t=>T.value=!1),onClose:e[28]||(e[28]=t=>T.value=!1)},null,8,["show"]),x(Y,{show:K.value,type:"warning",title:"Solo una Variante Puede Tener ImÃ¡genes",messages:Le,"primary-text":"Entendido",onPrimary:e[29]||(e[29]=t=>K.value=!1),onClose:e[30]||(e[30]=t=>K.value=!1)},null,8,["show"]),x(ne,{show:N.value,onClose:H},{default:V(()=>[s("div",Ua,[za,qa,s("div",Na,[x(we,{onClick:H},{default:V(()=>[U("Cerrar")]),_:1})])])]),_:1},8,["show"]),x(ne,{show:F.value,onClose:e[32]||(e[32]=t=>F.value=!1)},{default:V(()=>[s("div",Fa,[La,s("div",Ha,[Ga,s("p",Ra,E(I.value),1)]),s("div",Wa,[x(pt,{onClick:e[31]||(e[31]=t=>F.value=!1)},{default:V(()=>[U("Aceptar")]),_:1})])])]),_:1},8,["show"])],64))}};export{eo as default};
