import{r as m,c as $,w as q,a as r,o as i,b as c,u as b,h as I,d,e as t,T as j,f as y,g as A,v as O,t as o,F as p,i as k,n as S,l as B,j as P,k as F}from"./app-BgZMFxY_.js";import{_ as D}from"./AuthenticatedLayout-Dy5PPPF_.js";import{_ as G}from"./Pagination-BH2sI9OJ.js";const R=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestión de Inventario",-1),U={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},K={class:"p-6 text-gray-900"},Q={class:"mb-4 flex items-center justify-between"},W={class:"flex items-center gap-3"},X=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})],-1),Y=[X],Z={key:0,class:"relative"},tt={class:"relative"},et=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1),st={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-lg z-10"},at=["onClick"],ot={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-gray-200"},nt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto / Variante"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock Actual"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock Mínimo"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),t("th",{class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Editar")])])],-1),rt={class:"bg-white divide-y divide-gray-200"},it={key:0},ct={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium text-gray-900"},dt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},ut={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-500"},mt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},pt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},xt=t("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),t("path",{d:"M15.75 4.5l3.75 3.75"})],-1),ht={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},_t={class:"font-medium text-gray-900"},ft={class:"text-gray-500"},yt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},gt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-500"},vt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},wt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},bt=t("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),t("path",{d:"M15.75 4.5l3.75 3.75"})],-1),kt={key:0},St=t("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," No hay productos para mostrar. ",-1),Ct=[St],Mt={__name:"Index",props:{products:Object,filters:Object},setup(x){const g=x,h=m(!!g.filters?.search),u=m(g.filters?.search||""),l=m(g.filters?.status||""),C=m(null),_=m(!1),v=[{value:"",label:"Todos"},{value:"out_of_stock",label:"Agotados"},{value:"low_stock",label:"¡Pocas unidades!"}],M=$(()=>(v.find(s=>s.value===l.value)||v[0]).label),L=async()=>{h.value=!h.value,h.value?(await F(),C.value?.focus()):(u.value="",w())},w=()=>{P.get(route("admin.inventory.index"),{search:u.value||void 0,status:l.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})};let N;q(u,()=>{clearTimeout(N),N=setTimeout(()=>w(),350)});const T=s=>{l.value=s,_.value=!1,w()},V=s=>l.value?s.filter(a=>{const e=Number(a.stock)||0,n=Number(a.alert)||0;return l.value==="out_of_stock"?e<=0:l.value==="low_stock"?n>0&&e>0&&e<=n:!0}):s,z=s=>{if(!l.value)return!0;const a=Number(s.quantity)||0,e=Number(s.alert)||0;return l.value==="out_of_stock"?a<=0:l.value==="low_stock"?e>0&&a>0&&a<=e:!0},f=s=>{const a=Number(s.stock)||0,e=Number(s.alert??s.minimum_stock)||0;return a<=0?{text:"Agotado",class:"bg-red-100 text-red-800"}:e>0&&a<=e?{text:"¡Pocas unidades!",class:"bg-yellow-100 text-yellow-800"}:{text:"En Stock",class:"bg-green-100 text-green-800"}},E=s=>Object.entries(s).map(([a,e])=>`${a}: ${e}`).join(", ");return(s,a)=>(i(),r(p,null,[c(b(I),{title:"Gestión de Inventario"}),c(D,null,{header:d(()=>[R]),default:d(()=>[t("div",U,[t("div",H,[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("button",{type:"button",onClick:L,class:"p-2 rounded hover:bg-gray-100 transition"},Y),c(j,{name:"fade-slide"},{default:d(()=>[h.value?(i(),r("div",Z,[A(t("input",{ref_key:"searchInputRef",ref:C,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),type:"text",placeholder:"Buscar producto...",class:"w-64 md:w-80 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,u.value]])])):y("",!0)]),_:1})]),t("div",tt,[t("button",{type:"button",onClick:a[1]||(a[1]=e=>_.value=!_.value),class:"inline-flex items-center gap-2 px-3 py-2 border rounded-md shadow-sm hover:bg-gray-50"},[t("span",null,o(M.value),1),et]),c(j,{name:"fade-slide"},{default:d(()=>[_.value?(i(),r("ul",st,[(i(),r(p,null,k(v,e=>t("li",{key:e.value},[t("button",{type:"button",onClick:n=>T(e.value),class:S(["w-full text-left px-3 py-2 hover:bg-gray-100",{"font-semibold text-indigo-600":e.value===l.value}])},o(e.label),11,at)])),64))])):y("",!0)]),_:1})])]),t("div",ot,[t("table",lt,[nt,t("tbody",rt,[(i(!0),r(p,null,k(x.products.data,e=>(i(),r(p,{key:e.id},[e.variants.length===0&&z(e)?(i(),r("tr",it,[t("td",ct,o(e.name),1),t("td",dt,o(e.quantity),1),t("td",ut,o(e.minimum_stock),1),t("td",mt,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",f({stock:e.quantity,alert:e.alert,minimum_stock:e.minimum_stock}).class])},o(f({stock:e.quantity,alert:e.alert,minimum_stock:e.minimum_stock}).text),3)]),t("td",pt,[c(b(B),{href:s.route("admin.products.edit",e.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:d(()=>[xt]),_:2},1032,["href"])])])):y("",!0),(i(!0),r(p,null,k(V(e.variants),n=>(i(),r("tr",{key:n.id},[t("td",ht,[t("div",_t,o(e.name),1),t("div",ft,o(E(n.options)),1)]),t("td",yt,o(n.stock),1),t("td",gt,o(n.minimum_stock),1),t("td",vt,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",f(n).class])},o(f(n).text),3)]),t("td",wt,[c(b(B),{href:s.route("admin.products.edit",e.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:d(()=>[bt]),_:2},1032,["href"])])]))),128))],64))),128)),x.products.data.length===0?(i(),r("tr",kt,Ct)):y("",!0)])])]),c(G,{class:"mt-6",links:x.products.links},null,8,["links"])])])])])]),_:1})],64))}};export{Mt as default};
