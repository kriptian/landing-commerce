import{r as a,o as T,n as X,a as $,c as W,b as p,d as v,e as n,u as x,h as j,f as l,g as e,x as k,j as S,p as B,q as N,k as w,s as H,i as q,F as A,l as G,m as K,t as D,y as O}from"./app-BJsUzWIY.js";import{_ as P}from"./AuthenticatedLayout-lSpluC5c.js";import{_ as U}from"./Modal-BI8Mm2wF.js";import{_ as Y}from"./SecondaryButton-tVfUgZb4.js";import{D as J}from"./DangerButton-dpwaAEKb.js";import{_ as Q}from"./AlertModal-C4EBbWE2.js";const Z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Categorías",-1),ee={class:"py-12"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={class:"p-6 text-gray-900"},ae={class:"flex justify-between items-center mb-4"},ne=e("p",null,"Aquí podés crear, editar y eliminar las categorías de tus productos.",-1),le=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 4a2 2 0 0 1 2-2h7l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4zm9-1.5V7h4.5L13 2.5z"}),e("path",{d:"M8 13h8v2H8zM8 9h5v2H8z"})],-1),ie=e("span",null,"Crear",-1),re={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},ce={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},de={class:"min-w-[600px] w-full divide-y divide-gray-200 table-auto"},ue={class:"sticky top-0 z-10 bg-gray-50"},me=e("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),he=[me],pe=e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Nombre",-1),ve=e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Acciones",-1),_e={class:"bg-white divide-y divide-gray-200"},ge={key:0},fe=e("td",{colspan:"3",class:"px-3 py-3 sm:px-6 sm:py-4 text-center text-gray-500"},"No hay categorías creadas.",-1),xe=[fe],we=["title"],ye={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},be={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium"},Ce={class:"flex items-center gap-2"},Ee=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),Le=["onClick"],ze=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),Me=[ze],ke={class:"p-6"},Se=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que querés eliminar esta categoría? ",-1),Be=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. Se borrará la categoría y todas sus subcategorías. ",-1),Ne={class:"mt-6 flex justify-end"},R="cat_firstcol_w_px",Ae=50,De=200,We={__name:"Index",props:{categories:Array},setup(y){const r=a(!1),_=a(""),g=a(!1),f=a(null),V=t=>{f.value=t,g.value=!0},d=()=>{g.value=!1,f.value=null},F=()=>{O.delete(route("admin.categories.destroy",f.value),{preserveScroll:!0,onSuccess:()=>{d(),_.value="¡Categoría eliminada con éxito!",r.value=!0},onError:t=>{d();const o=t&&(t.delete||t.message)||"No se pudo eliminar: existen productos asociados.";_.value=o,r.value=!0}})},u=a(null),b=a(!1),C=a(!1),c=()=>{const t=u.value;if(!t)return;const o=t.scrollWidth-t.clientWidth,s=t.scrollLeft||0;b.value=s>0,C.value=s<o-1};T(()=>{X(()=>c()),u.value?.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c)}),$(()=>{u.value?.removeEventListener("scroll",c),window.removeEventListener("resize",c)});const i=a(Number(localStorage.getItem(R))||100),E=W(()=>({width:i.value+"px",minWidth:i.value+"px",maxWidth:i.value+"px"}));let L=0,z=0;const m=t=>{const o=t.touches?t.touches[0].clientX:t.clientX,s=Math.max(Ae,Math.min(De,z+(o-L)));i.value=s},h=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",h);try{localStorage.setItem(R,String(i.value))}catch{}},M=t=>{L=t.touches?t.touches[0].clientX:t.clientX,z=i.value,document.addEventListener("mousemove",m,{passive:!1}),document.addEventListener("mouseup",h),document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchend",h)};return(t,o)=>(v(),p(A,null,[n(x(j),{title:"Gestionar Categorías"}),n(P,null,{header:l(()=>[Z]),default:l(()=>[e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[e("div",ae,[ne,n(x(k),{href:t.route("admin.categories.create"),class:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow"},{default:l(()=>[le,ie]),_:1},8,["href"])]),e("div",{ref_key:"scrollBoxRef",ref:u,class:"relative overflow-x-auto"},[S(e("div",re,null,512),[[B,b.value]]),S(e("div",ce,null,512),[[B,C.value]]),e("table",de,[e("thead",ue,[e("tr",null,[e("th",{class:"sticky left-0 z-20 bg-gray-50 px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:N(E.value)},[w(" ID "),e("div",{onMousedown:M,onTouchstart:H(M,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},he,32)],4),pe,ve])]),e("tbody",_e,[y.categories.length===0?(v(),p("tr",ge,xe)):q("",!0),(v(!0),p(A,null,G(y.categories,(s,I)=>(v(),p("tr",{key:s.id,class:"odd:bg-white even:bg-gray-100"},[e("td",{class:K(["sticky left-0 z-10 px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap border-r truncate",I%2===1?"bg-gray-100":"bg-white"]),style:N(E.value),title:String(s.id)},D(s.id),15,we),e("td",ye,D(s.name),1),e("td",be,[e("div",Ce,[n(x(k),{href:t.route("admin.categories.edit",s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:l(()=>[Ee]),_:2},1032,["href"]),e("button",{onClick:Re=>V(s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},Me,8,Le)])])]))),128))])])],512)])])])])]),_:1}),n(U,{show:g.value,onClose:d},{default:l(()=>[e("div",ke,[Se,Be,e("div",Ne,[n(Y,{onClick:d},{default:l(()=>[w(" Cancelar ")]),_:1}),n(J,{class:"ms-3",onClick:F},{default:l(()=>[w(" Sí, Eliminar Categoría ")]),_:1})])])]),_:1},8,["show"]),n(Q,{show:r.value,type:"error",title:"Categorías",message:_.value,"primary-text":"Entendido",onPrimary:o[0]||(o[0]=s=>r.value=!1),onClose:o[1]||(o[1]=s=>r.value=!1)},null,8,["show","message"])],64))}};export{We as default};
