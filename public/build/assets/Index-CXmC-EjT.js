import{_ as T}from"./AuthenticatedLayout-Dy5PPPF_.js";import{L as R,r as d,a,o,b as l,u as c,h as F,d as t,e,f as u,n as M,F as k,i as N,t as f,l as _,H as U,m as p,j}from"./app-BgZMFxY_.js";import{u as G}from"./index-DcrKHpM6.js";import{_ as $}from"./Modal-CjGJwa8b.js";import{_ as B}from"./SecondaryButton-JMLo2jRz.js";import{D}from"./DangerButton-BXwu7WcV.js";import{_ as I}from"./AlertModal-D2syu_6g.js";const P={class:"flex justify-between items-center"},J=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Usuarios y Roles",-1),K={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 text-gray-900"},X={class:"mb-4 border-b border-gray-200"},Y={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Z={key:0,class:"overflow-x-auto"},ee={class:"min-w-[720px] w-full divide-y divide-gray-200 table-auto"},se=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1),te={class:"bg-white divide-y divide-gray-200"},oe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},le={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ae={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},re={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},ie={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},ne={class:"flex justify-end items-center gap-2"},de=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),ce=["onClick"],ue=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),pe=[ue],me={key:1,class:"overflow-x-auto"},he={class:"min-w-[520px] w-full divide-y divide-gray-200 table-auto"},xe=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre del Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1),fe={class:"bg-white divide-y divide-gray-200"},_e={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ve={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},ye={class:"flex justify-end items-center gap-2"},ge=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),we=["onClick"],be=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),Ce=[be],ke={class:"p-6"},Ee=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este usuario? ",-1),Ae=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. ",-1),Re={class:"mt-6 flex justify-end"},Me={class:"p-6"},Ne=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este rol? ",-1),Ue=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. No podrás eliminar un rol si hay usuarios que lo tengan asignado. ",-1),je={class:"mt-6 flex justify-end"},qe={__name:"Index",props:{users:Array,roles:Array},setup(E){const z=R().props.auth.user,v=R(),r=d(v?.props?.ziggy?.query?.tab==="roles"?"roles":"users"),m=d(!!v.props.flash?.success),y=d(v.props.flash?.success||""),g=d(!1),w=d(null),L=i=>{w.value=i,g.value=!0},h=()=>{g.value=!1,w.value=null},S=()=>{j.delete(route("admin.users.destroy",w.value),{preserveScroll:!0,onSuccess:()=>{h(),y.value="¡Usuario eliminado con éxito!",m.value=!0},onError:()=>{h(),y.value="Hubo un error al eliminar el usuario.",m.value=!0}})},b=d(!1),C=d(null),A=G(),V=i=>{C.value=i,b.value=!0},x=()=>{b.value=!1,C.value=null},q=()=>{j.delete(route("admin.roles.destroy",C.value),{preserveScroll:!0,onSuccess:()=>{x(),A.success("¡Rol eliminado con éxito!")},onError:()=>{x(),A.error("No se puede eliminar un rol que está en uso.")}})};return(i,n)=>(o(),a(k,null,[l(c(F),{title:"Gestionar Usuarios y Roles"}),l(T,null,{header:t(()=>[e("div",P,[J,e("div",null,[r.value==="roles"?(o(),U(c(_),{key:0,href:i.route("admin.roles.create"),class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700 ml-4"},{default:t(()=>[p(" Crear Nuevo Rol ")]),_:1},8,["href"])):u("",!0),r.value==="users"?(o(),U(c(_),{key:1,href:i.route("admin.users.create"),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"},{default:t(()=>[p(" Crear Nuevo Usuario ")]),_:1},8,["href"])):u("",!0)])])]),default:t(()=>[e("div",K,[e("div",O,[e("div",Q,[e("div",W,[e("div",X,[e("nav",Y,[e("button",{onClick:n[0]||(n[0]=s=>r.value="users"),class:M([r.value==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Usuarios ",2),e("button",{onClick:n[1]||(n[1]=s=>r.value="roles"),class:M([r.value==="roles"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Roles ",2)])]),r.value==="users"?(o(),a("div",Z,[e("table",ee,[se,e("tbody",te,[(o(!0),a(k,null,N(E.users,s=>(o(),a("tr",{key:s.id},[e("td",oe,f(s.name),1),e("td",le,f(s.email),1),e("td",ae,[s.roles.length>0?(o(),a("span",re,f(s.roles[0].name),1)):u("",!0)]),e("td",ie,[e("div",ne,[l(c(_),{href:i.route("admin.users.edit",s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:t(()=>[de]),_:2},1032,["href"]),s.id!==c(z).id?(o(),a("button",{key:0,onClick:H=>L(s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},pe,8,ce)):u("",!0)])])]))),128))])])])):u("",!0),r.value==="roles"?(o(),a("div",me,[e("table",he,[xe,e("tbody",fe,[(o(!0),a(k,null,N(E.roles,s=>(o(),a("tr",{key:s.id},[e("td",_e,f(s.name),1),e("td",ve,[e("div",ye,[l(c(_),{href:i.route("admin.roles.edit",s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:t(()=>[ge]),_:2},1032,["href"]),e("button",{onClick:H=>V(s.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},Ce,8,we)])])]))),128))])])])):u("",!0)])])])])]),_:1}),l($,{show:g.value,onClose:h},{default:t(()=>[e("div",ke,[Ee,Ae,e("div",Re,[l(B,{onClick:h},{default:t(()=>[p(" Cancelar ")]),_:1}),l(D,{class:"ms-3",onClick:S},{default:t(()=>[p(" Sí, Eliminar Usuario ")]),_:1})])])]),_:1},8,["show"]),l($,{show:b.value,onClose:x},{default:t(()=>[e("div",Me,[Ne,Ue,e("div",je,[l(B,{onClick:x},{default:t(()=>[p(" Cancelar ")]),_:1}),l(D,{class:"ms-3",onClick:q},{default:t(()=>[p(" Sí, Eliminar Rol ")]),_:1})])])]),_:1},8,["show"]),l(I,{show:m.value,type:"info",title:"Notificación",message:y.value,"primary-text":"Entendido",onPrimary:n[2]||(n[2]=s=>m.value=!1),onClose:n[3]||(n[3]=s=>m.value=!1)},null,8,["show","message"])],64))}};export{qe as default};
