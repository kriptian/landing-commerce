import{p as v,r as h,q as F,a as n,o as l,b as i,u as s,h as $,d,e,f as p,s as _,g as w,v as k,F as C,i as j,t as y,m as x,j as B}from"./app-DdN1dnwv.js";import{_ as A}from"./AuthenticatedLayout-0XqtQlBh.js";import{_ as L}from"./Modal-uE4VJq8H.js";import{_ as M}from"./SecondaryButton-B5xcrSpi.js";import{D as T}from"./DangerButton-BMEUFFUh.js";import"./DropdownLink-DQGx_2Xf.js";const U={class:"font-semibold text-xl text-gray-800 leading-tight"},q={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},O={class:"p-6 text-gray-900"},Q=["disabled"],H={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},I={class:"p-6 text-gray-900"},J={class:"mt-4 space-y-2"},K={key:0,class:"text-sm text-gray-500"},P=["onClick"],R={class:"mt-2 flex items-center gap-4"},W=["disabled"],X={key:0,class:"text-sm text-red-600 mt-2"},Y={class:"p-6"},Z={class:"mt-6 flex justify-end"},le={__name:"Edit",props:{category:Object},setup(a){const c=a,m=v({name:c.category.name}),r=v({name:""}),S=()=>{m.put(route("admin.categories.update",c.category.id))},N=()=>{r.post(route("admin.categories.storeSubcategory",c.category.id),{onSuccess:()=>r.reset(),preserveScroll:!0})},g=h(!1),u=h(null),E=f=>{u.value=f,g.value=!0},b=()=>{g.value=!1,u.value=null},D=()=>{u.value&&B.delete(route("admin.categories.destroy",u.value),{preserveScroll:!0,onFinish:()=>b()})};return(f,t)=>{const V=F("Link");return l(),n(C,null,[i(s($),{title:`Editar: ${a.category.name}`},null,8,["title"]),i(A,null,{header:d(()=>[e("h2",U," Editando Categoría: "+y(a.category.name),1)]),default:d(()=>[e("div",q,[e("div",z,[e("div",G,[e("div",O,[t[2]||(t[2]=e("h3",{class:"text-lg font-medium"},"Editar Nombre",-1)),e("form",{onSubmit:_(S,["prevent"]),class:"mt-4 flex items-center gap-4"},[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s(m).name=o),type:"text",class:"block w-full rounded-md shadow-sm border-gray-300"},null,512),[[k,s(m).name]]),e("button",{type:"submit",disabled:s(m).processing,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"}," Actualizar Nombre ",8,Q)],32)])]),a.category.parent_id?p("",!0):(l(),n("div",H,[e("div",I,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium"},"Gestionar Subcategorías",-1)),e("div",J,[!a.category.children||a.category.children.length===0?(l(),n("p",K," Esta categoría aún no tiene subcategorías. ")):p("",!0),(l(!0),n(C,null,j(a.category.children,o=>(l(),n("div",{key:o.id,class:"flex justify-between items-center p-2 border rounded-md"},[e("span",null,y(o.name),1),e("div",null,[i(V,{href:f.route("admin.categories.edit",o.id),class:"text-indigo-600 hover:text-indigo-900 mr-4"},{default:d(()=>[...t[3]||(t[3]=[x("Editar",-1)])]),_:1},8,["href"]),e("button",{onClick:ee=>E(o.id),class:"text-red-600 hover:text-red-900"},"Eliminar",8,P)])]))),128))]),e("form",{onSubmit:_(N,["prevent"]),class:"mt-6 border-t pt-4"},[t[4]||(t[4]=e("label",{class:"block font-medium text-sm text-gray-700"},"Añadir Nueva Subcategoría",-1)),e("div",R,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(r).name=o),type:"text",class:"block w-full rounded-md shadow-sm border-gray-300",placeholder:"Nombre de la nueva subcategoría"},null,512),[[k,s(r).name]]),e("button",{type:"submit",disabled:s(r).processing,class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700"}," Añadir ",8,W)]),s(r).errors.name?(l(),n("p",X,y(s(r).errors.name),1)):p("",!0)],32)])]))])])]),_:1}),i(L,{show:g.value,onClose:b},{default:d(()=>[e("div",Y,[t[8]||(t[8]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Querés eliminar esta subcategoría? ",-1)),t[9]||(t[9]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible y removerá la subcategoría seleccionada. ",-1)),e("div",Z,[i(M,{onClick:b},{default:d(()=>[...t[6]||(t[6]=[x("Cancelar",-1)])]),_:1}),i(T,{class:"ms-3",onClick:D},{default:d(()=>[...t[7]||(t[7]=[x("Sí, eliminar",-1)])]),_:1})])])]),_:1},8,["show"])],64)}}};export{le as default};
