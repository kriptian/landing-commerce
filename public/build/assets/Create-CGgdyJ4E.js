import{p as N,r as M,a as l,o as a,b as h,u as o,h as B,d as y,e,s as c,g as b,f as g,v,t as m,F as x,i as w,m as _}from"./app-BRVkAi0d.js";import{_ as U}from"./AuthenticatedLayout-BpCRplDY.js";import{_ as j}from"./AlertModal-Kba0pXFQ.js";import"./Modal-BqEUkn8w.js";const E={class:"py-12"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},D={class:"p-6 text-gray-900"},q={class:"mb-6 border-b pb-6"},G={key:0,class:"text-sm text-red-600 mt-2"},L={class:"mt-6"},P={class:"flex items-center gap-4 p-3"},z=["onUpdate:modelValue","placeholder"],H=["onClick"],I={class:"bg-gray-50 px-3 pb-3"},J=["onClick"],K={class:"w-5 h-5 inline-flex items-center justify-center rounded-full border border-gray-300 text-gray-700"},O={key:0,class:"mt-3 space-y-2"},Q=["onUpdate:modelValue","placeholder"],R=["onClick"],W=["onClick"],X={key:0,class:"text-sm text-red-600 mt-2"},Y={class:"flex items-center justify-end mt-8 border-t pt-6"},Z=["disabled"],ne={__name:"Create",setup(ee){const s=N({name:"",subcategories:[]}),C=()=>{s.subcategories.push({name:"",children:[],_showChildren:!1})},k=n=>{s.subcategories.splice(n,1)},S=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t._showChildren=!t._showChildren)},$=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t.children.push({name:""}))},V=(n,t)=>{const r=s.subcategories[n];!r||!Array.isArray(r.children)||r.children.splice(t,1)},u=M(!1),A=()=>{s.post(route("admin.categories.store"),{onSuccess:()=>{u.value=!0}})};return(n,t)=>(a(),l(x,null,[h(o(B),{title:"Crear Categoría y Subcategorías"}),h(U,null,{header:y(()=>[...t[3]||(t[3]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Crear Nueva Categoría",-1)])]),default:y(()=>[e("div",E,[e("div",F,[e("div",T,[e("div",D,[e("form",{onSubmit:c(A,["prevent"])},[e("div",q,[t[4]||(t[4]=e("label",{for:"name",class:"block font-medium text-lg text-gray-800"},"Nombre de la Categoría",-1)),b(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=r=>o(s).name=r),type:"text",class:"block mt-2 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[v,o(s).name]]),o(s).errors.name?(a(),l("p",G,m(o(s).errors.name),1)):g("",!0)]),e("div",L,[t[7]||(t[7]=e("h3",{class:"font-medium text-lg text-gray-800"},"Estructura de Subcategorías",-1)),t[8]||(t[8]=e("p",{class:"text-sm text-gray-500"},"Definí subcategorías y un subnivel adicional (máximo 3 niveles en total).",-1)),(a(!0),l(x,null,w(o(s).subcategories,(r,d)=>(a(),l("div",{key:d,class:"mt-4 border rounded-lg overflow-hidden"},[e("div",P,[b(e("input",{"onUpdate:modelValue":i=>r.name=i,type:"text",placeholder:`Nombre de la Subcategoría ${d+1}`,class:"block w-full rounded-md shadow-sm border-gray-300"},null,8,z),[[v,r.name]]),e("button",{onClick:c(i=>k(d),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"}," - ",8,H)]),e("div",I,[e("button",{type:"button",class:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",onClick:c(i=>S(d),["prevent"])},[e("span",K,m(r._showChildren?"v":">"),1),e("span",null,m(r._showChildren?"Colapsar subniveles":"Expandir subniveles"),1)],8,J),r._showChildren?(a(),l("div",O,[(a(!0),l(x,null,w(r.children||[],(i,p)=>(a(),l("div",{key:p,class:"flex items-center gap-3"},[b(e("input",{"onUpdate:modelValue":f=>i.name=f,type:"text",class:"block w-full rounded-md shadow-sm border-gray-300",placeholder:`Subnivel ${p+1}`},null,8,Q),[[v,i.name]]),e("button",{onClick:c(f=>V(d,p),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"},"- ",8,R)]))),128)),e("button",{type:"button",class:"mt-1 inline-flex items-center gap-2 border border-green-500 text-green-600 py-1 px-3 rounded hover:bg-green-50",onClick:c(i=>$(d),["prevent"])},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),_(" Agregar subnivel ",-1)])],8,W)])):g("",!0)])]))),128)),o(s).errors.subcategories?(a(),l("p",X,m(o(s).errors.subcategories),1)):g("",!0),e("button",{onClick:c(C,["prevent"]),type:"button",class:"mt-4 inline-flex items-center gap-2 border border-green-500 text-green-600 py-2 px-4 rounded hover:bg-green-50"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),_(" Añadir Subcategoría ",-1)])])]),e("div",Y,[e("button",{type:"submit",disabled:o(s).processing,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"}," Guardar Todo ",8,Z)])],32)])])])])]),_:1}),h(j,{show:u.value,type:"success",title:"Categorías",message:"¡Categoría creada con éxito!","primary-text":"Entendido",onPrimary:t[1]||(t[1]=r=>{u.value=!1,o(s).reset()}),onClose:t[2]||(t[2]=r=>{u.value=!1,o(s).reset()})},null,8,["show"])],64))}};export{ne as default};
