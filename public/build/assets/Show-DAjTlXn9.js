import{_ as F}from"./AuthenticatedLayout-CMzDSey0.js";import{H as D,c as V,r as C,B as I,a as n,o,b as v,y as $,f as t,d as w,h as N,t as s,i,F as u,n as x,e as p,l as S,m as _}from"./app-BbGXU1BN.js";import{d as z,s as O}from"./pdfUtils-KPvN2_XH.js";import"./AlertModal-DRMsBwYl.js";import"./Modal-CeUYkVjj.js";const B={key:0,class:"min-h-screen bg-gray-50"},L={class:"bg-white border-b border-gray-200 px-6 py-4 no-print"},T={class:"flex items-center justify-between max-w-4xl mx-auto"},E={class:"font-semibold text-xl text-gray-800"},M={class:"flex gap-2"},q=["disabled"],A={key:0},U={key:1},G=t("span",{class:"hidden sm:inline"},"Descargar",-1),R=["disabled"],H={key:0},J={key:1},K=t("span",{class:"hidden sm:inline"},"Compartir",-1),Q=t("span",null,"ðŸ–¨ï¸",-1),W=t("span",{class:"hidden sm:inline"},"Imprimir",-1),X=[Q,W],Y=t("span",null,"â¬…ï¸",-1),Z=t("span",{class:"hidden sm:inline"},"Volver",-1),tt=[Y,Z],et={class:"py-12"},st={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},ot={class:"print-store-header"},nt={key:0,class:"text-center text-2xl font-bold mb-6 pb-4 border-b-2 border-black"},at={key:0,class:"watermark-container"},it={class:"watermark-text"},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},ct={class:"p-6"},dt={class:"mb-6"},rt=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),_t={class:"grid grid-cols-2 gap-4"},ut=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),ht={class:"font-medium"},mt=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),xt={class:"font-medium"},pt=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),yt={class:"font-medium"},gt=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),bt={class:"font-medium capitalize"},ft={key:0,class:"mt-4"},vt=t("p",{class:"text-sm text-gray-500"},"Notas",-1),wt={class:"font-medium"},kt={class:"mb-6"},jt=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Pt={class:"overflow-x-auto"},Ft={class:"min-w-full divide-y divide-gray-200"},Dt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),Vt={class:"bg-white divide-y divide-gray-200"},Ct={class:"px-4 py-3"},It={class:"font-medium"},$t={key:0,class:"text-sm text-gray-500"},Nt={class:"px-4 py-3"},St={class:"px-4 py-3"},zt={key:0},Ot={class:"text-sm text-gray-400 line-through"},Bt={class:"font-medium"},Lt={key:1},Tt={class:"px-4 py-3"},Et={key:0,class:"text-sm text-green-600 font-medium"},Mt={key:1,class:"text-sm text-gray-400"},qt={class:"px-4 py-3 font-medium"},At={class:"border-t pt-4"},Ut={class:"flex justify-end"},Gt={class:"w-64 space-y-2"},Rt={class:"flex justify-between"},Ht=t("span",null,"Subtotal:",-1),Jt={key:0,class:"flex justify-between text-red-600"},Kt=t("span",null,"Descuento manual:",-1),Qt={class:"flex justify-between text-lg font-bold pt-2 border-t"},Wt=t("span",null,"Total:",-1),Xt={class:"flex items-center justify-between"},Yt={class:"font-semibold text-xl text-gray-800 leading-tight"},Zt={class:"flex gap-2"},te=["disabled"],ee={key:0},se={key:1},oe=t("span",{class:"hidden sm:inline"},"Descargar",-1),ne=["disabled"],ae={key:0},ie={key:1},le=t("span",{class:"hidden sm:inline"},"Compartir",-1),ce=t("span",null,"ðŸ–¨ï¸",-1),de=t("span",{class:"hidden sm:inline"},"Imprimir",-1),re=[ce,de],_e=t("span",null,"â¬…ï¸",-1),ue=t("span",{class:"hidden sm:inline"},"Volver",-1),he={class:"py-12"},me={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},xe={class:"print-store-header"},pe={class:"flex items-center justify-center gap-4 mb-6 pb-4 border-b-2 border-black"},ye=["src"],ge={key:1,class:"text-3xl font-bold"},be={key:0,class:"watermark-container"},fe={class:"watermark-text"},ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},we={class:"p-6"},ke={class:"mb-6"},je=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),Pe={class:"grid grid-cols-2 gap-4"},Fe=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),De={class:"font-medium"},Ve=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),Ce={class:"font-medium"},Ie=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),$e={class:"font-medium"},Ne=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),Se={class:"font-medium capitalize"},ze={key:0,class:"mt-4"},Oe=t("p",{class:"text-sm text-gray-500"},"Notas",-1),Be={class:"font-medium"},Le={class:"mb-6"},Te=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Ee={class:"overflow-x-auto"},Me={class:"min-w-full divide-y divide-gray-200"},qe=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),Ae={class:"bg-white divide-y divide-gray-200"},Ue={class:"px-4 py-3"},Ge={class:"font-medium"},Re={key:0,class:"text-sm text-gray-500"},He={class:"px-4 py-3"},Je={class:"px-4 py-3"},Ke={key:0},Qe={class:"text-sm text-gray-400 line-through"},We={class:"font-medium"},Xe={key:1},Ye={class:"px-4 py-3"},Ze={key:0,class:"text-sm text-green-600 font-medium"},ts={key:1,class:"text-sm text-gray-400"},es={class:"px-4 py-3 font-medium"},ss={class:"border-t pt-4"},os={class:"flex justify-end"},ns={class:"w-64 space-y-2"},as={class:"flex justify-between"},is=t("span",null,"Subtotal:",-1),ls={key:0,class:"flex justify-between text-red-600"},cs=t("span",null,"Descuento manual:",-1),ds={class:"flex justify-between text-lg font-bold pt-2 border-t"},rs=t("span",null,"Total:",-1),_s={class:"fixed top-0 left-0 w-[210mm] bg-white z-[-100] opacity-0 pointer-events-none"},us={id:"invoice-content-show",class:"p-8 bg-white text-black relative overflow-hidden"},hs={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-0 opacity-[0.12]"},ms={class:"text-[80px] font-[900] text-black uppercase whitespace-nowrap -rotate-45 transform select-none"},xs={key:1,class:"relative z-10"},ps={class:"flex items-center justify-center gap-4 mb-8 pb-4 border-b-2 border-black"},ys=["src"],gs={key:1,class:"text-3xl font-bold"},bs={class:"mb-8"},fs=t("h2",{class:"text-xl font-bold mb-4"},"InformaciÃ³n de Venta",-1),vs={class:"grid grid-cols-2 gap-4 text-sm"},ws=t("strong",null,"NÃºmero:",-1),ks=t("strong",null,"Fecha:",-1),js=t("strong",null,"Vendedor:",-1),Ps=t("strong",null,"MÃ©todo de Pago:",-1),Fs={class:"capitalize"},Ds={class:"w-full mb-8 text-sm"},Vs=t("thead",{class:"border-b-2 border-black"},[t("tr",null,[t("th",{class:"text-left py-2"},"Producto"),t("th",{class:"text-center py-2"},"Cant"),t("th",{class:"text-right py-2"},"Precio"),t("th",{class:"text-right py-2"},"Total")])],-1),Cs={class:"py-2"},Is={key:0,class:"text-xs text-gray-500"},$s={class:"text-center py-2"},Ns={class:"text-right py-2"},Ss={class:"text-right py-2"},zs={class:"flex justify-end"},Os={class:"w-1/2 space-y-2 text-right"},Bs={class:"flex justify-between"},Ls=t("span",null,"Subtotal:",-1),Ts={key:0,class:"flex justify-between text-red-600"},Es=t("span",null,"Descuento:",-1),Ms={class:"flex justify-between text-xl font-bold border-t border-black pt-2"},qs=t("span",null,"Total:",-1),As={key:0,class:"mt-8 pt-4 border-t border-gray-200"},Us=t("p",{class:"text-sm font-bold"},"Notas:",-1),Gs={class:"text-sm"},Rs=t("div",{class:"mt-12 text-center text-xs text-gray-500"},[t("p",null,"Gracias por su compra")],-1),Xs={__name:"Show",props:{sale:Object,store:Object},setup(e){const c=l=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),r=e,k=D(),j=V(()=>(k.props.auth?.roles||[]).includes("physical-sales")),d=C(!1),y=async()=>{if(r.sale){d.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await z(l,`factura-${r.sale.sale_number}.pdf`)}catch(l){console.error(l),alert("Error al generar el PDF")}finally{d.value=!1}}},g=async()=>{if(r.sale){d.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await O(l,`factura-${r.sale.sale_number}.pdf`,`Factura #${r.sale.sale_number}`)}catch(l){console.error(l)}finally{d.value=!1}}},P=()=>new URLSearchParams(window.location.search).get("print")==="true",b=()=>{window.print()};return I(()=>{P()&&setTimeout(()=>{window.print()},500)}),(l,f)=>(o(),n(u,null,[v(w(N),{title:"Detalle de Venta"}),j.value?(o(),n("div",B,[t("div",L,[t("div",T,[t("h2",E," Venta #"+s(e.sale.sale_number),1),t("div",M,[t("button",{onClick:y,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1",disabled:d.value,title:"Descargar PDF"},[d.value?(o(),n("span",A,"â³")):(o(),n("span",U,"â¬‡ï¸")),G],8,q),t("button",{onClick:g,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1",disabled:d.value,title:"Compartir Factura"},[d.value?(o(),n("span",H,"â³")):(o(),n("span",J,"ðŸ”—")),K],8,R),t("button",{onClick:b,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1",title:"Imprimir"},X),t("button",{onClick:f[0]||(f[0]=a=>l.$inertia.visit(l.route("admin.reports.index",{type:"physical"}))),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center gap-1",title:"Volver"},tt)])])]),t("div",et,[t("div",st,[t("div",ot,[e.store?.name?(o(),n("h1",nt,s(e.store.name),1)):i("",!0)]),e.store?.name?(o(),n("div",at,[t("div",it,s(e.store.name),1)])):i("",!0),t("div",lt,[t("div",ct,[t("div",dt,[rt,t("div",_t,[t("div",null,[ut,t("p",ht,"#"+s(e.sale.sale_number),1)]),t("div",null,[mt,t("p",xt,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[pt,t("p",yt,s(e.sale.user?.name||"Administrador"),1)]),t("div",null,[gt,t("p",bt,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),n("div",ft,[vt,t("p",wt,s(e.sale.notes),1)])):i("",!0)]),t("div",kt,[jt,t("div",Pt,[t("table",Ft,[Dt,t("tbody",Vt,[(o(!0),n(u,null,x(e.sale.items,a=>(o(),n("tr",{key:a.id},[t("td",Ct,[t("p",It,s(a.product_name),1),a.variant_options?(o(),n("p",$t,s(Object.entries(a.variant_options).map(([h,m])=>`${h}: ${m}`).join(", ")),1)):i("",!0)]),t("td",Nt,s(a.quantity),1),t("td",St,[a.original_price&&a.original_price>a.unit_price?(o(),n("div",zt,[t("p",Ot,s(c(a.original_price)),1),t("p",Bt,s(c(a.unit_price)),1)])):(o(),n("p",Lt,s(c(a.unit_price)),1))]),t("td",Tt,[a.discount_percent>0?(o(),n("span",Et," -"+s(a.discount_percent)+"% ",1)):(o(),n("span",Mt,"-"))]),t("td",qt,s(c(a.subtotal)),1)]))),128))])])])]),t("div",At,[t("div",Ut,[t("div",Gt,[t("div",Rt,[Ht,t("span",null,"$"+s(parseFloat(e.sale.subtotal).toFixed(2)),1)]),e.sale.discount>0?(o(),n("div",Jt,[Kt,t("span",null,"-$"+s(parseFloat(e.sale.discount).toFixed(2)),1)])):i("",!0),t("div",Qt,[Wt,t("span",null,"$"+s(parseFloat(e.sale.total).toFixed(2)),1)])])])])])])])])])):(o(),$(F,{key:1},{header:p(()=>[t("div",Xt,[t("h2",Yt," Venta #"+s(e.sale.sale_number),1),t("div",Zt,[t("button",{onClick:y,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1 no-print",disabled:d.value,title:"Descargar PDF"},[d.value?(o(),n("span",ee,"â³")):(o(),n("span",se,"â¬‡ï¸")),oe],8,te),t("button",{onClick:g,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1 no-print",disabled:d.value,title:"Compartir Factura"},[d.value?(o(),n("span",ae,"â³")):(o(),n("span",ie,"ðŸ”—")),le],8,ne),t("button",{onClick:b,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 no-print flex items-center gap-1",title:"Imprimir"},re),v(w(S),{href:l.route("admin.reports.index",{type:"physical"}),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 no-print flex items-center gap-1",title:"Volver"},{default:p(()=>[_e,ue]),_:1},8,["href"])])])]),default:p(()=>[t("div",he,[t("div",me,[t("div",xe,[t("div",pe,[e.store?.logo_url?(o(),n("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-20 w-auto object-contain"},null,8,ye)):i("",!0),e.store?.name?(o(),n("h1",ge,s(e.store.name),1)):i("",!0)])]),e.store?.name?(o(),n("div",be,[t("div",fe,s(e.store.name),1)])):i("",!0),t("div",ve,[t("div",we,[t("div",ke,[je,t("div",Pe,[t("div",null,[Fe,t("p",De,"#"+s(e.sale.sale_number),1)]),t("div",null,[Ve,t("p",Ce,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[Ie,t("p",$e,s(e.sale.user?.name||"N/A"),1)]),t("div",null,[Ne,t("p",Se,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),n("div",ze,[Oe,t("p",Be,s(e.sale.notes),1)])):i("",!0)]),t("div",Le,[Te,t("div",Ee,[t("table",Me,[qe,t("tbody",Ae,[(o(!0),n(u,null,x(e.sale.items,a=>(o(),n("tr",{key:a.id},[t("td",Ue,[t("p",Ge,s(a.product_name),1),a.variant_options?(o(),n("p",Re,s(Object.entries(a.variant_options).map(([h,m])=>`${h}: ${m}`).join(", ")),1)):i("",!0)]),t("td",He,s(a.quantity),1),t("td",Je,[a.original_price&&a.original_price>a.unit_price?(o(),n("div",Ke,[t("p",Qe,s(c(a.original_price)),1),t("p",We,s(c(a.unit_price)),1)])):(o(),n("p",Xe,s(c(a.unit_price)),1))]),t("td",Ye,[a.discount_percent>0?(o(),n("span",Ze," -"+s(a.discount_percent)+"% ",1)):(o(),n("span",ts,"-"))]),t("td",es,s(c(a.subtotal)),1)]))),128))])])])]),t("div",ss,[t("div",os,[t("div",ns,[t("div",as,[is,t("span",null,s(c(e.sale.subtotal)),1)]),e.sale.discount>0?(o(),n("div",ls,[cs,t("span",null,"-"+s(c(e.sale.discount)),1)])):i("",!0),t("div",ds,[rs,t("span",null,s(c(e.sale.total)),1)])])])])])])])])]),_:1})),t("div",_s,[t("div",us,[e.store?.name?(o(),n("div",hs,[t("div",ms,s(e.store.name),1)])):i("",!0),e.sale?(o(),n("div",xs,[t("div",ps,[e.store?.logo_url?(o(),n("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-20 w-auto object-contain",crossorigin:"anonymous"},null,8,ys)):i("",!0),e.store?.name?(o(),n("h1",gs,s(e.store.name),1)):i("",!0)]),t("div",bs,[fs,t("div",vs,[t("div",null,[ws,_(" #"+s(e.sale.sale_number),1)]),t("div",null,[ks,_(" "+s(new Date(e.sale.created_at).toLocaleString("es-CO")),1)]),t("div",null,[js,_(" "+s(e.sale.user?.name||"Administrador"),1)]),t("div",null,[Ps,_(),t("span",Fs,s(e.sale.payment_method),1)])])]),t("table",Ds,[Vs,t("tbody",null,[(o(!0),n(u,null,x(e.sale.items,a=>(o(),n("tr",{key:a.id,class:"border-b border-gray-200"},[t("td",Cs,[_(s(a.product_name)+" ",1),a.variant_options?(o(),n("div",Is,s(Object.values(a.variant_options).join(" / ")),1)):i("",!0)]),t("td",$s,s(a.quantity),1),t("td",Ns,s(c(a.unit_price)),1),t("td",Ss,s(c(a.subtotal)),1)]))),128))])]),t("div",zs,[t("div",Os,[t("div",Bs,[Ls,t("span",null,s(c(e.sale.subtotal)),1)]),e.sale.discount>0?(o(),n("div",Ts,[Es,t("span",null,"-"+s(c(e.sale.discount)),1)])):i("",!0),t("div",Ms,[qs,t("span",null,s(c(e.sale.total)),1)])])]),e.sale.notes?(o(),n("div",As,[Us,t("p",Gs,s(e.sale.notes),1)])):i("",!0),Rs])):i("",!0)])])],64))}};export{Xs as default};
