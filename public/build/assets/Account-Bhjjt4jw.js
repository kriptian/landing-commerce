import{H as J,r as y,u as A,a as c,o as m,b as i,f as e,d as l,h as K,i as k,t as b,e as u,m as p,l as Q,g as C,z as $,j as a,q as d,F as S,n as R,p as W,s as X,k as j}from"./app-DKC0vr7_.js";import{_ as Y}from"./AlertModal-B9m-Qoht.js";import{_ as E}from"./Modal-CrVCiEXj.js";import{_ as V}from"./PrimaryButton-BSaUMyts.js";import{_ as q}from"./SecondaryButton-DK_5UXoP.js";import{D as Z}from"./DangerButton-CWfUHPvq.js";const ee={class:"bg-white shadow-sm sticky top-0 z-40"},te={class:"container mx-auto px-6 py-4 flex items-center justify-between"},se={class:"flex items-center gap-3"},oe=["src","alt"],le={class:"text-lg font-medium text-gray-600"},ae={class:"flex items-center gap-4"},de=e("button",{type:"submit",class:"text-sm text-red-600 hover:text-red-700 font-medium"}," Cerrar sesión ",-1),ne=[de],re={class:"container mx-auto px-6 py-12"},ie={class:"max-w-6xl mx-auto"},ue=e("h2",{class:"text-3xl font-bold text-gray-900 mb-8"},"Mi Cuenta",-1),ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},me={class:"bg-white rounded-lg shadow p-6"},be=e("p",{class:"text-sm text-gray-600 mb-1"},"Total de Pedidos",-1),_e={class:"text-3xl font-bold text-gray-900"},ge={class:"bg-white rounded-lg shadow p-6"},pe=e("p",{class:"text-sm text-gray-600 mb-1"},"Total Gastado",-1),fe={class:"text-3xl font-bold text-gray-900"},xe={class:"bg-white rounded-lg shadow p-6"},ye=e("p",{class:"text-sm text-gray-600 mb-1"},"Dirección Predeterminada",-1),ve={key:0,class:"text-sm font-medium text-gray-900"},he={key:1,class:"text-sm text-gray-500"},we={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ke={class:"space-y-6"},Ce={class:"bg-white rounded-lg shadow p-6"},Ve=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Mi Perfil",-1),Ue=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre",-1),De=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1),Ae=["value"],$e=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1),Ee={class:"bg-white rounded-lg shadow p-6"},qe=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Cambiar Contraseña",-1),Pe=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contraseña Actual",-1),Me=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nueva Contraseña",-1),Se=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Confirmar Nueva Contraseña",-1),je={class:"bg-white rounded-lg shadow p-6"},Ne=e("h3",{class:"text-xl font-semibold text-gray-900"},"Mis Direcciones",-1),Fe={class:"space-y-3"},Oe={class:"flex items-start justify-between"},Te={class:"flex-1"},Le={class:"flex items-center gap-2 mb-2"},ze={class:"font-semibold text-gray-900"},Be={key:0,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded"},Ge={class:"text-sm text-gray-600"},He={key:0,class:"text-sm text-gray-600"},Ie={class:"text-sm text-gray-600"},Je={class:"flex gap-2"},Ke=["onClick"],Qe=["onClick"],Re=["onClick"],We={key:0,class:"text-sm text-gray-500 text-center py-4"},Xe={class:"p-6"},Ye=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Agregar Nueva Dirección",-1),Ze=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Etiqueta (Ej: Casa, Oficina)",-1),et=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dirección Línea 1",-1),tt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dirección Línea 2 (Opcional)",-1),st={class:"grid grid-cols-2 gap-4"},ot=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ciudad",-1),lt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Departamento/Estado",-1),at={class:"grid grid-cols-2 gap-4"},dt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Código Postal",-1),nt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"País",-1),rt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notas (Opcional)",-1),it={class:"flex items-center"},ut=e("label",{for:"is_default_new",class:"ml-2 text-sm text-gray-700"},"Marcar como dirección predeterminada",-1),ct={class:"flex justify-end gap-3 mt-6"},mt={class:"p-6"},bt=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Editar Dirección",-1),_t=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Etiqueta",-1),gt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dirección Línea 1",-1),pt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dirección Línea 2 (Opcional)",-1),ft={class:"grid grid-cols-2 gap-4"},xt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ciudad",-1),yt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Departamento/Estado",-1),vt={class:"grid grid-cols-2 gap-4"},ht=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Código Postal",-1),wt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"País",-1),kt=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notas (Opcional)",-1),Ct={class:"flex items-center"},Vt=e("label",{for:"is_default_edit",class:"ml-2 text-sm text-gray-700"},"Marcar como dirección predeterminada",-1),Ut={class:"flex justify-end gap-3 mt-6"},Dt={class:"p-6"},At=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Eliminar Dirección",-1),$t=e("p",{class:"text-gray-600 mb-6"}," ¿Estás seguro de que deseas eliminar esta dirección? Esta acción no se puede deshacer. ",-1),Et={class:"flex justify-end gap-3"},Ft={__name:"Account",props:{store:Object,customer:Object,orders:Object,addresses:Array,stats:Object},setup(r){const _=r,P=J(),f=y(!!P?.props?.flash?.success),x=A({name:_.customer.name,phone:_.customer.phone||""}),g=A({current_password:"",password:"",password_confirmation:""}),o=A({label:"Casa",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"Colombia",is_default:!1,notes:""}),v=y(!1),U=y(null),h=y(!1),D=y(null),w=y(!1),N=()=>{x.put(route("customer.profile.update",{store:_.store.slug}),{onSuccess:()=>{f.value=!0,setTimeout(()=>f.value=!1,3e3)}})},F=()=>{g.put(route("customer.password.update",{store:_.store.slug}),{onSuccess:()=>{g.reset(),f.value=!0,setTimeout(()=>f.value=!1,3e3)}})},O=()=>{o.reset(),o.label="Casa",o.city="",o.country="Colombia",o.is_default=_.addresses.length===0,w.value=!0},T=()=>{o.post(route("customer.addresses.store",{store:_.store.slug}),{onSuccess:()=>{w.value=!1,o.reset()}})},L=n=>{U.value=n,o.label=n.label,o.address_line_1=n.address_line_1,o.address_line_2=n.address_line_2||"",o.city=n.city,o.state=n.state||"",o.postal_code=n.postal_code||"",o.country=n.country||"Colombia",o.is_default=n.is_default,o.notes=n.notes||"",v.value=!0},z=()=>{o.put(route("customer.addresses.update",{store:_.store.slug,address:U.value.id}),{onSuccess:()=>{v.value=!1,U.value=null,o.reset()}})},B=n=>{D.value=n,h.value=!0},G=()=>{$.delete(route("customer.addresses.destroy",{store:_.store.slug,address:D.value.id}),{onSuccess:()=>{h.value=!1,D.value=null}})},H=n=>{$.post(route("customer.addresses.set-default",{store:_.store.slug,address:n.id}),{preserveScroll:!0})},I=n=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return(n,s)=>(m(),c(S,null,[i(l(K),{title:`Mi Cuenta - ${r.store.name}`},null,8,["title"]),e("div",{class:"min-h-screen",style:X(r.store?.catalog_body_bg_color?{backgroundColor:r.store.catalog_body_bg_color}:{backgroundColor:"#F9FAFB"})},[e("header",ee,[e("nav",te,[e("div",se,[r.store?.logo_url?(m(),c("img",{key:0,src:r.store.logo_url,alt:`Logo de ${r.store.name}`,class:"h-10 w-10 rounded-full object-cover ring-2 ring-gray-100"},null,8,oe)):k("",!0),e("h1",le,b(r.store.name),1)]),e("div",ae,[i(l(Q),{href:n.route("catalogo.index",{store:r.store.slug}),class:"text-sm text-gray-600 hover:text-gray-800"},{default:u(()=>[p(" Volver al catálogo ")]),_:1},8,["href"]),e("form",{onSubmit:s[0]||(s[0]=C(t=>l($).post(n.route("customer.logout",{store:r.store.slug})),["prevent"]))},ne,32)])])]),e("main",re,[e("div",ie,[ue,e("div",ce,[e("div",me,[be,e("p",_e,b(r.stats.total_orders),1)]),e("div",ge,[pe,e("p",fe,b(I(r.stats.total_spent)),1)]),e("div",xe,[ye,r.stats.default_address?(m(),c("p",ve,b(r.stats.default_address.label)+" - "+b(r.stats.default_address.city),1)):(m(),c("p",he,"No configurada"))])]),e("div",we,[e("div",ke,[e("div",Ce,[Ve,e("form",{onSubmit:C(N,["prevent"]),class:"space-y-4"},[e("div",null,[Ue,a(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l(x).name=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(x).name]])]),e("div",null,[De,e("input",{value:r.customer.email,type:"email",class:"block w-full rounded-md border-gray-300 bg-gray-50",disabled:""},null,8,Ae)]),e("div",null,[$e,a(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l(x).phone=t),type:"tel",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(x).phone]])]),i(V,{type:"submit",disabled:l(x).processing},{default:u(()=>[p(" Guardar cambios ")]),_:1},8,["disabled"])],32)]),e("div",Ee,[qe,e("form",{onSubmit:C(F,["prevent"]),class:"space-y-4"},[e("div",null,[Pe,a(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>l(g).current_password=t),type:"password",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(g).current_password]])]),e("div",null,[Me,a(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>l(g).password=t),type:"password",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(g).password]])]),e("div",null,[Se,a(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>l(g).password_confirmation=t),type:"password",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(g).password_confirmation]])]),i(V,{type:"submit",disabled:l(g).processing},{default:u(()=>[p(" Cambiar contraseña ")]),_:1},8,["disabled"])],32)]),e("div",je,[e("div",{class:"flex items-center justify-between mb-4"},[Ne,e("button",{onClick:O,class:"text-sm text-blue-600 hover:text-blue-700 font-medium"}," + Agregar ")]),e("div",Fe,[(m(!0),c(S,null,R(r.addresses,t=>(m(),c("div",{key:t.id,class:W(["border rounded-lg p-4",{"border-blue-500 bg-blue-50":t.is_default}])},[e("div",Oe,[e("div",Te,[e("div",Le,[e("span",ze,b(t.label),1),t.is_default?(m(),c("span",Be,"Predeterminada")):k("",!0)]),e("p",Ge,b(t.address_line_1),1),t.address_line_2?(m(),c("p",He,b(t.address_line_2),1)):k("",!0),e("p",Ie,b(t.city)+b(t.state?", "+t.state:""),1)]),e("div",Je,[e("button",{onClick:M=>L(t),class:"text-blue-600 hover:text-blue-700 text-sm"},"Editar",8,Ke),t.is_default?k("",!0):(m(),c("button",{key:0,onClick:M=>H(t),class:"text-green-600 hover:text-green-700 text-sm"},"Predeterminada",8,Qe)),e("button",{onClick:M=>B(t),class:"text-red-600 hover:text-red-700 text-sm"},"Eliminar",8,Re)])])],2))),128)),r.addresses.length===0?(m(),c("p",We," No tienes direcciones guardadas ")):k("",!0)])])])])])])],4),i(E,{show:w.value,onClose:s[16]||(s[16]=t=>w.value=!1)},{default:u(()=>[e("div",Xe,[Ye,e("form",{onSubmit:C(T,["prevent"]),class:"space-y-4"},[e("div",null,[Ze,a(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>l(o).label=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).label]])]),e("div",null,[et,a(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>l(o).address_line_1=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).address_line_1]])]),e("div",null,[tt,a(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>l(o).address_line_2=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).address_line_2]])]),e("div",st,[e("div",null,[ot,a(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>l(o).city=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).city]])]),e("div",null,[lt,a(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>l(o).state=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).state]])])]),e("div",at,[e("div",null,[dt,a(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>l(o).postal_code=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).postal_code]])]),e("div",null,[nt,a(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>l(o).country=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).country]])])]),e("div",null,[rt,a(e("textarea",{"onUpdate:modelValue":s[13]||(s[13]=t=>l(o).notes=t),class:"block w-full rounded-md border-gray-300 shadow-sm",rows:"2"},null,512),[[d,l(o).notes]])]),e("div",it,[a(e("input",{"onUpdate:modelValue":s[14]||(s[14]=t=>l(o).is_default=t),type:"checkbox",id:"is_default_new",class:"rounded border-gray-300"},null,512),[[j,l(o).is_default]]),ut]),e("div",ct,[i(q,{onClick:s[15]||(s[15]=t=>w.value=!1)},{default:u(()=>[p("Cancelar")]),_:1}),i(V,{type:"submit",disabled:l(o).processing},{default:u(()=>[p("Agregar")]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),i(E,{show:v.value,onClose:s[27]||(s[27]=t=>v.value=!1)},{default:u(()=>[e("div",mt,[bt,e("form",{onSubmit:C(z,["prevent"]),class:"space-y-4"},[e("div",null,[_t,a(e("input",{"onUpdate:modelValue":s[17]||(s[17]=t=>l(o).label=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).label]])]),e("div",null,[gt,a(e("input",{"onUpdate:modelValue":s[18]||(s[18]=t=>l(o).address_line_1=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).address_line_1]])]),e("div",null,[pt,a(e("input",{"onUpdate:modelValue":s[19]||(s[19]=t=>l(o).address_line_2=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).address_line_2]])]),e("div",ft,[e("div",null,[xt,a(e("input",{"onUpdate:modelValue":s[20]||(s[20]=t=>l(o).city=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).city]])]),e("div",null,[yt,a(e("input",{"onUpdate:modelValue":s[21]||(s[21]=t=>l(o).state=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).state]])])]),e("div",vt,[e("div",null,[ht,a(e("input",{"onUpdate:modelValue":s[22]||(s[22]=t=>l(o).postal_code=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[d,l(o).postal_code]])]),e("div",null,[wt,a(e("input",{"onUpdate:modelValue":s[23]||(s[23]=t=>l(o).country=t),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[d,l(o).country]])])]),e("div",null,[kt,a(e("textarea",{"onUpdate:modelValue":s[24]||(s[24]=t=>l(o).notes=t),class:"block w-full rounded-md border-gray-300 shadow-sm",rows:"2"},null,512),[[d,l(o).notes]])]),e("div",Ct,[a(e("input",{"onUpdate:modelValue":s[25]||(s[25]=t=>l(o).is_default=t),type:"checkbox",id:"is_default_edit",class:"rounded border-gray-300"},null,512),[[j,l(o).is_default]]),Vt]),e("div",Ut,[i(q,{onClick:s[26]||(s[26]=t=>v.value=!1)},{default:u(()=>[p("Cancelar")]),_:1}),i(V,{type:"submit",disabled:l(o).processing},{default:u(()=>[p("Guardar")]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]),i(E,{show:h.value,onClose:s[29]||(s[29]=t=>h.value=!1)},{default:u(()=>[e("div",Dt,[At,$t,e("div",Et,[i(q,{onClick:s[28]||(s[28]=t=>h.value=!1)},{default:u(()=>[p("Cancelar")]),_:1}),i(Z,{onClick:G},{default:u(()=>[p("Eliminar")]),_:1})])])]),_:1},8,["show"]),i(Y,{show:f.value,type:"success",title:"¡Éxito!",message:l(P)?.props?.flash?.success||"Operación realizada exitosamente","primary-text":"Entendido",onPrimary:s[30]||(s[30]=t=>f.value=!1),onClose:s[31]||(s[31]=t=>f.value=!1)},null,8,["show","message"])],64))}};export{Ft as default};
