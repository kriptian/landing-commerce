import{r as D,u as J,c as Z,B as lt,C as nt,D as dt,a as i,o as n,b as w,d as c,h as it,e as C,f as t,i as m,p as u,t as l,g as H,j as k,q as $,l as R,m as _,y as tt,F as L,n as T,E as et,s as st}from"./app-DKC0vr7_.js";import{_ as ct}from"./AuthenticatedLayout-DEUhirSK.js";import{_ as q}from"./Pagination-BjN5tLJp.js";import"./AlertModal-B9m-Qoht.js";import"./Modal-CrVCiEXj.js";const ut=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Reportes de Ventas",-1),pt={class:"py-12"},ht={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},xt={class:"mb-6 border-b border-gray-200"},bt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},gt={key:0},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},yt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ft={class:"p-6"},vt=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales (en el período)",-1),_t={class:"mt-1 text-3xl font-semibold text-gray-900"},wt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},kt={class:"p-6"},St=t("h3",{class:"text-sm font-medium text-gray-500 uppercase tracking-wider"},"Órdenes Totales (en el período)",-1),Ft={class:"mt-1 text-3xl font-semibold text-gray-900"},Ct={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},Mt={class:"p-6"},Dt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},$t=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"Desde",-1),Lt=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"Hasta",-1),Et={class:"flex space-x-2"},Vt=["disabled"],Rt={class:"mt-4 flex flex-wrap gap-2"},Tt=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),zt={class:"mb-4 border-b border-gray-200"},Ot={class:"-mb-px flex space-x-8","aria-label":"Tabs"},jt={key:1},Pt={class:"flex flex-wrap gap-4 mb-6"},Nt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Bt={class:"p-6"},Ht=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventas Totales",-1),Yt={class:"mt-1 text-2xl font-semibold text-gray-900"},qt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Ut={class:"p-6"},Gt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gastos / Salidas",-1),Wt={class:"mt-1 text-2xl font-semibold text-red-600"},At={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},It={class:"p-6"},Xt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Efectivo Neto",-1),Kt={class:"mt-1 text-2xl font-semibold text-blue-600"},Qt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},Jt={class:"p-6"},Zt=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ganancia Total",-1),te={class:"mt-1 text-2xl font-semibold text-green-600"},ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex-1 min-w-[200px]"},se={class:"p-6"},ae=t("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"# Ventas",-1),oe={class:"mt-1 text-2xl font-semibold text-gray-900"},re={class:"mb-6 border-b border-gray-200"},le={class:"-mb-px flex space-x-8"},ne={key:0},de={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},ie={class:"p-6"},ce={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},ue=t("label",{for:"search_sale",class:"block text-sm font-medium text-gray-700"},"Buscar por número",-1),pe=t("label",{for:"physical_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),he=t("label",{for:"physical_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),xe={class:"flex gap-2"},be=["disabled"],ge={class:"mt-4 flex flex-wrap gap-2"},me=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},fe={class:"p-6"},ve={class:"flex justify-between items-center mb-4"},_e=t("h3",{class:"text-lg font-semibold"},"Historial de Ventas Físicas",-1),we=["href"],ke=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Se={class:"overflow-x-auto"},Fe={class:"min-w-full divide-y divide-gray-200"},Ce=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Número"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Vendedor"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Método de Pago"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ganancia"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1),Me={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm"},je={key:0},Pe=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay ventas para mostrar en este período. ",-1),Ne=[Pe],Be={key:1},He={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},Ye={class:"p-6"},qe={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end"},Ue=t("div",{class:"hidden md:block"},null,-1),Ge=t("label",{for:"exp_start_date",class:"block text-sm font-medium text-gray-700"},"Fecha inicio",-1),We=t("label",{for:"exp_end_date",class:"block text-sm font-medium text-gray-700"},"Fecha fin",-1),Ae={class:"flex gap-2"},Ie=["disabled"],Xe={class:"mt-4 flex flex-wrap gap-2"},Ke=t("span",{class:"text-sm text-gray-500 mr-2 self-center"},"Rangos rápidos:",-1),Qe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Je={class:"p-6"},Ze={class:"flex justify-between items-center mb-4"},ts=t("h3",{class:"text-lg font-semibold text-red-600"},"Historial de Gastos",-1),es=["href"],ss=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),as={class:"overflow-x-auto"},os={class:"min-w-full divide-y divide-gray-200"},rs=t("thead",{class:"bg-red-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Descripción"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-red-800 uppercase"},"Registrado por"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-red-800 uppercase"},"Monto")])],-1),ls={class:"bg-white divide-y divide-gray-200"},ns={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ds={class:"px-6 py-4 text-sm text-gray-900"},is={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},cs={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600 text-right"},us={key:0},ps=t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"}," No hay gastos registrados en este período. ",-1),hs=[ps],xs={key:2},bs=t("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[t("div",{class:"p-6"},[t("h3",{class:"text-lg font-semibold mb-4"},"Ventas en el Período Seleccionado"),t("p",null,"Gráfico temporalmente deshabilitado por debug")])],-1),gs=[bs],ms={key:3},ys={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},fs={class:"p-6 text-gray-900"},vs={class:"flex justify-between items-center mb-4"},_s=t("h3",{class:"text-lg font-semibold"},"Historial de Órdenes",-1),ws=["href"],ks=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{d:"M7 10a1 1 0 011-1h2V4a1 1 0 112 0v5h2a1 1 0 01.7 1.714l-3 3a1 1 0 01-1.4 0l-3-3A1 1 0 017 10z"}),t("path",{d:"M5 15a1 1 0 011 1v2a2 2 0 002 2h8a2 2 0 002-2v-2a1 1 0 112 0v2a4 4 0 01-4 4H8a4 4 0 01-4-4v-2a1 1 0 011-1z"})],-1),Ss={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},Fs={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},Cs={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},Ms={class:"sticky top-0 z-10 bg-gray-50"},Ds=t("div",{class:"mx-auto my-auto h-6 w-1.5 bg-gray-300 rounded-full group-hover:bg-indigo-400"},null,-1),$s=[Ds],Ls=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cliente",-1),Es=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Fecha",-1),Vs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Estado",-1),Rs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Total",-1),Ts=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Productos",-1),zs=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"Cantidades",-1),Os=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap"},"P. Unitario",-1),js={class:"bg-white divide-y divide-gray-200"},Ps=["title"],Ns={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Hs={class:"px-6 py-4 whitespace-nowrap"},Ys={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},qs={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600 max-w-xl"},Us={class:"font-medium"},Gs={key:0},Ws={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},As={class:"px-6 py-4 whitespace-pre-line text-sm text-gray-600"},Is={key:0},Xs=t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No hay órdenes para mostrar en este período. ",-1),Ks=[Xs],at="rep_firstcol_w_px",Qs=60,Js=320,oa={__name:"Index",props:{orders:Object,stats:Object,filters:Object,chartData:Object,physicalSales:Object,physicalSalesStats:Object,physicalSales:Object,physicalSalesStats:Object,physicalSalesFilters:Object,expensesList:Object},setup(o){const S=o,v=D("digital"),M=D("chart"),E=D("sales"),F=J({start_date:S.filters.start_date||"",end_date:S.filters.end_date||""}),p=J({start_date:S.physicalSalesFilters?.start_date||"",end_date:S.physicalSalesFilters?.end_date||"",search:S.physicalSalesFilters?.search||""}),j=()=>{v.value==="digital"?F.get(route("admin.reports.index"),{preserveState:!0,preserveScroll:!0}):p.get(route("admin.reports.index",{type:"physical"}),{preserveState:!0,preserveScroll:!0})},Y=a=>{const s=a.getFullYear(),e=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${s}-${e}-${d}`},U=()=>{const a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},h=a=>{const s=U();let e,d;switch(a){case"today":e=s,d=s;break;case"last7":e=new Date(s),e.setDate(e.getDate()-6),d=s;break;case"last30":e=new Date(s),e.setDate(e.getDate()-29),d=s;break;case"thisMonth":e=new Date(s.getFullYear(),s.getMonth(),1),d=new Date(s.getFullYear(),s.getMonth()+1,0);break;case"lastMonth":e=new Date(s.getFullYear(),s.getMonth()-1,1),d=new Date(s.getFullYear(),s.getMonth(),0);break;default:return}const r=v.value==="digital"?F:p;r.start_date=Y(e),r.end_date=Y(d),j()},x=a=>{const s=v.value==="digital"?F:p,e=s.start_date,d=s.end_date;if(!e||!d)return!1;const r=U(),g=b=>Y(b),f=(b,O)=>b===O;switch(a){case"today":return f(e,g(r))&&f(d,g(r));case"last7":{const b=new Date(r);return b.setDate(b.getDate()-6),f(e,g(b))&&f(d,g(r))}case"last30":{const b=new Date(r);return b.setDate(b.getDate()-29),f(e,g(b))&&f(d,g(r))}case"thisMonth":{const b=new Date(r.getFullYear(),r.getMonth(),1),O=new Date(r.getFullYear(),r.getMonth()+1,0);return f(e,g(b))&&f(d,g(O))}case"lastMonth":{const b=new Date(r.getFullYear(),r.getMonth()-1,1),O=new Date(r.getFullYear(),r.getMonth(),0);return f(e,g(b))&&f(d,g(O))}default:return!1}};Z(()=>({labels:S.chartData.labels,datasets:[{label:"Entregadas",backgroundColor:"#10B981",borderColor:"#059669",borderWidth:1,borderRadius:4,data:S.chartData.delivered,barPercentage:.6,categoryPercentage:.6},{label:"Canceladas",backgroundColor:"#EF4444",borderColor:"#DC2626",borderWidth:1,borderRadius:4,data:S.chartData.cancelled,barPercentage:.6,categoryPercentage:.6}]}));const ot=a=>{if(!a)return"";const s={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString("es-CO",s)},G=a=>a?new Date(a).toLocaleString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",y=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),rt=a=>{if(!a||!a.items)return"-";let s=0,e=!0;for(const d of a.items){let r=0;if(d.variant&&d.variant.purchase_price>0?r=parseFloat(d.variant.purchase_price):d.product&&d.product.purchase_price>0&&(r=parseFloat(d.product.purchase_price)),r>0){const g=(parseFloat(d.unit_price)-r)*d.quantity;s+=g}else e=!1}return e?y(s):"-"},P=D(null),W=D(!1),A=D(!1),z=()=>{const a=P.value;if(!a)return;const s=a.scrollWidth-a.clientWidth,e=a.scrollLeft||0;W.value=e>0,A.value=e<s-1};lt(()=>{nt(()=>z()),P.value?.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",z)}),dt(()=>{P.value?.removeEventListener("scroll",z),window.removeEventListener("resize",z)});const V=D(Number(localStorage.getItem(at))||160),I=Z(()=>({width:V.value+"px",minWidth:V.value+"px",maxWidth:V.value+"px"}));let X=0,K=0;const N=a=>{const s=a.touches?a.touches[0].clientX:a.clientX,e=Math.max(Qs,Math.min(Js,K+(s-X)));V.value=e},B=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",B),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",B);try{localStorage.setItem(at,String(V.value))}catch{}},Q=a=>{X=a.touches?a.touches[0].clientX:a.clientX,K=V.value,document.addEventListener("mousemove",N,{passive:!1}),document.addEventListener("mouseup",B),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("touchend",B)};return(a,s)=>(n(),i(L,null,[w(c(it),{title:"Reportes de Ventas"}),w(ct,null,{header:C(()=>[ut]),default:C(()=>[t("div",pt,[t("div",ht,[t("div",xt,[t("nav",bt,[t("button",{onClick:s[0]||(s[0]=e=>{v.value="digital",M.value="chart"}),class:u([v.value==="digital"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Pedidos Digitales ",2),t("button",{onClick:s[1]||(s[1]=e=>v.value="physical"),class:u([v.value==="physical"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Ventas Físicas ",2)])]),v.value==="digital"?(n(),i("div",gt,[t("div",mt,[t("div",yt,[t("div",ft,[vt,t("p",_t,l(y(o.stats.totalSales)),1)])]),t("div",wt,[t("div",kt,[St,t("p",Ft,l(o.stats.totalOrders),1)])])]),t("div",Ct,[t("div",Mt,[t("form",{onSubmit:H(j,["prevent"])},[t("div",Dt,[t("div",null,[$t,k(t("input",{type:"date",id:"start_date","onUpdate:modelValue":s[2]||(s[2]=e=>c(F).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(F).start_date]])]),t("div",null,[Lt,k(t("input",{type:"date",id:"end_date","onUpdate:modelValue":s[3]||(s[3]=e=>c(F).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(F).end_date]])]),t("div",Et,[t("button",{type:"submit",disabled:c(F).processing,class:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,Vt),w(c(R),{href:a.route("admin.reports.index"),class:"w-full bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Rt,[Tt,t("button",{type:"button",onClick:s[4]||(s[4]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[5]||(s[5]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[6]||(s[6]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[7]||(s[7]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[8]||(s[8]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",zt,[t("nav",Ot,[t("button",{onClick:s[9]||(s[9]=e=>M.value="chart"),class:u([M.value==="chart"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Gráfico ",2),t("button",{onClick:s[10]||(s[10]=e=>M.value="table"),class:u([M.value==="table"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Tabla de Órdenes ",2)])])])):m("",!0),v.value==="physical"?(n(),i("div",jt,[t("div",Pt,[t("div",Nt,[t("div",Bt,[Ht,t("p",Yt,l(o.physicalSalesStats?y(o.physicalSalesStats.totalSales||0):"$0"),1)])]),t("div",qt,[t("div",Ut,[Gt,t("p",Wt,l(o.physicalSalesStats?y(o.physicalSalesStats.totalExpenses||0):"$0"),1)])]),t("div",At,[t("div",It,[Xt,t("p",Kt,l(o.physicalSalesStats?y(o.physicalSalesStats.netCash||0):"$0"),1)])]),t("div",Qt,[t("div",Jt,[Zt,t("p",te,l(o.physicalSalesStats?y(o.physicalSalesStats.totalProfit||0):"$0"),1)])]),t("div",ee,[t("div",se,[ae,t("p",oe,l(o.physicalSalesStats&&o.physicalSalesStats.totalCount||0),1)])])]),t("div",re,[t("nav",le,[t("button",{onClick:s[11]||(s[11]=e=>E.value="sales"),class:u([E.value==="sales"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Ventas ",2),t("button",{onClick:s[12]||(s[12]=e=>E.value="expenses"),class:u([E.value==="expenses"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Historial Gastos ",2)])]),E.value==="sales"?(n(),i("div",ne,[t("div",de,[t("div",ie,[t("form",{onSubmit:H(j,["prevent"])},[t("div",ce,[t("div",null,[ue,k(t("input",{type:"text",id:"search_sale","onUpdate:modelValue":s[13]||(s[13]=e=>c(p).search=e),placeholder:"Ej: V-000001",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).search]])]),t("div",null,[pe,k(t("input",{type:"date",id:"physical_start_date","onUpdate:modelValue":s[14]||(s[14]=e=>c(p).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).start_date]])]),t("div",null,[he,k(t("input",{type:"date",id:"physical_end_date","onUpdate:modelValue":s[15]||(s[15]=e=>c(p).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).end_date]])]),t("div",xe,[t("button",{type:"submit",disabled:c(p).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar ",8,be),w(c(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",ge,[me,t("button",{type:"button",onClick:s[16]||(s[16]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[17]||(s[17]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[18]||(s[18]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[19]||(s[19]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[20]||(s[20]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",ye,[t("div",fe,[t("div",ve,[_e,o.physicalSales&&o.physicalSales.data&&o.physicalSales.data.length>0?(n(),i("a",{key:0,href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition"},[ke,_(" Exportar Ventas ")],8,we)):m("",!0)]),t("div",Se,[t("table",Fe,[Ce,t("tbody",Me,[(n(!0),i(L,null,T(o.physicalSales?.data,e=>(n(),i("tr",{key:e.id},[t("td",De,[w(c(R),{href:a.route("admin.physical-sales.show",e.id),class:"hover:underline"},{default:C(()=>[_(l(e.sale_number),1)]),_:2},1032,["href"])]),t("td",$e,l(e.user?.name||"N/A"),1),t("td",Le,l(G(e.created_at)),1),t("td",Ee,l(e.payment_method),1),t("td",Ve,l(y(e.subtotal)),1),t("td",Re,l(y(e.discount)),1),t("td",Te,l(y(e.total)),1),t("td",ze,l(rt(e)),1),t("td",Oe,[w(c(R),{href:a.route("admin.physical-sales.show",e.id),class:"text-blue-600 hover:text-blue-900"},{default:C(()=>[_(" Ver ")]),_:2},1032,["href"])])]))),128)),!o.physicalSales||!o.physicalSales.data||o.physicalSales.data.length===0?(n(),i("tr",je,Ne)):m("",!0)])])]),o.physicalSales&&o.physicalSales.links?(n(),tt(q,{key:0,class:"mt-6",links:o.physicalSales.links},null,8,["links"])):m("",!0)])])])):m("",!0),E.value==="expenses"?(n(),i("div",Be,[t("div",He,[t("div",Ye,[t("form",{onSubmit:H(j,["prevent"])},[t("div",qe,[Ue,t("div",null,[Ge,k(t("input",{type:"date",id:"exp_start_date","onUpdate:modelValue":s[21]||(s[21]=e=>c(p).start_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).start_date]])]),t("div",null,[We,k(t("input",{type:"date",id:"exp_end_date","onUpdate:modelValue":s[22]||(s[22]=e=>c(p).end_date=e),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"},null,512),[[$,c(p).end_date]])]),t("div",Ae,[t("button",{type:"submit",disabled:c(p).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Filtrar Gastos ",8,Ie),w(c(R),{href:a.route("admin.reports.index",{type:"physical"}),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 text-center"},{default:C(()=>[_(" Limpiar ")]),_:1},8,["href"])])]),t("div",Xe,[Ke,t("button",{type:"button",onClick:s[23]||(s[23]=e=>h("today")),class:u(["px-3 py-1 rounded-full text-sm border",x("today")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Hoy",2),t("button",{type:"button",onClick:s[24]||(s[24]=e=>h("last7")),class:u(["px-3 py-1 rounded-full text-sm border",x("last7")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 7 días",2),t("button",{type:"button",onClick:s[25]||(s[25]=e=>h("last30")),class:u(["px-3 py-1 rounded-full text-sm border",x("last30")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Últimos 30 días",2),t("button",{type:"button",onClick:s[26]||(s[26]=e=>h("thisMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("thisMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Este mes",2),t("button",{type:"button",onClick:s[27]||(s[27]=e=>h("lastMonth")),class:u(["px-3 py-1 rounded-full text-sm border",x("lastMonth")?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"])},"Mes pasado",2)])],32)])]),t("div",Qe,[t("div",Je,[t("div",Ze,[ts,t("a",{href:a.route("admin.physical-sales.export",{start_date:o.physicalSalesFilters?.start_date,end_date:o.physicalSalesFilters?.end_date}),class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:outline-none transition"},[ss,_(" Exportar Reporte ")],8,es)]),t("div",as,[t("table",os,[rs,t("tbody",ls,[(n(!0),i(L,null,T(o.expensesList.data,e=>(n(),i("tr",{key:e.id},[t("td",ns,l(G(e.expense_date)),1),t("td",ds,l(e.description),1),t("td",is,l(e.user?.name||"N/A"),1),t("td",cs,l(y(e.amount)),1)]))),128)),!o.expensesList||!o.expensesList.data||o.expensesList.data.length===0?(n(),i("tr",us,hs)):m("",!0)])])]),o.expensesList&&o.expensesList.links?(n(),tt(q,{key:0,class:"mt-6",links:o.expensesList.links},null,8,["links"])):m("",!0)])])])):m("",!0)])):m("",!0),v.value==="digital"&&M.value==="chart"?(n(),i("div",xs,gs)):m("",!0),v.value==="digital"&&M.value==="table"?(n(),i("div",ms,[t("div",ys,[t("div",fs,[t("div",vs,[_s,o.orders.data.length>0?(n(),i("a",{key:0,href:a.route("admin.reports.export",{start_date:o.filters.start_date,end_date:o.filters.end_date}),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[ks,_(" Exportar a Excel ")],8,ws)):m("",!0)]),t("div",{ref_key:"scrollBoxRef",ref:P,class:"relative overflow-x-auto"},[k(t("div",Ss,null,512),[[et,W.value]]),k(t("div",Fs,null,512),[[et,A.value]]),t("table",Cs,[t("thead",Ms,[t("tr",null,[t("th",{class:"sticky left-0 z-20 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase whitespace-nowrap relative",style:st(I.value)},[_(" Orden # "),t("div",{onMousedown:Q,onTouchstart:H(Q,["prevent"]),class:"absolute top-0 right-0 h-full w-3 cursor-col-resize group"},$s,32)],4),Ls,Es,Vs,Rs,Ts,zs,Os])]),t("tbody",js,[(n(!0),i(L,null,T(o.orders.data,(e,d)=>(n(),i("tr",{key:e.id,class:"odd:bg-white even:bg-gray-100"},[t("td",{class:u(["sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:underline border-r truncate",d%2===1?"bg-gray-100":"bg-white"]),style:st(I.value),title:e.sequence_number||e.id},[w(c(R),{href:a.route("admin.orders.show",e.id)},{default:C(()=>[_(l(e.sequence_number||e.sequence_number===0?e.sequence_number:e.id),1)]),_:2},1032,["href"])],14,Ps),t("td",Ns,l(e.customer_name),1),t("td",Bs,l(ot(e.created_at)),1),t("td",Hs,[t("span",{class:u(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":e.status==="entregado","bg-yellow-100 text-yellow-800":e.status==="recibido","bg-blue-100 text-blue-800":e.status==="en_preparacion","bg-purple-100 text-purple-800":e.status==="despachado","bg-red-100 text-red-800":e.status==="cancelado"}])},l(e.status),3)]),t("td",Ys,l(y(e.total_price)),1),t("td",qs,[(n(!0),i(L,null,T(e.items,r=>(n(),i("div",{key:r.id},[t("span",Us,l(r.product_name||r.product?.name),1),r.variant_options||r.variant?.options?(n(),i("span",Gs," ("+l(Object.entries(r.variant_options||r.variant?.options||{}).map(([g,f])=>`${g}: ${f}`).join(", "))+") ",1)):m("",!0)]))),128))]),t("td",Ws,[(n(!0),i(L,null,T(e.items,r=>(n(),i("div",{key:"q"+r.id},l(r.quantity),1))),128))]),t("td",As,[(n(!0),i(L,null,T(e.items,r=>(n(),i("div",{key:"p"+r.id},l(y(r.unit_price)),1))),128))])]))),128)),o.orders.data.length===0?(n(),i("tr",Is,Ks)):m("",!0)])])],512),w(q,{class:"mt-6",links:o.orders.links},null,8,["links"])])])])):m("",!0)])])]),_:1})],64))}};export{oa as default};
