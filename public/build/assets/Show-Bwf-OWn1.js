import{_ as $}from"./AuthenticatedLayout-J7uuA0aO.js";import{H as j,c as P,r as D,B as V,a,o,b as f,y as C,f as t,d as v,h as N,t as s,i,F as _,n as x,e as m,l as I,m as r}from"./app-BWfncV94.js";import{d as S,s as z}from"./pdfUtils-lMbEWCUB.js";import"./AlertModal-CyuLGaFw.js";import"./Modal-BKig7U95.js";const B={key:0,class:"min-h-screen bg-gray-50"},L={class:"bg-white border-b border-gray-200 px-6 py-4 no-print"},O={class:"flex items-center justify-between max-w-4xl mx-auto"},T={class:"font-semibold text-xl text-gray-800"},E={class:"flex gap-2"},M=["disabled"],q={key:0},A={key:1},U=t("span",{class:"hidden sm:inline"},"Descargar",-1),G=["disabled"],R={key:0},H={key:1},J=t("span",{class:"hidden sm:inline"},"Compartir",-1),K=t("span",null,"ðŸ–¨ï¸",-1),Q=t("span",{class:"hidden sm:inline"},"Imprimir",-1),W=[K,Q],X=t("span",null,"â¬…ï¸",-1),Y=t("span",{class:"hidden sm:inline"},"Volver",-1),Z=[X,Y],tt={class:"py-12"},et={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},st={class:"print-store-header"},ot={key:0,class:"text-center text-2xl font-bold mb-6 pb-4 border-b-2 border-black"},at={key:0,class:"watermark-container"},nt={class:"watermark-text"},it={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},lt={class:"p-6"},dt={class:"mb-6"},ct=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),rt={class:"grid grid-cols-2 gap-4"},_t=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),ht={class:"font-medium"},ut=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),xt={class:"font-medium"},mt=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),pt={class:"font-medium"},yt=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),gt={class:"font-medium capitalize"},bt={key:0,class:"mt-4"},ft=t("p",{class:"text-sm text-gray-500"},"Notas",-1),vt={class:"font-medium"},wt={class:"mb-6"},kt=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Ft={class:"overflow-x-auto"},$t={class:"min-w-full divide-y divide-gray-200"},jt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),Pt={class:"bg-white divide-y divide-gray-200"},Dt={class:"px-4 py-3"},Vt={class:"font-medium"},Ct={key:0,class:"text-sm text-gray-500"},Nt={class:"px-4 py-3"},It={class:"px-4 py-3"},St={key:0},zt={class:"text-sm text-gray-400 line-through"},Bt={class:"font-medium"},Lt={key:1},Ot={class:"px-4 py-3"},Tt={key:0,class:"text-sm text-green-600 font-medium"},Et={key:1,class:"text-sm text-gray-400"},Mt={class:"px-4 py-3 font-medium"},qt={class:"border-t pt-4"},At={class:"flex justify-end"},Ut={class:"w-64 space-y-2"},Gt={class:"flex justify-between"},Rt=t("span",null,"Subtotal:",-1),Ht={key:0,class:"flex justify-between text-red-600"},Jt=t("span",null,"Descuento manual:",-1),Kt={class:"flex justify-between text-lg font-bold pt-2 border-t"},Qt=t("span",null,"Total:",-1),Wt={class:"flex items-center justify-between"},Xt={class:"font-semibold text-xl text-gray-800 leading-tight"},Yt={class:"flex gap-2"},Zt=["disabled"],te={key:0},ee={key:1},se=t("span",{class:"hidden sm:inline"},"Descargar",-1),oe=["disabled"],ae={key:0},ne={key:1},ie=t("span",{class:"hidden sm:inline"},"Compartir",-1),le=t("span",null,"ðŸ–¨ï¸",-1),de=t("span",{class:"hidden sm:inline"},"Imprimir",-1),ce=[le,de],re=t("span",null,"â¬…ï¸",-1),_e=t("span",{class:"hidden sm:inline"},"Volver",-1),he={class:"py-12"},ue={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},xe={class:"print-store-header"},me={class:"flex items-center justify-center gap-4 mb-6 pb-4 border-b-2 border-black"},pe=["src"],ye={key:1,class:"text-3xl font-bold"},ge={key:0,class:"watermark-container"},be={class:"watermark-text"},fe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg relative z-10"},ve={class:"p-6"},we={class:"mb-6"},ke=t("h3",{class:"text-lg font-semibold mb-4"},"InformaciÃ³n de la Venta",-1),Fe={class:"grid grid-cols-2 gap-4"},$e=t("p",{class:"text-sm text-gray-500"},"NÃºmero de Venta",-1),je={class:"font-medium"},Pe=t("p",{class:"text-sm text-gray-500"},"Fecha",-1),De={class:"font-medium"},Ve=t("p",{class:"text-sm text-gray-500"},"Vendedor",-1),Ce={class:"font-medium"},Ne=t("p",{class:"text-sm text-gray-500"},"MÃ©todo de Pago",-1),Ie={class:"font-medium capitalize"},Se={key:0,class:"mt-4"},ze=t("p",{class:"text-sm text-gray-500"},"Notas",-1),Be={class:"font-medium"},Le={class:"mb-6"},Oe=t("h3",{class:"text-lg font-semibold mb-4"},"Productos Vendidos",-1),Te={class:"overflow-x-auto"},Ee={class:"min-w-full divide-y divide-gray-200"},Me=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio Unit."),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descuento"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1),qe={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-4 py-3"},Ue={class:"font-medium"},Ge={key:0,class:"text-sm text-gray-500"},Re={class:"px-4 py-3"},He={class:"px-4 py-3"},Je={key:0},Ke={class:"text-sm text-gray-400 line-through"},Qe={class:"font-medium"},We={key:1},Xe={class:"px-4 py-3"},Ye={key:0,class:"text-sm text-green-600 font-medium"},Ze={key:1,class:"text-sm text-gray-400"},ts={class:"px-4 py-3 font-medium"},es={class:"border-t pt-4"},ss={class:"flex justify-end"},os={class:"w-64 space-y-2"},as={class:"flex justify-between"},ns=t("span",null,"Subtotal:",-1),is={key:0,class:"flex justify-between text-red-600"},ls=t("span",null,"Descuento manual:",-1),ds={class:"flex justify-between text-lg font-bold pt-2 border-t"},cs=t("span",null,"Total:",-1),rs={class:"fixed top-0 left-0 w-[210mm] bg-white z-[-100] opacity-0 pointer-events-none"},_s={id:"invoice-content-show",class:"p-8 bg-white text-black relative overflow-hidden"},hs={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-0 opacity-[0.12]"},us={class:"text-[80px] font-[900] text-black uppercase whitespace-nowrap -rotate-45 transform select-none"},xs={key:1,class:"relative z-10"},ms={class:"flex items-center justify-center gap-4 mb-8 pb-4 border-b-2 border-black"},ps=["src"],ys={key:1,class:"text-3xl font-bold"},gs={class:"mb-8"},bs=t("h2",{class:"text-xl font-bold mb-4"},"InformaciÃ³n de Venta",-1),fs={class:"grid grid-cols-2 gap-4 text-sm"},vs=t("strong",null,"NÃºmero:",-1),ws=t("strong",null,"Fecha:",-1),ks=t("strong",null,"Vendedor:",-1),Fs=t("strong",null,"MÃ©todo de Pago:",-1),$s={class:"capitalize"},js={class:"w-full mb-8 text-sm"},Ps=t("thead",{class:"border-b-2 border-black"},[t("tr",null,[t("th",{class:"text-left py-2"},"Producto"),t("th",{class:"text-center py-2"},"Cant"),t("th",{class:"text-right py-2"},"Precio"),t("th",{class:"text-right py-2"},"Total")])],-1),Ds={class:"py-2"},Vs={key:0,class:"text-xs text-gray-500"},Cs={class:"text-center py-2"},Ns={class:"text-right py-2"},Is={class:"text-right py-2"},Ss={class:"flex justify-end"},zs={class:"w-1/2 space-y-2 text-right"},Bs={class:"flex justify-between"},Ls=t("span",null,"Subtotal:",-1),Os={key:0,class:"flex justify-between text-red-600"},Ts=t("span",null,"Descuento:",-1),Es={class:"flex justify-between text-xl font-bold border-t border-black pt-2"},Ms=t("span",null,"Total:",-1),qs={key:0,class:"mt-8 pt-4 border-t border-gray-200"},As=t("p",{class:"text-sm font-bold"},"Notas:",-1),Us={class:"text-sm"},Gs=t("div",{class:"mt-12 text-center text-xs text-gray-500"},[t("p",null,"Gracias por su compra")],-1),Ws={__name:"Show",props:{sale:Object,store:Object},setup(e){const c=e,w=j(),k=P(()=>(w.props.auth?.roles||[]).includes("physical-sales")),d=D(!1),p=async()=>{if(c.sale){d.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await S(l,`factura-${c.sale.sale_number}.pdf`)}catch(l){console.error(l),alert("Error al generar el PDF")}finally{d.value=!1}}},y=async()=>{if(c.sale){d.value=!0;try{const l=document.getElementById("invoice-content-show");l&&await z(l,`factura-${c.sale.sale_number}.pdf`,`Factura #${c.sale.sale_number}`)}catch(l){console.error(l)}finally{d.value=!1}}},F=()=>new URLSearchParams(window.location.search).get("print")==="true",g=()=>{window.print()};return V(()=>{F()&&setTimeout(()=>{window.print()},500)}),(l,b)=>(o(),a(_,null,[f(v(N),{title:"Detalle de Venta"}),k.value?(o(),a("div",B,[t("div",L,[t("div",O,[t("h2",T," Venta #"+s(e.sale.sale_number),1),t("div",E,[t("button",{onClick:p,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1",disabled:d.value,title:"Descargar PDF"},[d.value?(o(),a("span",q,"â³")):(o(),a("span",A,"â¬‡ï¸")),U],8,M),t("button",{onClick:y,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1",disabled:d.value,title:"Compartir Factura"},[d.value?(o(),a("span",R,"â³")):(o(),a("span",H,"ðŸ”—")),J],8,G),t("button",{onClick:g,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1",title:"Imprimir"},W),t("button",{onClick:b[0]||(b[0]=n=>l.$inertia.visit(l.route("admin.reports.index",{type:"physical"}))),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center gap-1",title:"Volver"},Z)])])]),t("div",tt,[t("div",et,[t("div",st,[e.store?.name?(o(),a("h1",ot,s(e.store.name),1)):i("",!0)]),e.store?.name?(o(),a("div",at,[t("div",nt,s(e.store.name),1)])):i("",!0),t("div",it,[t("div",lt,[t("div",dt,[ct,t("div",rt,[t("div",null,[_t,t("p",ht,"#"+s(e.sale.sale_number),1)]),t("div",null,[ut,t("p",xt,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[mt,t("p",pt,s(e.sale.user?.name||"N/A"),1)]),t("div",null,[yt,t("p",gt,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),a("div",bt,[ft,t("p",vt,s(e.sale.notes),1)])):i("",!0)]),t("div",wt,[kt,t("div",Ft,[t("table",$t,[jt,t("tbody",Pt,[(o(!0),a(_,null,x(e.sale.items,n=>(o(),a("tr",{key:n.id},[t("td",Dt,[t("p",Vt,s(n.product_name),1),n.variant_options?(o(),a("p",Ct,s(Object.entries(n.variant_options).map(([h,u])=>`${h}: ${u}`).join(", ")),1)):i("",!0)]),t("td",Nt,s(n.quantity),1),t("td",It,[n.original_price&&n.original_price>n.unit_price?(o(),a("div",St,[t("p",zt,"$"+s(parseFloat(n.original_price).toFixed(2)),1),t("p",Bt,"$"+s(parseFloat(n.unit_price).toFixed(2)),1)])):(o(),a("p",Lt,"$"+s(parseFloat(n.unit_price).toFixed(2)),1))]),t("td",Ot,[n.discount_percent>0?(o(),a("span",Tt," -"+s(n.discount_percent)+"% ",1)):(o(),a("span",Et,"-"))]),t("td",Mt,"$"+s(parseFloat(n.subtotal).toFixed(2)),1)]))),128))])])])]),t("div",qt,[t("div",At,[t("div",Ut,[t("div",Gt,[Rt,t("span",null,"$"+s(parseFloat(e.sale.subtotal).toFixed(2)),1)]),e.sale.discount>0?(o(),a("div",Ht,[Jt,t("span",null,"-$"+s(parseFloat(e.sale.discount).toFixed(2)),1)])):i("",!0),t("div",Kt,[Qt,t("span",null,"$"+s(parseFloat(e.sale.total).toFixed(2)),1)])])])])])])])])])):(o(),C($,{key:1},{header:m(()=>[t("div",Wt,[t("h2",Xt," Venta #"+s(e.sale.sale_number),1),t("div",Yt,[t("button",{onClick:p,class:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm flex items-center gap-1 no-print",disabled:d.value,title:"Descargar PDF"},[d.value?(o(),a("span",te,"â³")):(o(),a("span",ee,"â¬‡ï¸")),se],8,Zt),t("button",{onClick:y,class:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center gap-1 no-print",disabled:d.value,title:"Compartir Factura"},[d.value?(o(),a("span",ae,"â³")):(o(),a("span",ne,"ðŸ”—")),ie],8,oe),t("button",{onClick:g,class:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 no-print flex items-center gap-1",title:"Imprimir"},ce),f(v(I),{href:l.route("admin.reports.index",{type:"physical"}),class:"px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 no-print flex items-center gap-1",title:"Volver"},{default:m(()=>[re,_e]),_:1},8,["href"])])])]),default:m(()=>[t("div",he,[t("div",ue,[t("div",xe,[t("div",me,[e.store?.logo_url?(o(),a("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-20 w-auto object-contain"},null,8,pe)):i("",!0),e.store?.name?(o(),a("h1",ye,s(e.store.name),1)):i("",!0)])]),e.store?.name?(o(),a("div",ge,[t("div",be,s(e.store.name),1)])):i("",!0),t("div",fe,[t("div",ve,[t("div",we,[ke,t("div",Fe,[t("div",null,[$e,t("p",je,"#"+s(e.sale.sale_number),1)]),t("div",null,[Pe,t("p",De,s(new Date(e.sale.created_at).toLocaleString()),1)]),t("div",null,[Ve,t("p",Ce,s(e.sale.user?.name||"N/A"),1)]),t("div",null,[Ne,t("p",Ie,s(e.sale.payment_method),1)])]),e.sale.notes?(o(),a("div",Se,[ze,t("p",Be,s(e.sale.notes),1)])):i("",!0)]),t("div",Le,[Oe,t("div",Te,[t("table",Ee,[Me,t("tbody",qe,[(o(!0),a(_,null,x(e.sale.items,n=>(o(),a("tr",{key:n.id},[t("td",Ae,[t("p",Ue,s(n.product_name),1),n.variant_options?(o(),a("p",Ge,s(Object.entries(n.variant_options).map(([h,u])=>`${h}: ${u}`).join(", ")),1)):i("",!0)]),t("td",Re,s(n.quantity),1),t("td",He,[n.original_price&&n.original_price>n.unit_price?(o(),a("div",Je,[t("p",Ke,"$"+s(parseFloat(n.original_price).toFixed(2)),1),t("p",Qe,"$"+s(parseFloat(n.unit_price).toFixed(2)),1)])):(o(),a("p",We,"$"+s(parseFloat(n.unit_price).toFixed(2)),1))]),t("td",Xe,[n.discount_percent>0?(o(),a("span",Ye," -"+s(n.discount_percent)+"% ",1)):(o(),a("span",Ze,"-"))]),t("td",ts,"$"+s(parseFloat(n.subtotal).toFixed(2)),1)]))),128))])])])]),t("div",es,[t("div",ss,[t("div",os,[t("div",as,[ns,t("span",null,"$"+s(parseFloat(e.sale.subtotal).toFixed(2)),1)]),e.sale.discount>0?(o(),a("div",is,[ls,t("span",null,"-$"+s(parseFloat(e.sale.discount).toFixed(2)),1)])):i("",!0),t("div",ds,[cs,t("span",null,"$"+s(parseFloat(e.sale.total).toFixed(2)),1)])])])])])])])])]),_:1})),t("div",rs,[t("div",_s,[e.store?.name?(o(),a("div",hs,[t("div",us,s(e.store.name),1)])):i("",!0),e.sale?(o(),a("div",xs,[t("div",ms,[e.store?.logo_url?(o(),a("img",{key:0,src:e.store.logo_url,alt:"Logo",class:"h-20 w-auto object-contain",crossorigin:"anonymous"},null,8,ps)):i("",!0),e.store?.name?(o(),a("h1",ys,s(e.store.name),1)):i("",!0)]),t("div",gs,[bs,t("div",fs,[t("div",null,[vs,r(" #"+s(e.sale.sale_number),1)]),t("div",null,[ws,r(" "+s(new Date(e.sale.created_at).toLocaleString("es-CO")),1)]),t("div",null,[ks,r(" "+s(e.sale.user?.name||"N/A"),1)]),t("div",null,[Fs,r(),t("span",$s,s(e.sale.payment_method),1)])])]),t("table",js,[Ps,t("tbody",null,[(o(!0),a(_,null,x(e.sale.items,n=>(o(),a("tr",{key:n.id,class:"border-b border-gray-200"},[t("td",Ds,[r(s(n.product_name)+" ",1),n.variant_options?(o(),a("div",Vs,s(Object.values(n.variant_options).join(" / ")),1)):i("",!0)]),t("td",Cs,s(n.quantity),1),t("td",Ns,"$"+s(parseFloat(n.unit_price).toFixed(2)),1),t("td",Is,"$"+s(parseFloat(n.subtotal).toFixed(2)),1)]))),128))])]),t("div",Ss,[t("div",zs,[t("div",Bs,[Ls,t("span",null,"$"+s(parseFloat(e.sale.subtotal).toFixed(2)),1)]),e.sale.discount>0?(o(),a("div",Os,[Ts,t("span",null,"-$"+s(parseFloat(e.sale.discount).toFixed(2)),1)])):i("",!0),t("div",Es,[Ms,t("span",null,"$"+s(parseFloat(e.sale.total).toFixed(2)),1)])])]),e.sale.notes?(o(),a("div",qs,[As,t("p",Us,s(e.sale.notes),1)])):i("",!0),Gs])):i("",!0)])])],64))}};export{Ws as default};
