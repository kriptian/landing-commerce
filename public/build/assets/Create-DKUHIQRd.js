import{r as x,u as U,a,o as l,b as _,d as s,h as E,e as y,f as o,g as V,i as n,j as m,p as u,q as b,t as i,F as v,n as $,x as S}from"./app-DvD8DxYD.js";import{_ as q}from"./AuthenticatedLayout-XBRx6_y9.js";import{_ as g}from"./AlertModal-99vnVpkh.js";import"./Modal-CNkf46-f.js";const M=o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Crear usuario",-1),N={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6 text-gray-900"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},L={class:"mb-4"},j=o("label",{for:"name",class:"block font-medium text-sm text-gray-700"},"Nombre",-1),D={key:0,class:"text-sm text-red-600 mt-2"},G={class:"mb-4"},P=o("label",{for:"email",class:"block font-medium text-sm text-gray-700"},"Email",-1),R={key:0,class:"text-sm text-red-600 mt-2"},T={class:"mb-4"},H=o("label",{for:"role",class:"block font-medium text-sm text-gray-700"},"Rol",-1),I=o("option",{value:"",disabled:""},"Selecciona un rol",-1),J=["value"],K={key:0,class:"text-sm text-red-600 mt-2"},O={key:1,class:"text-sm text-yellow-600 mt-2"},Q={class:"mb-4"},W=o("label",{for:"password",class:"block font-medium text-sm text-gray-700"},"Contraseña",-1),X={key:0,class:"text-sm text-red-600 mt-2"},Y={class:"mb-4"},Z=o("label",{for:"password_confirmation",class:"block font-medium text-sm text-gray-700"},"Confirmar Contraseña",-1),ee={key:0,class:"text-sm text-red-600 mt-2"},se={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},oe={class:"text-sm text-red-600"},re={class:"flex items-center justify-end mt-6 border-t pt-6"},te=["disabled"],ae="573208204198",me={__name:"Create",props:{roles:Array},setup(c){const p=c,f=x(!1),h=x(""),w=x(!1),k=`https://wa.me/${ae}?text=${encodeURIComponent("Hola, necesito ampliar mis licencias de usuarios.")}`,e=U({name:"",email:"",password:"",password_confirmation:"",role:p.roles&&Array.isArray(p.roles)&&p.roles.length>0?p.roles[0]:""}),C=()=>{e.post(route("admin.users.store"),{onSuccess:()=>{window.location=route("admin.users.index")},onError:d=>{console.error("Errores al crear usuario:",d),d&&d.limit&&(f.value=!0,h.value=d.limit),d&&d.error&&console.error("Error general:",d.error)},onFinish:()=>{e.hasErrors||e.reset("password","password_confirmation")}})};return(d,r)=>(l(),a(v,null,[_(s(E),{title:"Crear Usuario"}),_(q,null,{header:y(()=>[M]),default:y(()=>[o("div",N,[o("div",A,[o("div",F,[o("div",z,[o("form",{onSubmit:V(C,["prevent"])},[o("div",B,[o("div",null,[o("div",L,[j,m(o("input",{id:"name","onUpdate:modelValue":r[0]||(r[0]=t=>s(e).name=t),type:"text",class:u(["block mt-1 w-full rounded-md shadow-sm border-gray-300",s(e).errors.name?"border-red-500":""]),required:""},null,2),[[b,s(e).name]]),s(e).errors.name?(l(),a("p",D,i(s(e).errors.name),1)):n("",!0)]),o("div",G,[P,m(o("input",{id:"email","onUpdate:modelValue":r[1]||(r[1]=t=>s(e).email=t),type:"email",class:u(["block mt-1 w-full rounded-md shadow-sm border-gray-300",s(e).errors.email?"border-red-500":""]),required:""},null,2),[[b,s(e).email]]),s(e).errors.email?(l(),a("p",R,i(s(e).errors.email),1)):n("",!0)]),o("div",T,[H,m(o("select",{id:"role","onUpdate:modelValue":r[2]||(r[2]=t=>s(e).role=t),class:u(["block mt-1 w-full rounded-md shadow-sm border-gray-300",s(e).errors.role?"border-red-500":""]),required:""},[I,(l(!0),a(v,null,$(c.roles||[],t=>(l(),a("option",{key:t,value:t},i(t),9,J))),128))],2),[[S,s(e).role]]),s(e).errors.role?(l(),a("p",K,i(s(e).errors.role),1)):n("",!0),!c.roles||c.roles.length===0?(l(),a("p",O," No hay roles disponibles. Contacta al administrador. ")):n("",!0)])]),o("div",null,[o("div",Q,[W,m(o("input",{id:"password","onUpdate:modelValue":r[3]||(r[3]=t=>s(e).password=t),type:"password",class:u(["block mt-1 w-full rounded-md shadow-sm border-gray-300",s(e).errors.password?"border-red-500":""]),required:""},null,2),[[b,s(e).password]]),s(e).errors.password?(l(),a("p",X,i(s(e).errors.password),1)):n("",!0)]),o("div",Y,[Z,m(o("input",{id:"password_confirmation","onUpdate:modelValue":r[4]||(r[4]=t=>s(e).password_confirmation=t),type:"password",class:u(["block mt-1 w-full rounded-md shadow-sm border-gray-300",s(e).errors.password_confirmation?"border-red-500":""]),required:""},null,2),[[b,s(e).password_confirmation]]),s(e).errors.password_confirmation?(l(),a("p",ee,i(s(e).errors.password_confirmation),1)):n("",!0)])])]),s(e).errors.error?(l(),a("div",se,[o("p",oe,i(s(e).errors.error),1)])):n("",!0),o("div",re,[o("button",{type:"submit",disabled:s(e).processing,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50"},i(s(e).processing?"Guardando...":"Guardar Usuario"),9,te)])],32)])])])]),_(g,{show:f.value,type:"error",title:"Límite de licencias alcanzado",message:h.value||"Tu plan alcanzó el máximo de usuarios. Contactá al administrador para ampliar licencias.","primary-text":"Contactar","primary-href":k,"secondary-text":"Entendido",onClose:r[5]||(r[5]=t=>f.value=!1),onSecondary:r[6]||(r[6]=t=>f.value=!1)},null,8,["show","message"]),_(g,{show:w.value,type:"success",title:"¡Usuario creado con éxito!","primary-text":"Entendido",onPrimary:r[7]||(r[7]=t=>w.value=!1),onClose:r[8]||(r[8]=t=>w.value=!1)},null,8,["show"])]),_:1})],64))}};export{me as default};
