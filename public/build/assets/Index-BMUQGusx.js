import{r as p,w as V,o as F,n as S,a as D,b,d as v,e as o,u as l,h as M,f as n,g as e,q as c,m as i,k as d,j as h,v as k,x as N,p as z,i as j,F as E,l as O,t as u,s as R}from"./app-D7ttTWGz.js";import{_ as U}from"./AuthenticatedLayout-DDDo1cMT.js";import{_ as $}from"./Pagination-C1EG426L.js";const A=e("div",{class:"flex justify-between items-center"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Órdenes")],-1),G={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6 text-gray-900"},H={class:"mb-4"},J={class:"flex flex-wrap gap-2"},K={class:"mb-4"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-3 items-center"},X={class:"md:col-span-2"},Y={class:"relative"},Z=e("svg",{class:"absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M10 2a8 8 0 105.293 14.707l3.5 3.5a1 1 0 001.414-1.414l-3.5-3.5A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"})],-1),ee={class:"flex items-center gap-2 md:col-span-2"},te=e("span",{class:"text-gray-500 text-sm"},"a",-1),se={class:"flex items-center gap-2"},ae=e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1),re={class:"pointer-events-none absolute inset-y-0 left-0 w-6 bg-gradient-to-r from-white to-transparent"},oe={class:"pointer-events-none absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-white to-transparent"},ne={class:"min-w-[920px] sm:min-w-full divide-y divide-gray-200"},le=e("thead",{class:"sticky top-0 z-10 bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"sticky left-0 z-20 bg-gray-50 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Orden #"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Cliente"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Teléfono"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Fecha"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Items"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Total"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Estado"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Ver")])])],-1),ie={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap"},ge={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},fe={key:0},he=e("td",{colspan:"8",class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No se encontraron órdenes con este filtro. ",-1),ye=[he],_e={__name:"Index",props:{orders:Object,filters:Object},setup(s){const y=s,x=p(y.filters?.q||""),m=p(y.filters?.start||""),g=p(y.filters?.end||"");let L;const _=()=>{clearTimeout(L),L=setTimeout(()=>{R.get(route("admin.orders.index"),{status:y.filters?.status||void 0,q:x.value||void 0,start:m.value||void 0,end:g.value||void 0},{preserveState:!0,replace:!0,preserveScroll:!0})},350)};V(x,_),V([m,g],_);const T=a=>{const r={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(a).toLocaleDateString("es-CO",r)},w=p(null),C=p(!1),B=p(!1),f=()=>{const a=w.value;if(!a)return;const r=a.scrollWidth-a.clientWidth,t=a.scrollLeft||0;C.value=t>0,B.value=t<r-1};return F(()=>{S(()=>f()),w.value?.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",f)}),D(()=>{w.value?.removeEventListener("scroll",f),window.removeEventListener("resize",f)}),(a,r)=>(v(),b(E,null,[o(l(M),{title:"Gestionar Órdenes"}),o(U,null,{header:n(()=>[A]),default:n(()=>[e("div",G,[e("div",I,[e("div",W,[e("div",P,[e("div",H,[e("div",J,[o(l(c),{href:a.route("admin.orders.index"),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-blue-600 text-white":!s.filters.status,"bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status}])},{default:n(()=>[d(" Todos ")]),_:1},8,["href","class"]),o(l(c),{href:a.route("admin.orders.index",{status:"recibido"}),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-yellow-500 text-white":s.filters.status==="recibido","bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status!=="recibido"}])},{default:n(()=>[d(" Recibidos ")]),_:1},8,["href","class"]),o(l(c),{href:a.route("admin.orders.index",{status:"en_preparacion"}),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-blue-500 text-white":s.filters.status==="en_preparacion","bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status!=="en_preparacion"}])},{default:n(()=>[d(" En Preparación ")]),_:1},8,["href","class"]),o(l(c),{href:a.route("admin.orders.index",{status:"despachado"}),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-purple-500 text-white":s.filters.status==="despachado","bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status!=="despachado"}])},{default:n(()=>[d(" Despachados ")]),_:1},8,["href","class"]),o(l(c),{href:a.route("admin.orders.index",{status:"entregado"}),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-green-500 text-white":s.filters.status==="entregado","bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status!=="entregado"}])},{default:n(()=>[d(" Entregados ")]),_:1},8,["href","class"]),o(l(c),{href:a.route("admin.orders.index",{status:"cancelado"}),class:i(["px-3 py-2 text-sm font-medium rounded-md",{"bg-red-500 text-white":s.filters.status==="cancelado","bg-gray-200 text-gray-700 hover:bg-gray-300":s.filters.status!=="cancelado"}])},{default:n(()=>[d(" Cancelados ")]),_:1},8,["href","class"])])]),e("div",K,[e("div",Q,[e("div",X,[e("div",Y,[h(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>x.value=t),type:"text",placeholder:"Buscar por nombre o teléfono",class:"w-full pl-10 pr-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,x.value]]),Z])]),e("div",ee,[h(e("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>m.value=t),type:"date",class:"w-full border rounded-md text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,m.value]]),te,h(e("input",{"onUpdate:modelValue":r[2]||(r[2]=t=>g.value=t),type:"date",class:"w-full border rounded-md text-sm py-2 px-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,g.value]])]),e("div",se,[e("button",{onClick:r[3]||(r[3]=N(()=>{x.value="",m.value="",g.value="",_()},["prevent"])),class:"inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium py-2 px-3 rounded-md w-full md:w-auto justify-center"},[ae,d(" Limpiar ")])])])]),e("div",{ref_key:"scrollBoxRef",ref:w,class:"relative overflow-x-auto"},[h(e("div",re,null,512),[[z,C.value]]),h(e("div",oe,null,512),[[z,B.value]]),e("table",ne,[le,e("tbody",ie,[(v(!0),b(E,null,O(s.orders.data,(t,q)=>(v(),b("tr",{key:t.id,class:"odd:bg-white even:bg-gray-100"},[e("td",{class:i(["sticky left-0 z-10 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-r",q%2===1?"bg-gray-100":"bg-white"])},u(t.sequence_number||t.sequence_number===0?t.sequence_number:t.id),3),e("td",de,u(t.customer_name),1),e("td",ce,u(t.customer_phone),1),e("td",ue,u(T(t.created_at)),1),e("td",pe,u(t.items_count),1),e("td",xe,"$ "+u(Number(t.total_price).toLocaleString("es-CO")),1),e("td",me,[e("span",{class:i(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":t.status==="recibido","bg-blue-100 text-blue-800":t.status==="en_preparacion","bg-purple-100 text-purple-800":t.status==="despachado","bg-green-100 text-green-800":t.status==="entregado","bg-red-100 text-red-800":t.status==="cancelado"}])},u(t.status),3)]),e("td",ge,[o(l(c),{href:a.route("admin.orders.show",t.id),class:"text-indigo-600 hover:text-indigo-900"},{default:n(()=>[d("Ver")]),_:2},1032,["href"])])]))),128)),s.orders.data.length===0?(v(),b("tr",fe,ye)):j("",!0)])])],512),o($,{class:"mt-6",links:s.orders.links},null,8,["links"])])])])])]),_:1})],64))}};export{_e as default};
