import{r as m,c as $,w as q,a as r,o as i,b as d,u as b,h as I,d as u,e as t,T as j,f as g,g as A,v as O,t as o,F as p,i as k,n as S,l as B,j as P,k as F}from"./app-x99BrRpl.js";import{_ as D}from"./AuthenticatedLayout-rh6e3CQH.js";import{_ as G}from"./Pagination-ySTZ9e24.js";const R={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900"},K={class:"mb-4 flex items-center justify-between"},Q={class:"flex items-center gap-3"},W={key:0,class:"relative"},X={class:"relative"},Y={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-lg z-10"},Z=["onClick"],tt={class:"overflow-x-auto"},et={class:"min-w-full divide-y divide-gray-200"},st={class:"bg-white divide-y divide-gray-200"},at={key:0},ot={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium text-gray-900"},lt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},nt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},it={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},dt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm"},ut={class:"font-medium text-gray-900"},ct={class:"text-gray-500"},mt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-800 font-bold"},pt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-500"},xt={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ft={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},ht={key:0},wt={__name:"Index",props:{products:Object,filters:Object},setup(x){const v=x,f=m(!!v.filters?.search),c=m(v.filters?.search||""),l=m(v.filters?.status||""),C=m(null),h=m(!1),w=[{value:"",label:"Todos"},{value:"out_of_stock",label:"Agotados"},{value:"low_stock",label:"¡Pocas unidades!"}],M=$(()=>(w.find(a=>a.value===l.value)||w[0]).label),L=async()=>{f.value=!f.value,f.value?(await F(),C.value?.focus()):(c.value="",_())},_=()=>{P.get(route("admin.inventory.index"),{search:c.value||void 0,status:l.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})};let N;q(c,()=>{clearTimeout(N),N=setTimeout(()=>_(),350)});const T=a=>{l.value=a,h.value=!1,_()},V=a=>l.value?a.filter(s=>{const e=Number(s.stock)||0,n=Number(s.alert)||0;return l.value==="out_of_stock"?e<=0:l.value==="low_stock"?n>0&&e>0&&e<=n:!0}):a,z=a=>{if(!l.value)return!0;const s=Number(a.quantity)||0,e=Number(a.alert)||0;return l.value==="out_of_stock"?s<=0:l.value==="low_stock"?e>0&&s>0&&s<=e:!0},y=a=>{const s=Number(a.stock)||0,e=Number(a.alert??a.minimum_stock)||0;return s<=0?{text:"Agotado",class:"bg-red-100 text-red-800"}:e>0&&s<=e?{text:"¡Pocas unidades!",class:"bg-yellow-100 text-yellow-800"}:{text:"En Stock",class:"bg-green-100 text-green-800"}},E=a=>Object.entries(a).map(([s,e])=>`${s}: ${e}`).join(", ");return(a,s)=>(i(),r(p,null,[d(b(I),{title:"Gestión de Inventario"}),d(D,null,{header:u(()=>[...s[2]||(s[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestión de Inventario",-1)])]),default:u(()=>[t("div",R,[t("div",U,[t("div",H,[t("div",J,[t("div",K,[t("div",Q,[t("button",{type:"button",onClick:L,class:"p-2 rounded hover:bg-gray-100 transition"},[...s[3]||(s[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"})],-1)])]),d(j,{name:"fade-slide"},{default:u(()=>[f.value?(i(),r("div",W,[A(t("input",{ref_key:"searchInputRef",ref:C,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),type:"text",placeholder:"Buscar producto...",class:"w-64 md:w-80 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[O,c.value]])])):g("",!0)]),_:1})]),t("div",X,[t("button",{type:"button",onClick:s[1]||(s[1]=e=>h.value=!h.value),class:"inline-flex items-center gap-2 px-3 py-2 border rounded-md shadow-sm hover:bg-gray-50"},[t("span",null,o(M.value),1),s[4]||(s[4]=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1))]),d(j,{name:"fade-slide"},{default:u(()=>[h.value?(i(),r("ul",Y,[(i(),r(p,null,k(w,e=>t("li",{key:e.value},[t("button",{type:"button",onClick:n=>T(e.value),class:S(["w-full text-left px-3 py-2 hover:bg-gray-100",{"font-semibold text-indigo-600":e.value===l.value}])},o(e.label),11,Z)])),64))])):g("",!0)]),_:1})])]),t("div",tt,[t("table",et,[s[8]||(s[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Producto / Variante"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock Actual"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stock Mínimo"),t("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),t("th",{class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Editar")])])],-1)),t("tbody",st,[(i(!0),r(p,null,k(x.products.data,e=>(i(),r(p,{key:e.id},[e.variants.length===0&&z(e)?(i(),r("tr",at,[t("td",ot,o(e.name),1),t("td",lt,o(e.quantity),1),t("td",nt,o(e.minimum_stock),1),t("td",rt,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",y({stock:e.quantity,alert:e.alert,minimum_stock:e.minimum_stock}).class])},o(y({stock:e.quantity,alert:e.alert,minimum_stock:e.minimum_stock}).text),3)]),t("td",it,[d(b(B),{href:a.route("admin.products.edit",e.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:u(()=>[...s[5]||(s[5]=[t("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),t("path",{d:"M15.75 4.5l3.75 3.75"})],-1)])]),_:1},8,["href"])])])):g("",!0),(i(!0),r(p,null,k(V(e.variants),n=>(i(),r("tr",{key:n.id},[t("td",dt,[t("div",ut,o(e.name),1),t("div",ct,o(E(n.options)),1)]),t("td",mt,o(n.stock),1),t("td",pt,o(n.minimum_stock),1),t("td",xt,[t("span",{class:S(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",y(n).class])},o(y(n).text),3)]),t("td",ft,[d(b(B),{href:a.route("admin.products.edit",e.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:u(()=>[...s[6]||(s[6]=[t("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),t("path",{d:"M15.75 4.5l3.75 3.75"})],-1)])]),_:1},8,["href"])])]))),128))],64))),128)),x.products.data.length===0?(i(),r("tr",ht,[...s[7]||(s[7]=[t("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," No hay productos para mostrar. ",-1)])])):g("",!0)])])]),d(G,{class:"mt-6",links:x.products.links},null,8,["links"])])])])])]),_:1})],64))}};export{wt as default};
