import{K as j,r as l,a as i,o as d,b as r,u as w,h as I,d as n,e,g as S,v as L,F as b,i as N,t as u,x as q,m,l as M,f as T,j as p}from"./app-DdN1dnwv.js";import{_ as z}from"./AuthenticatedLayout-0XqtQlBh.js";import{_ as F}from"./Modal-uE4VJq8H.js";import{_ as G}from"./SecondaryButton-B5xcrSpi.js";import{D as O}from"./DangerButton-BMEUFFUh.js";import{_ as H}from"./AlertModal-CWL83k3D.js";import"./DropdownLink-DQGx_2Xf.js";const U={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},R={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},W={class:"flex flex-wrap items-center gap-3"},X=["value"],Y={class:"flex items-center gap-2 border rounded-lg px-3 py-2"},Z={class:"inline-flex items-center gap-1 text-sm"},ee=["checked"],te=["value"],se={class:"overflow-x-auto"},oe={class:"min-w-[900px] w-full divide-y divide-gray-200 table-auto"},re={class:"bg-white divide-y divide-gray-200"},ae={key:0},ne={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},le={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ie={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},de={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},pe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},ue={class:"flex items-center gap-2"},me={class:"inline-flex items-center gap-1 text-sm"},ce=["checked","onChange"],xe=["value","onInput"],ve={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium"},ge={class:"flex items-center gap-3"},ye=["onClick"],fe={class:"p-6"},he={class:"mt-6 flex justify-end"},Ne={__name:"Index",props:{products:Array,categories:Array,store:Object,filters:Object},setup(x){const a=x,C=j(),v=l(a.filters?.search||""),g=l(a.filters?.category||""),y=l(!1),f=l(null),c=l(!!C?.props?.flash?.success),P=l(C?.props?.flash?.success||""),A=o=>{f.value=o,y.value=!0},h=()=>{y.value=!1,f.value=null},$=()=>{p.delete(route("admin.products.destroy",f.value),{onSuccess:()=>{h(),P.value="¡Producto eliminado con éxito!",c.value=!0}})},V=o=>{p.put(route("admin.products.update",o.id),{promo_active:!o.promo_active,promo_discount_percent:o.promo_discount_percent},{preserveScroll:!0})},B=(o,t)=>{const s=Math.max(1,Math.min(90,Number(t)||0));p.put(route("admin.products.update",o.id),{promo_discount_percent:s,promo_active:!0},{preserveScroll:!0})},D=()=>{p.put(route("admin.products.store_promo"),{promo_active:!a.store.promo_active,promo_discount_percent:a.store.promo_discount_percent},{preserveScroll:!0})},E=o=>{const t=Math.max(1,Math.min(90,Number(o)||0));p.put(route("admin.products.store_promo"),{promo_active:!0,promo_discount_percent:t},{preserveScroll:!0})},k=()=>{p.get(route("admin.products.index"),{search:v.value,category:g.value},{preserveState:!0,replace:!0,preserveScroll:!0})};return(o,t)=>(d(),i(b,null,[r(w(I),{title:"Gestionar Productos"}),r(z,null,{header:n(()=>[...t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Productos",-1)])]),default:n(()=>[e("div",U,[e("div",K,[e("div",J,[e("div",Q,[e("div",R,[t[11]||(t[11]=e("p",{class:"shrink-0"},"Aquí podés crear, editar y eliminar los productos de tu tienda.",-1)),e("div",W,[S(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),onInput:k,placeholder:"Buscar productos...",class:"border rounded px-3 py-2 text-sm h-10"},null,544),[[L,v.value]]),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onChange:k,class:"border rounded px-2 py-2 text-sm h-10 min-w-[170px] max-w-[220px]"},[t[6]||(t[6]=e("option",{value:""},"Todas las categorías",-1)),(d(!0),i(b,null,N(a.categories,s=>(d(),i("option",{key:s.id,value:s.id},u(s.name),9,X))),128))],544),[[q,g.value]]),t[10]||(t[10]=e("div",{class:"hidden md:block h-6 w-px bg-gray-200"},null,-1)),e("div",Y,[t[8]||(t[8]=e("span",{class:"text-sm text-gray-600"},"Promo Global:",-1)),e("label",Z,[e("input",{type:"checkbox",checked:a.store.promo_active,onChange:D,class:"rounded border-gray-300"},null,40,ee),t[7]||(t[7]=m(" Activa ",-1))]),e("input",{type:"number",min:"1",max:"90",value:a.store.promo_discount_percent??"",onInput:t[2]||(t[2]=s=>E(s.target.value)),placeholder:"%",class:"w-16 text-sm border rounded px-1 py-0.5"},null,40,te)]),r(w(M),{href:o.route("admin.products.create"),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"},{default:n(()=>[...t[9]||(t[9]=[m(" Crear Nuevo Producto ",-1)])]),_:1},8,["href"])])]),e("div",se,[e("table",oe,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Precio"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cantidad"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Categoría"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Promoción"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1)),e("tbody",re,[x.products.length===0?(d(),i("tr",ae,[...t[12]||(t[12]=[e("td",{colspan:"6",class:"px-3 py-3 sm:px-6 sm:py-4 text-center text-gray-500"},"No hay productos creados.",-1)])])):T("",!0),(d(!0),i(b,null,N(x.products,s=>(d(),i("tr",{key:s.id},[e("td",ne,u(s.name),1),e("td",le,"$ "+u(Number(s.price).toLocaleString("es-CO")),1),e("td",ie,u(s.quantity),1),e("td",de,u(s.category?s.category.name:"Sin Categoría"),1),e("td",pe,[e("div",ue,[e("label",me,[e("input",{type:"checkbox",checked:s.promo_active,onChange:_=>V(s),class:"rounded border-gray-300"},null,40,ce),t[13]||(t[13]=m(" Activa ",-1))]),e("input",{type:"number",min:"1",max:"90",value:s.promo_discount_percent??"",onInput:_=>B(s,_.target.value),placeholder:"%",class:"w-16 text-sm border rounded px-1 py-0.5"},null,40,xe)])]),e("td",ve,[e("div",ge,[r(w(M),{href:o.route("admin.products.edit",s.id),class:"text-indigo-600 hover:text-indigo-900 inline-flex items-center gap-1"},{default:n(()=>[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5 sm:hidden",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1),e("span",{class:"hidden sm:inline"},"Editar",-1)])]),_:1},8,["href"]),e("button",{onClick:_=>A(s.id),class:"text-red-600 hover:text-red-900 inline-flex items-center gap-1"},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5 sm:hidden",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1),e("span",{class:"hidden sm:inline"},"Eliminar",-1)])],8,ye)])])]))),128))])])])])])])])]),_:1}),r(F,{show:y.value,onClose:h},{default:n(()=>[e("div",fe,[t[19]||(t[19]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que querés eliminar este producto? ",-1)),t[20]||(t[20]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. Se borrará el producto con todas sus variantes e imágenes. ",-1)),e("div",he,[r(G,{onClick:h},{default:n(()=>[...t[17]||(t[17]=[m(" Cancelar ",-1)])]),_:1}),r(O,{class:"ms-3",onClick:$},{default:n(()=>[...t[18]||(t[18]=[m(" Sí, Eliminar Producto ",-1)])]),_:1})])])]),_:1},8,["show"]),r(H,{show:c.value,type:"success",title:"Producto",message:P.value,"primary-text":"Entendido",onPrimary:t[3]||(t[3]=s=>c.value=!1),onClose:t[4]||(t[4]=s=>c.value=!1)},null,8,["show","message"])],64))}};export{Ne as default};
