import{z as j,r as B,b as l,d as a,e as h,u as r,h as U,f as v,g as e,s as c,j as g,i as _,v as b,t as m,F as x,l as w,k as y}from"./app-Bhrzmz1I.js";import{_ as E}from"./AuthenticatedLayout-Fn25hYIa.js";import{_ as F}from"./AlertModal-BV2jmJtC.js";import{u as D,S as q}from"./useSectionTour-DdKNX0wO.js";import"./Modal-D0oh2LX8.js";const z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Crear categoría",-1),L={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},H={class:"p-6 text-gray-900"},I={class:"mb-6 border-b pb-6"},J=e("label",{for:"name",class:"block font-medium text-lg text-gray-800"},"Nombre de la Categoría",-1),K={key:0,class:"text-sm text-red-600 mt-2"},O={class:"mt-6"},Q=e("h3",{class:"font-medium text-lg text-gray-800"},"Estructura de Subcategorías",-1),R=e("p",{class:"text-sm text-gray-500"},"Definí subcategorías y un subnivel adicional (máximo 3 niveles en total).",-1),W={class:"flex items-center gap-4 p-3"},X=["onUpdate:modelValue","placeholder"],Y=["onClick"],Z={class:"bg-gray-50 px-3 pb-3"},ee=["onClick"],te={class:"w-5 h-5 inline-flex items-center justify-center rounded-full border border-gray-300 text-gray-700"},se={key:0,class:"mt-3 space-y-2"},oe=["onUpdate:modelValue","placeholder"],re=["onClick"],ne=["onClick"],le=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),ae={key:0,class:"text-sm text-red-600 mt-2"},ie=e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("rect",{x:"4",y:"3",width:"11",height:"15",rx:"2",ry:"2","stroke-width":"1.5"}),e("circle",{cx:"18",cy:"18",r:"3","stroke-width":"1.5"}),e("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M18 16.5v3M16.5 18h3"})],-1),de={class:"flex items-center justify-end mt-8 border-t pt-6"},ce=["disabled"],ue=e("span",{class:"text-lg"},"+",-1),he=e("span",null,"Crear",-1),me=[ue,he],ve={__name:"Create",setup(pe){const s=j({name:"",subcategories:[]}),{showTour:C,steps:k,handleTourComplete:S}=D("categories-create"),$=()=>{s.subcategories.push({name:"",children:[],_showChildren:!1})},V=n=>{s.subcategories.splice(n,1)},A=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t._showChildren=!t._showChildren)},T=n=>{const t=s.subcategories[n];t&&(Array.isArray(t.children)||(t.children=[]),t.children.push({name:""}))},M=(n,t)=>{const o=s.subcategories[n];!o||!Array.isArray(o.children)||o.children.splice(t,1)},u=B(!1),N=()=>{s.post(route("admin.categories.store"),{onSuccess:()=>{u.value=!0}})};return(n,t)=>(a(),l(x,null,[h(r(U),{title:"Crear categoría"}),h(E,null,{header:v(()=>[z]),default:v(()=>[e("div",L,[e("div",P,[e("div",G,[e("div",H,[e("form",{onSubmit:c(N,["prevent"])},[e("div",I,[J,g(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>r(s).name=o),type:"text",class:"block mt-2 w-full rounded-md shadow-sm border-gray-300",required:""},null,512),[[b,r(s).name]]),r(s).errors.name?(a(),l("p",K,m(r(s).errors.name),1)):_("",!0)]),e("div",O,[Q,R,(a(!0),l(x,null,w(r(s).subcategories,(o,d)=>(a(),l("div",{key:d,class:"mt-4 border rounded-lg overflow-hidden"},[e("div",W,[g(e("input",{"onUpdate:modelValue":i=>o.name=i,type:"text",placeholder:`Nombre de la Subcategoría ${d+1}`,class:"block w-full rounded-md shadow-sm border-gray-300"},null,8,X),[[b,o.name]]),e("button",{onClick:c(i=>V(d),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"}," - ",8,Y)]),e("div",Z,[e("button",{type:"button",class:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",onClick:c(i=>A(d),["prevent"])},[e("span",te,m(o._showChildren?"v":">"),1),e("span",null,m(o._showChildren?"Colapsar subniveles":"Expandir subniveles"),1)],8,ee),o._showChildren?(a(),l("div",se,[(a(!0),l(x,null,w(o.children||[],(i,p)=>(a(),l("div",{key:p,class:"flex items-center gap-3"},[g(e("input",{"onUpdate:modelValue":f=>i.name=f,type:"text",class:"block w-full rounded-md shadow-sm border-gray-300",placeholder:`Subnivel ${p+1}`},null,8,oe),[[b,i.name]]),e("button",{onClick:c(f=>M(d,p),["prevent"]),type:"button",class:"bg-red-500 text-white font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center"},"- ",8,re)]))),128)),e("button",{type:"button",class:"mt-1 inline-flex items-center gap-2 border border-green-500 text-green-600 py-1 px-3 rounded hover:bg-green-50",onClick:c(i=>T(d),["prevent"])},[le,y(" Agregar subnivel ")],8,ne)])):_("",!0)])]))),128)),r(s).errors.subcategories?(a(),l("p",ae,m(r(s).errors.subcategories),1)):_("",!0),e("button",{onClick:c($,["prevent"]),type:"button",class:"mt-4 inline-flex items-center gap-2 border border-green-500 text-green-600 py-2 px-4 rounded hover:bg-green-50"},[ie,y(" Añadir Subcategoría ")])]),e("div",de,[e("button",{type:"submit",disabled:r(s).processing,class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 inline-flex items-center gap-2"},me,8,ce)])],32)])])])])]),_:1}),h(F,{show:u.value,type:"success",title:"Categorías",message:"¡Categoría creada con éxito!","primary-text":"Entendido",onPrimary:t[1]||(t[1]=o=>{u.value=!1,r(s).reset()}),onClose:t[2]||(t[2]=o=>{u.value=!1,r(s).reset()})},null,8,["show"]),h(q,{show:r(C),section:"categories-create",steps:r(k),onComplete:r(S)},null,8,["show","steps","onComplete"])],64))}};export{ve as default};
