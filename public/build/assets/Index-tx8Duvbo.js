import{_ as T}from"./AuthenticatedLayout-rh6e3CQH.js";import{L as R,r as d,a,o as l,b as r,u,h as F,d as o,e,f as p,n as M,F as k,i as N,t as v,l as y,H as U,m,j}from"./app-x99BrRpl.js";import{u as G}from"./index-DxEje_BP.js";import{_ as $}from"./Modal--E1REx1F.js";import{_ as B}from"./SecondaryButton-Dw9Y3G9L.js";import{D}from"./DangerButton-OVyi1-ym.js";import{_ as I}from"./AlertModal-C6h_UEML.js";const P={class:"flex justify-between items-center"},J={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},W={class:"mb-4 border-b border-gray-200"},X={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Y={key:0,class:"overflow-x-auto"},Z={class:"min-w-[720px] w-full divide-y divide-gray-200 table-auto"},ee={class:"bg-white divide-y divide-gray-200"},se={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},te={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},oe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},le={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},re={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},ae={class:"flex justify-end items-center gap-2"},ie=["onClick"],ne={key:1,class:"overflow-x-auto"},de={class:"min-w-[520px] w-full divide-y divide-gray-200 table-auto"},ue={class:"bg-white divide-y divide-gray-200"},pe={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap"},me={class:"px-3 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-right text-sm font-medium"},xe={class:"flex justify-end items-center gap-2"},ce=["onClick"],fe={class:"p-6"},ve={class:"mt-6 flex justify-end"},ye={class:"p-6"},ge={class:"mt-6 flex justify-end"},Ae={__name:"Index",props:{users:Array,roles:Array},setup(E){const z=R().props.auth.user,g=R(),i=d(g?.props?.ziggy?.query?.tab==="roles"?"roles":"users"),x=d(!!g.props.flash?.success),h=d(g.props.flash?.success||""),w=d(!1),b=d(null),L=n=>{b.value=n,w.value=!0},c=()=>{w.value=!1,b.value=null},S=()=>{j.delete(route("admin.users.destroy",b.value),{preserveScroll:!0,onSuccess:()=>{c(),h.value="¡Usuario eliminado con éxito!",x.value=!0},onError:()=>{c(),h.value="Hubo un error al eliminar el usuario.",x.value=!0}})},_=d(!1),C=d(null),A=G(),V=n=>{C.value=n,_.value=!0},f=()=>{_.value=!1,C.value=null},q=()=>{j.delete(route("admin.roles.destroy",C.value),{preserveScroll:!0,onSuccess:()=>{f(),A.success("¡Rol eliminado con éxito!")},onError:()=>{f(),A.error("No se puede eliminar un rol que está en uso.")}})};return(n,s)=>(l(),a(k,null,[r(u(F),{title:"Gestionar Usuarios y Roles"}),r(T,null,{header:o(()=>[e("div",P,[s[6]||(s[6]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Gestionar Usuarios y Roles",-1)),e("div",null,[i.value==="roles"?(l(),U(u(y),{key:0,href:n.route("admin.roles.create"),class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700 ml-4"},{default:o(()=>[...s[4]||(s[4]=[m(" Crear Nuevo Rol ",-1)])]),_:1},8,["href"])):p("",!0),i.value==="users"?(l(),U(u(y),{key:1,href:n.route("admin.users.create"),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"},{default:o(()=>[...s[5]||(s[5]=[m(" Crear Nuevo Usuario ",-1)])]),_:1},8,["href"])):p("",!0)])])]),default:o(()=>[e("div",J,[e("div",K,[e("div",O,[e("div",Q,[e("div",W,[e("nav",X,[e("button",{onClick:s[0]||(s[0]=t=>i.value="users"),class:M([i.value==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Usuarios ",2),e("button",{onClick:s[1]||(s[1]=t=>i.value="roles"),class:M([i.value==="roles"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])}," Roles ",2)])]),i.value==="users"?(l(),a("div",Y,[e("table",Z,[s[9]||(s[9]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1)),e("tbody",ee,[(l(!0),a(k,null,N(E.users,t=>(l(),a("tr",{key:t.id},[e("td",se,v(t.name),1),e("td",te,v(t.email),1),e("td",oe,[t.roles.length>0?(l(),a("span",le,v(t.roles[0].name),1)):p("",!0)]),e("td",re,[e("div",ae,[r(u(y),{href:n.route("admin.users.edit",t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:o(()=>[...s[7]||(s[7]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1)])]),_:1},8,["href"]),t.id!==u(z).id?(l(),a("button",{key:0,onClick:H=>L(t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},[...s[8]||(s[8]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1)])],8,ie)):p("",!0)])])]))),128))])])])):p("",!0),i.value==="roles"?(l(),a("div",ne,[e("table",de,[s[12]||(s[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 sm:px-6 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nombre del Rol"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1)),e("tbody",ue,[(l(!0),a(k,null,N(E.roles,t=>(l(),a("tr",{key:t.id},[e("td",pe,v(t.name),1),e("td",me,[e("div",xe,[r(u(y),{href:n.route("admin.roles.edit",t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-indigo-600",title:"Editar"},{default:o(()=>[...s[10]||(s[10]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M16.862 3.487a2.25 2.25 0 113.182 3.182L9.428 17.284a3.75 3.75 0 01-1.582.992l-2.685.805a.75.75 0 01-.93-.93l.805-2.685a3.75 3.75 0 01.992-1.582L16.862 3.487z"}),e("path",{d:"M15.75 4.5l3.75 3.75"})],-1)])]),_:1},8,["href"]),e("button",{onClick:H=>V(t.id),class:"w-8 h-8 inline-flex items-center justify-center rounded hover:bg-gray-100 text-red-600",title:"Eliminar"},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.5V6h3.75a.75.75 0 010 1.5H3.75A.75.75 0 013 6h3.75V4.5A2.25 2.25 0 019 2.25h6A2.25 2.25 0 0117.25 4.5zM5.625 7.5h12.75l-.701 10.518A2.25 2.25 0 0115.43 20.25H8.57a2.25 2.25 0 01-2.244-2.232L5.625 7.5z","clip-rule":"evenodd"})],-1)])],8,ce)])])]))),128))])])])):p("",!0)])])])])]),_:1}),r($,{show:w.value,onClose:c},{default:o(()=>[e("div",fe,[s[15]||(s[15]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este usuario? ",-1)),s[16]||(s[16]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. ",-1)),e("div",ve,[r(B,{onClick:c},{default:o(()=>[...s[13]||(s[13]=[m(" Cancelar ",-1)])]),_:1}),r(D,{class:"ms-3",onClick:S},{default:o(()=>[...s[14]||(s[14]=[m(" Sí, Eliminar Usuario ",-1)])]),_:1})])])]),_:1},8,["show"]),r($,{show:_.value,onClose:f},{default:o(()=>[e("div",ye,[s[19]||(s[19]=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar este rol? ",-1)),s[20]||(s[20]=e("p",{class:"mt-1 text-sm text-gray-600"}," Esta acción es irreversible. No podrás eliminar un rol si hay usuarios que lo tengan asignado. ",-1)),e("div",ge,[r(B,{onClick:f},{default:o(()=>[...s[17]||(s[17]=[m(" Cancelar ",-1)])]),_:1}),r(D,{class:"ms-3",onClick:q},{default:o(()=>[...s[18]||(s[18]=[m(" Sí, Eliminar Rol ",-1)])]),_:1})])])]),_:1},8,["show"]),r(I,{show:x.value,type:"info",title:"Notificación",message:h.value,"primary-text":"Entendido",onPrimary:s[2]||(s[2]=t=>x.value=!1),onClose:s[3]||(s[3]=t=>x.value=!1)},null,8,["show","message"])],64))}};export{Ae as default};
